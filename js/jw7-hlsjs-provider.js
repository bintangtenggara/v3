/**
 * jw7-hlsjs-provider
 * v4.0.1
 * 2017-12-06
 * streamroot-hlsjs-p2p-bundle@5.0.1
 *  - hls.js@0.8.2
 * 
 * Copyright Ã‚Â© 2017
 */

/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * hlsjs-p2p-bundle
 * v5.0.1
 * 2017-11-29
 * @streamroot/streamrooter@0.1.0
 *  - streamroot-p2p@4.13.6
 * hls.js@0.8.2
 * www.streamroot.io
 * Copyright Ã‚Â© 2017
 */

!function(t,e){ true?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/bundle",e(e.s=56)}([function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(38),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(72),r=n(25);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(30)("wks"),r=n(18),o=n(3).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i},function(t,e,n){var i=n(3),r=n(0),o=n(39),s=n(10),a=function(t,e,n){var u,c,f,h=t&a.F,l=t&a.G,d=t&a.S,p=t&a.P,v=t&a.B,g=t&a.W,y=l?r:r[e]||(r[e]={}),m=y.prototype,E=l?i:d?i[e]:(i[e]||{}).prototype;l&&(n=e);for(u in n)(c=!h&&E&&void 0!==E[u])&&u in y||(f=c?E[u]:n[u],y[u]=l&&"function"!=typeof E[u]?n[u]:v&&c?o(f,i):g&&E[u]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):p&&"function"==typeof f?o(Function.call,f):f,p&&((y.virtual||(y.virtual={}))[u]=f,t&a.R&&m&&!m[u]&&s(m,u,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){var i=n(11),r=n(40),o=n(22),s=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(7),r=n(15);t.exports=n(8)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(12);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){t.exports={default:n(94),__esModule:!0}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e,n){var i=n(45),r=n(31);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";e.__esModule=!0;var i=n(23),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(100),o=i(r),s=n(104),a=i(s),u=n(23),c=i(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,c.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){var i=n(12);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(67),o=i(r),s=n(80),a=i(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e,n){var i=n(11),r=n(71),o=n(31),s=n(29)("IE_PROTO"),a=function(){},u=function(){var t,e=n(41)("iframe"),i=o.length;for(e.style.display="none",n(76).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(30)("keys"),r=n(18);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(3),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(7).f,r=n(9),o=n(5)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){e.f=n(5)},function(t,e,n){var i=n(3),r=n(0),o=n(26),s=n(33),a=n(7).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){var i=n(19),r=n(15),o=n(4),s=n(22),a=n(9),u=n(40),c=Object.getOwnPropertyDescriptor;e.f=n(8)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(6),r=n(0),o=n(13);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){"use strict";function i(t,e){if(void 0===t[e])throw new Error(c+": "+e)}function r(t,e,n,r){if(r){var o=r(t,e,n);if(o.override)return o.value}return i(e,n),e[n]}function o(t,e,n,r,o){if(o){if(o(t,e,n,r).override)return}i(n,r),n[r]=t}function s(t,e,n,i){Object.defineProperty(t,n,{get:function(){return r(t,e,n,i)},configurable:!0})}function a(t,e,n,i,s){Object.defineProperty(t,n,{get:function(){return r(t,e,n,s)},set:function(r){return o(r,t,e,n,i)},configurable:!0})}function u(t,e,n){t[n]=function(){return i(e,n),e[n].apply(e,arguments)}}var c="Requiring undefined property on source object";t.exports={mirrorFunc:u,mirrorRwProp:a,mirrorReadOnlyProp:s}},function(t,e,n){t.exports={default:n(57),__esModule:!0}},function(t,e,n){var i=n(59);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){t.exports=!n(8)&&!n(13)(function(){return 7!=Object.defineProperty(n(41)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(12),r=n(3).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){"use strict";var i=n(69)(!0);n(43)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var i=n(26),r=n(6),o=n(44),s=n(10),a=n(9),u=n(16),c=n(70),f=n(32),h=n(46),l=n(5)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,g,y,m){c(n,e,v);var E,_,T,b=function(t){if(!d&&t in R)return R[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==g,A=!1,R=t.prototype,L=R[l]||R["@@iterator"]||g&&R[g],O=L||b(g),I=g?S?b("entries"):O:void 0,C="Array"==e?R.entries||L:L;if(C&&(T=h(C.call(new t)))!==Object.prototype&&T.next&&(f(T,w,!0),i||a(T,l)||s(T,l,p)),S&&L&&"values"!==L.name&&(A=!0,O=function(){return L.call(this)}),i&&!m||!d&&!A&&R[l]||s(R,l,O),u[e]=O,u[w]=p,g)if(E={values:S?O:b("values"),keys:y?O:b("keys"),entries:I},m)for(_ in E)_ in R||o(R,_,E[_]);else r(r.P+r.F*(d||A),e,E);return E}},function(t,e,n){t.exports=n(10)},function(t,e,n){var i=n(9),r=n(4),o=n(73)(!1),s=n(29)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(9),r=n(47),o=n(29)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(25);t.exports=function(t){return Object(i(t))}},function(t,e,n){n(77);for(var i=n(3),r=n(10),o=n(16),s=n(5)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],f=i[c],h=f&&f.prototype;h&&!h[s]&&r(h,s,c),o[c]=o.Array}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(4),r=n(51).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(i(t))}},function(t,e,n){var i=n(45),r=n(31).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=85)}([function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(33)("wks"),r=n(24),o=n(2).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i},function(t,e,n){var i=n(2),r=n(0),o=n(13),s=n(10),a=function(t,e,n){var u,c,f,h=t&a.F,l=t&a.G,d=t&a.S,p=t&a.P,v=t&a.B,g=t&a.W,y=l?r:r[e]||(r[e]={}),m=y.prototype,E=l?i:d?i[e]:(i[e]||{}).prototype;l&&(n=e);for(u in n)(c=!h&&E&&void 0!==E[u])&&u in y||(f=c?E[u]:n[u],y[u]=l&&"function"!=typeof E[u]?n[u]:v&&c?o(f,i):g&&E[u]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):p&&"function"==typeof f?o(Function.call,f):f,p&&((y.virtual||(y.virtual={}))[u]=f,t&a.R&&m&&!m[u]&&s(m,u,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){"use strict";e.__esModule=!0;var i=n(87),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){var i=n(7),r=n(45),o=n(28),s=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(8);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(6),r=n(17);t.exports=n(9)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(52),r=n(29);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(23);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){t.exports={default:n(96),__esModule:!0}},function(t,e,n){var i=n(51),r=n(34);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(4),r=n(0),o=n(14);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports={}},function(t,e,n){var i=n(29);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=!0},function(t,e,n){var i=n(6).f,r=n(11),o=n(3)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(8),r=n(2).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(8);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(31),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(33)("keys"),r=n(24);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(2),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var i=n(110)(!0);n(55)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(7),r=n(112),o=n(34),s=n(32)("IE_PROTO"),a=function(){},u=function(){var t,e=n(27)("iframe"),i=o.length;for(e.style.display="none",n(57).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(23);t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(134),o=i(r),s=n(136),a=i(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e,n){e.f=n(3)},function(t,e,n){var i=n(2),r=n(0),o=n(25),s=n(39),a=n(6).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";function i(t,e){return new s(t,e,o.TIMER_TYPE.INTERVAL)}function r(t,e){return new s(t,e,o.TIMER_TYPE.TIMEOUT)}Object.defineProperty(e,"__esModule",{value:!0}),e.createInterval=i,e.createTimeout=r;var o=n(78),s=n(154)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(5),a=i(s),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,o.default)(this,t),this._message=e,this._status=n}return(0,a.default)(t,[{key:"message",get:function(){return this._message}},{key:"status",get:function(){return this._status}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){t.exports=!n(9)&&!n(14)(function(){return 7!=Object.defineProperty(n(27)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){!function(e,n){t.exports=function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e,n){var i=n(35)("wks"),r=n(24),o=n(1).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(8),r=n(49),o=n(50),s=Object.defineProperty;e.f=n(3)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(2),r=n(30);t.exports=n(3)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(1),r=n(4),o=n(10),s=n(5),a=function(t,e,n){var u,c,f,h=t&a.F,l=t&a.G,d=t&a.S,p=t&a.P,v=t&a.B,g=t&a.W,y=l?r:r[e]||(r[e]={}),m=y.prototype,E=l?i:d?i[e]:(i[e]||{}).prototype;l&&(n=e);for(u in n)(c=!h&&E&&void 0!==E[u])&&u in y||(f=c?E[u]:n[u],y[u]=l&&"function"!=typeof E[u]?n[u]:v&&c?o(f,i):g&&E[u]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):p&&"function"==typeof f?o(Function.call,f):f,p&&((y.virtual||(y.virtual={}))[u]=f,t&a.R&&m&&!m[u]&&s(m,u,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){var i=n(6);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports={}},function(t,e,n){var i=n(28);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(46),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(10),r=n(73),o=n(74),s=n(8),a=n(21),u=n(38),c={},f={},e=t.exports=function(t,e,n,h,l){var d,p,v,g,y=l?function(){return t}:u(t),m=i(n,h,e?2:1),E=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=a(t.length);d>E;E++)if((g=e?m(s(p=t[E])[0],p[1]):m(t[E]))===c||g===f)return g}else for(v=y.call(t);!(p=v.next()).done;)if((g=r(v,m,p.value,e))===c||g===f)return g};e.BREAK=c,e.RETURN=f},function(t,e,n){n(54);for(var i=n(1),r=n(5),o=n(9),s=n(0)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],f=i[c],h=f&&f.prototype;h&&!h[s]&&r(h,s,c),o[c]=o.Array}},function(t,e,n){var i=n(33),r=n(19);t.exports=function(t){return i(r(t))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var i=n(56),r=n(7),o=n(57),s=n(5),a=n(11),u=n(9),c=n(58),f=n(25),h=n(65),l=n(0)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,g,y,m){c(n,e,v);var E,_,T,b=function(t){if(!d&&t in R)return R[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==g,A=!1,R=t.prototype,L=R[l]||R["@@iterator"]||g&&R[g],O=L||b(g),I=g?S?b("entries"):O:void 0,C="Array"==e?R.entries||L:L;if(C&&(T=h(C.call(new t)))!==Object.prototype&&T.next&&(f(T,w,!0),i||a(T,l)||s(T,l,p)),S&&L&&"values"!==L.name&&(A=!0,O=function(){return L.call(this)}),i&&!m||!d&&!A&&R[l]||s(R,l,O),u[e]=O,u[w]=p,g)if(E={values:S?O:b("values"),keys:y?O:b("keys"),entries:I},m)for(_ in E)_ in R||o(R,_,E[_]);else r(r.P+r.F*(d||A),e,E);return E}},function(t,e,n){var i=n(22),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(35)("keys"),r=n(24);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(2).f,r=n(11),o=n(0)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var i=n(66)(!0);n(20)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(18),r=n(0)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(6),r=n(1).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports={default:n(53),__esModule:!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(18);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(8),r=n(59),o=n(36),s=n(23)("IE_PROTO"),a=function(){},u=function(){var t,e=n(29)("iframe"),i=o.length;for(e.style.display="none",n(64).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(1),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(19);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(27),r=n(0)("iterator"),o=n(9);t.exports=n(4).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(5);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(24)("meta"),r=n(6),o=n(11),s=n(2).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(14)(function(){return u(Object.preventExtensions({}))}),f=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[i].i},l=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[i].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,i)&&f(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:l,onFreeze:d}},function(t,e,n){var i=n(6);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(88),o=i(r),s=n(12),a=i(s),u=n(13),c=i(u),f=n(44),h=i(f),l=function(){function t(e){(0,a.default)(this,t),this.sn=e.sn,this.trackView=new h.default(e.trackView),this.time=e.time,this.duration=e.duration}return(0,c.default)(t,null,[{key:"fromArrayBuffer",value:function(e){var n=new Uint32Array(e),i=(0,o.default)(n,3),r=i[0],s=i[1],a=i[2];return new t({trackView:new h.default({level:r,urlId:s}),sn:a})}}]),(0,c.default)(t,[{key:"isEqual",value:function(t){if(!t)return!1;var e=t.sn,n=t.trackView;return this.sn===e&&this.trackView.isEqual(n)}},{key:"isInTrack",value:function(t){return this.trackView.isEqual(t)}},{key:"viewToString",value:function(){return this.trackView.viewToString()+"S"+this.sn}},{key:"toArrayBuffer",value:function(){var t=this.trackView,e=t.level,n=t.urlId;return new Uint32Array([e,n,this.sn]).buffer}},{key:"getId",value:function(){return this.sn}}]),t}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),o=i(r),s=n(13),a=i(s),u=function(){function t(e){(0,o.default)(this,t),this.level=e.level,this.urlId=e.urlId,this.bitrate=e.bitrate||0}return(0,a.default)(t,[{key:"viewToString",value:function(){return"L"+this.level+"U"+this.urlId}},{key:"isEqual",value:function(t){return!!t&&t.level===this.level&&t.urlId===this.urlId}},{key:"type",get:function(){return"video"}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentView=e.TrackView=e.MediaMap=void 0;var r=n(12),o=i(r),s=n(13),a=i(s),u=n(51),c=i(u),f=n(52),h=i(f),l=n(43),d=i(l),p=function(){function t(){(0,o.default)(this,t),this._manifestParser=new c.default,this._manifestParser.onLevelLoaded=this._onLevelLoaded.bind(this),this._manifestParser.onManifestLoaded=this._onManifestLoaded.bind(this),this.onMediaMapCreated=function(){}}return(0,a.default)(t,null,[{key:"integrationVersion",get:function(){return"v5h1"}}]),(0,a.default)(t,[{key:"updateManifest",value:function(t,e){this._manifestParser.update(t,e)}},{key:"_onLevelLoaded",value:function(t){var e=t.level,n=t.id,i=t.details;this._manifest.levels&&e>=0&&e<this._manifest.levels.length&&this._mediaMap.updateLevel(e,n,i)}},{key:"_onManifestLoaded",value:function(t){this._manifest=t,this._mediaMap=new h.default(this._manifest),this.onMediaMapCreated(this._mediaMap)}}]),t}();e.MediaMap=h.default,e.TrackView=d.default,e.SegmentView=d.default,e.default=p},function(t,e,n){t.exports={default:n(47),__esModule:!0}},function(t,e,n){n(48);var i=n(4).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){var i=n(7);i(i.S+i.F*!n(3),"Object",{defineProperty:n(2).f})},function(t,e,n){t.exports=!n(3)&&!n(14)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(6);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){!function(e,n){t.exports=function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(){i(this,t),this._playlistLoader=new s.default}return r(t,[{key:"update",value:function(t,e){var n=t.toString("utf8");this._playlistLoader.load(n,e)}},{key:"onManifestLoaded",set:function(t){this._playlistLoader.onManifestLoaded=t}},{key:"onLevelLoaded",set:function(t){this._playlistLoader.onLevelLoaded=t}},{key:"onError",set:function(t){this._playlistLoader.onError=t}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=i(s),u=n(3),c=i(u),f=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),l=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,d=function(){},p=function t(){r(this,t),this.tagList=[]},v=function(){function t(){r(this,t),this.levels=[],this.onManifestLoaded=d,this.onLevelLoaded=d,this.onError=d}return o(t,[{key:"resolve",value:function(t,e){return a.default.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(t,e){var n=[];f.lastIndex=0;for(var i=f.exec(t);i;){var r={},o=new c.default(i[1]);r.attrs=o,r.url=this.resolve(i[2],e);var s=o.decimalResolution("RESOLUTION");s&&(r.width=s.width,r.height=s.height),r.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),r.name=o.NAME,n.push(r),i=f.exec(t)}return n}},{key:"parseLevelPlaylist",value:function(t,e,n,i){var r={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},o=0,s=0,u=0,f=null,d=new p,v=void 0;h.lastIndex=0;for(var g=h.exec(t);g;){var y=g[1];if(y){d.duration=parseFloat(y);var m=(" "+g[2]).slice(1);d.title=m||null,d.tagList.push(m?["INF",y,m]:["INF",y])}else if(g[3]){if(!isNaN(d.duration)){var E=o++;d.type=i,d.start=s,d.sn=E,d.level=n,d.cc=u,d.baseurl=e,d.relurl=(" "+g[3]).slice(1),d.url=a.default.buildAbsoluteURL(d.baseurl,d.relurl,{alwaysNormalize:!0}),r.fragments.push(d),f=d,s+=d.duration,d=new p}}else if(g[4]){if(d.rawByteRange=(" "+g[4]).slice(1),f){var _=f.byteRangeEndOffset;_&&(d.lastByteRangeEndOffset=_)}}else if(g[5])d.rawProgramDateTime=(" "+g[5]).slice(1),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]),void 0===r.programDateTime&&(r.programDateTime=new Date(new Date(Date.parse(g[5]))-1e3*s));else{for(g=g[0].match(l),v=1;v<g.length&&void 0===g[v];v++);var T=(" "+g[v+1]).slice(1),b=(" "+g[v+2]).slice(1);switch(g[v]){case"#":d.tagList.push(b?[T,b]:[T]);break;case"PLAYLIST-TYPE":r.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":r.startSN=parseInt(T,10),o=r.startSN;break;case"TARGETDURATION":r.targetduration=parseFloat(T);break;case"VERSION":r.version=parseInt(T,10);break;case"EXTM3U":break;case"ENDLIST":r.live=!1;break;case"DIS":u++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(T,10);break;case"START":var w=new c.default(T),S=w.decimalFloatingPoint("TIME-OFFSET");isNaN(S)||(r.startTimeOffset=S);break;case"MAP":var A=new c.default(T);d.relurl=A.URI,d.rawByteRange=A.BYTERANGE,d.baseurl=e,d.level=n,d.type=i,d.sn="initSegment",r.initSegment=d,d=new p}}g=h.exec(t)}return d=f,d&&!d.relurl&&(r.fragments.pop(),s-=d.duration),r.totalduration=s,r.averagetargetduration=s/r.fragments.length,r.endSN=o-1,r.startCC=r.fragments[0]?r.fragments[0].cc:0,r.endCC=u,r}},{key:"_postprocessLevels",value:function(t){var e=[],n={};return t.forEach(function(t){var i=n[t.bitrate];void 0===i?(t.url=[t.url],n[t.bitrate]=t,e.push(t)):i.url.push(t.url)}),e.sort(function(t,e){return t.bitrate-e.bitrate}),e}},{key:"load",value:function(t,e){var n=-1,i=-1;this.levels.every(function(t,r){return!((i=t.url.indexOf(e))>=0&&(n=r,1))});var r=0===this.levels.length||n>=0;if(0===t.indexOf("#EXTM3U"))if(t.indexOf("#EXTINF:")>0){if(r){var o=this.parseLevelPlaylist(t,e,n,"main");if(0===this.levels.length){n=0,i=0;var s=this._postprocessLevels([{bitrate:0,url:e}]);this.levels=s,this.onManifestLoaded({levels:s,url:e})}o.targetduration?this.onLevelLoaded({details:o,level:n,id:i}):this.onError(new Error("invalid targetduration"))}}else{var a=this.parseMasterPlaylist(t,e),u=this._postprocessLevels(a);u.length?(this.levels=u,this.onManifestLoaded({levels:u,url:e})):this.onError(new Error("no level found in manifest"))}else this.onError(new Error("no EXTM3U delimiter"))}}]),t}();e.default=v,t.exports=e.default},function(t,e,n){!function(e){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=this.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):e;var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=i.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var f=a.path,h=f.substring(0,f.lastIndexOf("/")+1)+o.path;c.path=s.normalizePath(h)}else c.path=a.path,o.params||(c.params=a.params,o.query||(c.query=a.query));return null===c.path&&(c.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(c)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=s}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=/^(\d+)x(\d+)$/,s=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function t(e){i(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])}return r(t,[{key:"decimalInteger",value:function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"hexadecimalInteger",value:function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)n[i]=parseInt(e.slice(2*i,2*i+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"decimalFloatingPoint",value:function(t){return parseFloat(this[t])}},{key:"enumeratedString",value:function(t){return this[t]}},{key:"decimalResolution",value:function(t){var e=o.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}}],[{key:"parseAttrList",value:function(t){var e,n={};for(s.lastIndex=0;null!==(e=s.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[e[1]]=i}return n}}]),t}();e.default=a,t.exports=e.default}])}()}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),o=i(r),s=n(68),a=i(s),u=n(12),c=i(u),f=n(13),h=i(f),l=n(43),d=i(l),p=n(44),v=i(p),g=function(){function t(e){(0,c.default)(this,t),this._manifest=e,this._initSegmentMap(),this._initTrackList()}return(0,h.default)(t,[{key:"_initTrackList",value:function(){this._trackList=[],this._trackByUrl=new a.default;for(var t=0;t<this._manifest.levels.length;t++){for(var e=this._manifest.levels[t],n=0;n<e.url.length;n++){var i=e.url[n],r=new v.default({level:t,urlId:n,bitrate:e.bitrate});this._trackList.push(r),this._trackByUrl.set(i,r)}this.updateLevel(t,0)}}},{key:"_initSegmentMap",value:function(){this._segmentListByTrack=new a.default,this._segmentViewsByFragUrlByTrack=new a.default}},{key:"_updateOverlappingLevelDetails",value:function(t,e){var n=t.fragments,i=e.fragments;if(0===n.length||0===i.length)return!1;var r=e.startSN-t.startSN;if(r>=0&&r<n.length){for(var o=n[r].start-i[0].start,s=0;s<i.length;s++)i[s].start+=o;return!0}return!1}},{key:"_mergeLevelDetails",value:function(t,e){if(!e.live)return e;if(0===e.fragments.length)return t||e;if(t&&this._updateOverlappingLevelDetails(t,e))return e;var n=!0,i=!1,r=void 0;try{for(var s,a=(0,o.default)(this._manifest.levels);!(n=(s=a.next()).done);n=!0){var u=s.value;if(u.details&&u.details!==t&&u.details.fragments.length>0&&this._updateOverlappingLevelDetails(u.details,e))return e}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}var c=null,f=0,h=!0,l=!1,d=void 0;try{for(var p,v=(0,o.default)(this._manifest.levels);!(h=(p=v.next()).done);h=!0){var g=p.value;if(g.details&&g.details.fragments.length>0){var y=void 0;y=e.startSN>g.details.startSN?e.startSN-(g.details.startSN+g.details.fragments.length-1):g.details.startSN-(e.startSN+e.fragments.length-1),(!c||y<f)&&(c=g.details,f=y)}}}catch(t){l=!0,d=t}finally{try{!h&&v.return&&v.return()}finally{if(l)throw d}}if(!c)return e;var m=e.fragments,E=c.fragments,_=void 0;if(e.startSN>c.startSN){var T=E[E.length-1],b=e.startSN-(c.startSN+E.length-1);_=T.start+b*T.duration-m[0].start}else{var w=c.fragments[0],S=e.startSN+m.length-1-c.startSN;_=w.start+S*w.duration-m[m.length-1].start}for(var A=0;A<m.length;A++)m[A].start+=_;return e}},{key:"updateLevel",value:function(t,e,n){if(t>this._manifest.levels.length)throw new Error("level does not exist");var i=this._manifest.levels[t];if(n&&n!==i.details&&(i.details=this._mergeLevelDetails(i.details,n)),i.details){var r=i.details.fragments,o=this.getTrackViewByUrl(i.url[e]);if(!o)throw new Error("trackView not found");for(var s=[],u=new a.default,c=0;c<r.length;c++){var f=r[c],h=new d.default({sn:f.sn,trackView:o,time:f.start,duration:f.duration});s.push(h),u.set(f.url,h)}var l=o.viewToString();this._segmentListByTrack.set(l,s),this._segmentViewsByFragUrlByTrack.set(l,u)}}},{key:"getTrackViewByUrl",value:function(t){return this._trackByUrl.has(t)?this._trackByUrl.get(t):null}},{key:"getSegmentViewByUrl",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,s=(0,o.default)(this._segmentViewsByFragUrlByTrack.values());!(e=(r=s.next()).done);e=!0){var a=r.value;if(a.has(t))return a.get(t)}}catch(t){n=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw i}}return null}},{key:"getSegmentTime",value:function(t){if(void 0===t.time)throw new Error("getSegmentTime: segmentView.time is undefined");return t.time}},{key:"getSegmentList",value:function(t,e,n){if(t.level>this._manifest.levels.length)throw new Error("getSegmentList: level does not exist");var i=[],r=t.viewToString(),o=this._segmentListByTrack.get(r);if(o)for(var s=0;s<o.length;s++){var a=o[s];e<=a.time&&a.time<=e+n&&i.push(a)}return i}},{key:"getTrackList",value:function(){return this._trackList}},{key:"getSegmentDuration",value:function(t){if(void 0===t.duration)throw new Error("getSegmentDuration: segmentView.duration is undefined");return t.duration}},{key:"isLive",value:function(){if(this._manifest.levels){var t=!0,e=!1,n=void 0;try{for(var i,r=(0,o.default)(this._manifest.levels);!(t=(i=r.next()).done);t=!0){var s=i.value;if(s.details)return!!s.details.live}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}}return!1}},{key:"manifestUrl",get:function(){return this._manifest.url}}]),t}();e.default=g,t.exports=e.default},function(t,e,n){n(16),n(26),t.exports=n(67)},function(t,e,n){"use strict";var i=n(55),r=n(32),o=n(9),s=n(17);t.exports=n(20)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(5)},function(t,e,n){"use strict";var i=n(34),r=n(30),o=n(25),s={};n(5)(s,n(0)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(2),r=n(8),o=n(60);t.exports=n(3)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var i=n(61),r=n(36);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(11),r=n(17),o=n(62)(!1),s=n(23)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(17),r=n(21),o=n(63);t.exports=function(t){return function(e,n,s){var a,u=i(e),c=r(u.length),f=o(s,c);if(t&&n!=n){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var i=n(22),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(1).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(11),r=n(37),o=n(23)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(22),r=n(19);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},function(t,e,n){var i=n(8),r=n(38);t.exports=n(4).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){t.exports={default:n(69),__esModule:!0}},function(t,e,n){n(70),n(26),n(16),n(71),n(81),n(84),n(86),t.exports=n(4).Map},function(t,e){},function(t,e,n){"use strict";var i=n(72),r=n(42);t.exports=n(76)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(2).f,r=n(34),o=n(39),s=n(10),a=n(40),u=n(15),c=n(20),f=n(32),h=n(75),l=n(3),d=n(41).fastKey,p=n(42),v=l?"_s":"size",g=function(t,e){var n,i=d(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var f=t(function(t,i){a(t,f,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=i&&u(i,n,t[c],t)});return o(f.prototype,{clear:function(){for(var t=p(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=p(this,e),i=g(n,t);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[v]--}return!!i},forEach:function(t){p(this,e);for(var n,i=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(p(this,e),t)}}),l&&i(f.prototype,"size",{get:function(){return p(this,e)[v]}}),f},def:function(t,e,n){var i,r,o=g(t,e);return o?o.v=n:(t._l=o={i:r=d(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[v]++,"F"!==r&&(t._i[r]=o)),t},getEntry:g,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){var i=n(8);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(9),r=n(0)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){"use strict";var i=n(1),r=n(4),o=n(2),s=n(3),a=n(0)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(1),r=n(7),o=n(41),s=n(14),a=n(5),u=n(39),c=n(15),f=n(40),h=n(6),l=n(25),d=n(2).f,p=n(77)(0),v=n(3);t.exports=function(t,e,n,g,y,m){var E=i[t],_=E,T=y?"set":"add",b=_&&_.prototype,w={};return v&&"function"==typeof _&&(m||b.forEach&&!s(function(){(new _).entries().next()}))?(_=e(function(e,n){f(e,_,t,"_c"),e._c=new E,void 0!=n&&c(n,y,e[T],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in b&&(!m||"clear"!=t)&&a(_.prototype,t,function(n,i){if(f(this,_,t),!e&&m&&!h(n))return"get"==t&&void 0;var r=this._c[t](0===n?0:n,i);return e?this:r})}),m||d(_.prototype,"size",{get:function(){return this._c.size}})):(_=g.getConstructor(e,t,y,T),u(_.prototype,n),o.NEED=!0),l(_,t),w[t]=_,r(r.G+r.W+r.F,w),m||g.setStrong(_,t,y),_}},function(t,e,n){var i=n(10),r=n(33),o=n(37),s=n(21),a=n(78);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,f=4==t,h=6==t,l=5==t||h,d=e||a;return function(e,a,p){for(var v,g,y=o(e),m=r(y),E=i(a,p,3),_=s(m.length),T=0,b=n?d(e,_):u?d(e,0):void 0;_>T;T++)if((l||T in m)&&(v=m[T],g=E(v,T,y),t))if(n)b[T]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return T;case 2:b.push(v)}else if(f)return!1;return h?-1:c||f?f:b}}},function(t,e,n){var i=n(79);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(6),r=n(80),o=n(0)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(18);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(7);i(i.P+i.R,"Map",{toJSON:n(82)("Map")})},function(t,e,n){var i=n(27),r=n(83);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(15);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){n(85)("Map")},function(t,e,n){"use strict";var i=n(7);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(87)("Map")},function(t,e,n){"use strict";var i=n(7),r=n(28),o=n(10),s=n(15);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,a,u=arguments[1];return r(this),e=void 0!==u,e&&r(u),void 0==t?new this:(n=[],e?(i=0,a=o(u,arguments[2],2),s(t,!1,function(t){n.push(a(t,i++))})):s(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(89),o=i(r),s=n(31),a=i(s);e.default=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=(0,a.default)(t);!(i=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={default:n(90),__esModule:!0}},function(t,e,n){n(16),n(26),t.exports=n(91)},function(t,e,n){var i=n(27),r=n(0)("iterator"),o=n(9);t.exports=n(4).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(i(e))}}])}()}()},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(24)("meta"),r=n(8),o=n(11),s=n(6).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(14)(function(){return u(Object.preventExtensions({}))}),f=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[i].i},l=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[i].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,i)&&f(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:l,onFreeze:d}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=(0,r.default)({MANIFEST:"manifest",MEDIA_SEGMENT:"mediaSegment",INIT_SEGMENT:"initSegment",OTHER:"other"}),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=(0,r.default)({ARRAY_BUFFER:"arraybuffer",TEXT:"text"}),t.exports=e.default},function(t,e,n){var i=n(11),r=n(12),o=n(103)(!1),s=n(32)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(19);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(54),o=i(r),s=n(1),a=i(s),u=n(5),c=i(u),f=n(115),h=i(f),l=n(44),d=(i(l),n(82)),p=(i(d),n(81)),v=function(){function t(e){(0,a.default)(this,t),this._config=e,this._options={responseType:e.responseType,validStatusCodes:[].concat((0,o.default)((0,p.range)(200,206)),[304]),timeout:0,retry:0,retryDelay:0,withCredentials:e.withCredentials||!1,headers:e.headers||{},events:{onprogress:this._onProgress.bind(this)}},this._startTimestamp=0,this._firstByteTimestamp=null,this._latency=0}return(0,c.default)(t,[{key:"fetch",value:function(t){var e=this;this._callbacks=t,this._startTimestamp=Date.now();var n=new h.default(h.default.Methods.GET,this._config.url,this._options);return n.send().then(function(n){e._computeLatency();var i=n instanceof ArrayBuffer?n.byteLength:n.length,r={timeElapsed:Date.now()-e._startTimestamp,latency:e._latency,lengthComputable:!0,loaded:i,total:i};t.onSuccess(e._config,n,r)},function(n){if(t.onError){var i={status:n.status,message:n.message};t.onError(e._config,i)}}),n}},{key:"_onProgress",value:function(t){if(this._config&&this._callbacks){var e=this._config,n=this._callbacks;this._computeLatency();var i={timeElapsed:Date.now()-this._startTimestamp,latency:this._latency,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total};n.onProgress&&n.onProgress(e,i)}}},{key:"_computeLatency",value:function(){null===this._firstByteTimestamp&&(this._firstByteTimestamp=Date.now(),this._latency=this._firstByteTimestamp-this._startTimestamp)}}]),t}();e.default=v,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(108),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},function(t,e,n){"use strict";var i=n(25),r=n(4),o=n(56),s=n(10),a=n(11),u=n(21),c=n(111),f=n(26),h=n(58),l=n(3)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,g,y,m){c(n,e,v);var E,_,T,b=function(t){if(!d&&t in R)return R[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==g,A=!1,R=t.prototype,L=R[l]||R["@@iterator"]||g&&R[g],O=L||b(g),I=g?S?b("entries"):O:void 0,C="Array"==e?R.entries||L:L;if(C&&(T=h(C.call(new t)))!==Object.prototype&&T.next&&(f(T,w,!0),i||a(T,l)||s(T,l,p)),S&&L&&"values"!==L.name&&(A=!0,O=function(){return L.call(this)}),i&&!m||!d&&!A&&R[l]||s(R,l,O),u[e]=O,u[w]=p,g)if(E={values:S?O:b("values"),keys:y?O:b("keys"),entries:I},m)for(_ in E)_ in R||o(R,_,E[_]);else r(r.P+r.F*(d||A),e,E);return E}},function(t,e,n){t.exports=n(10)},function(t,e,n){var i=n(2).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(11),r=n(22),o=n(32)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(7);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(21),r=n(3)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(62),r=n(3)("iterator"),o=n(21);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(19),r=n(3)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(3)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(t){}return n}},function(t,e,n){t.exports={default:n(117),__esModule:!0}},function(t,e){},function(t,e,n){n(118);for(var i=n(2),r=n(10),o=n(21),s=n(3)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],f=i[c],h=f&&f.prototype;h&&!h[s]&&r(h,s,c),o[c]=o.Array}},function(t,e,n){var i=n(7),r=n(23),o=n(3)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},function(t,e,n){var i,r,o,s=n(13),a=n(124),u=n(57),c=n(27),f=n(2),h=f.process,l=f.setImmediate,d=f.clearImmediate,p=f.MessageChannel,v=f.Dispatch,g=0,y={},m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},E=function(t){m.call(t.data)};l&&d||(l=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++g]=function(){a("function"==typeof t?t:Function(t),e)},i(g),g},d=function(t){delete y[t]},"process"==n(19)(h)?i=function(t){h.nextTick(s(m,t,1))}:v&&v.now?i=function(t){v.now(s(m,t,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=E,i=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(i=function(t){f.postMessage(t+"","*")},f.addEventListener("message",E,!1)):i="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:l,clear:d}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(7),r=n(8),o=n(37);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){t.exports={default:n(130),__esModule:!0}},function(t,e,n){t.exports={default:n(132),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(38),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){var i=n(12),r=n(75).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(i(t))}},function(t,e,n){var i=n(51),r=n(34).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(20),r=n(17),o=n(12),s=n(28),a=n(11),u=n(45),c=Object.getOwnPropertyDescriptor;e.f=n(9)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(143),o=i(r),s=n(147),a=i(s),u=n(38),c=i(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,c.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TIMER_TYPE=e.AbstractTimer=void 0;var r=n(1),o=i(r),s=n(5),a=i(s),u=n(151),c=i(u),f={TIMEOUT:0,INTERVAL:1},h=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.TIMEOUT;(0,o.default)(this,t),this._id="timer-"+c.default.v4(),this._name=this._id,this._callback=e,this._time=n,this._type=i,this._isRepeatable=i===f.INTERVAL}return(0,a.default)(t,[{key:"clear",value:function(){throw new Error("Cannot call abstract method")}},{key:"id",get:function(){return this._id}},{key:"name",set:function(t){this._name=t},get:function(){return this._name}}]),t}();e.AbstractTimer=h,e.TIMER_TYPE=f},function(t,e,n){(function(e){var n,i=e.crypto||e.msCrypto;if(i&&i.getRandomValues){var r=new Uint8Array(16);n=function(){return i.getRandomValues(r),r}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=n}).call(e,n(47))},function(t,e){function n(t,e){var n=e||0,r=i;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=n},function(t,e,n){"use strict";function i(t,e){return parseFloat(t.toFixed(e))}function r(t,e){for(var n=[],i=e>=t?1:-1,r=Math.min(t*i,e*i),o=Math.max(t*i,e*i),s=r;s<=o;s++)n.push(s*i);return n}function o(t,e,n){return Math.min(Math.max(t,e),n)}Object.defineProperty(e,"__esModule",{value:!0}),e.toDecimal=i,e.range=r,e.clamp=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(5),a=i(s),u=function(){function t(e,n,i){(0,o.default)(this,t),this._lengthComputable=e,this._loaded=n,this._total=i}return(0,a.default)(t,[{key:"lengthComputable",get:function(){return this._lengthComputable}},{key:"loaded",get:function(){return this._loaded}},{key:"total",get:function(){return this._total}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function t(e){if((0,r.default)(this,t),e=e||{},e.id&&"string"!=typeof e.id)throw new TypeError("InitOptionals.id should be a string");if(e.contentIdGenerator&&"function"!=typeof e.contentIdGenerator)throw new TypeError("InitOptionals.contentIdGenerator should be a function");if(e.streamrootLibraryLocation&&"string"!=typeof e.streamrootLibraryLocation)throw new TypeError("InitOptionals.streamrootLibraryLocation should be a string");if(e.wrapperVersion&&"string"!=typeof e.wrapperVersion)throw new TypeError("InitOptionals.wrapperVersion should be a string");if(e.backendUrl&&"string"!=typeof e.backendUrl)throw new TypeError("InitOptionals.backendUrl should be a string");this.id=e.id,this.contentIdGenerator=e.contentIdGenerator||null,this.streamrootLibraryLocation=e.streamrootLibraryLocation||null,this.wrapperVersion=e.wrapperVersion?e.wrapperVersion.substring(0,15):"",this.backendUrl=e.backendUrl||null};e.default=o,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function t(e){if((0,r.default)(this,t),e=e||{},e.contentId){if("string"!=typeof e.contentId)throw new TypeError("LoadOptionals.contentId should be a string");this.contentId=e.contentId}void 0!==e.rangeRequestDisabled&&(this.rangeRequestDisabled=!!e.rangeRequestDisabled),void 0!==e.activateP2P&&(this.activateP2P=!!e.activateP2P),void 0!==e.mobileBrowserEnabled&&(this.mobileBrowserEnabled=!!e.mobileBrowserEnabled)};e.default=o,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){function n(){t.apply(this,e)}return n.prototype=t.prototype,new n}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),s=i(o),a=n(86),u=i(a),c=function t(){(0,s.default)(this,t);var e=r(u.default,arguments);this.load=e.load.bind(e),this.fetch=e.fetch.bind(e),this.stop=e.stop.bind(e),this.destroy=e.destroy.bind(e),this.attachMediaElement=e.attachMediaElement.bind(e),this.detachMediaElement=e.detachMediaElement.bind(e),Object.defineProperty(this,"abr",{get:function(){return e.abr}}),Object.defineProperty(this,"version",{get:function(){return e.version}})};c.StreamTypes=u.default.StreamTypes,c.ContentTypes=u.default.ContentTypes,c.ResponseTypes=u.default.ResponseTypes,c.Events=u.default.Events,c.Errors=u.default.Errors,e.default=c,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(5),a=i(s),u=n(90),c=i(u),f=n(46),h=i(f),l=n(92),d=i(l),p=n(95),v=i(p),g=n(49),y=i(g),m=n(50),E=i(m),_=n(98),T=n(105),b=i(T),w=n(106),S=i(w),A=n(107),R=i(A),L=n(170),O=i(L),I=n(83),C=i(I),D=n(84),P=i(D),M=n(171),N=i(M),x=n(172),k=i(x),U=n(53),F=i(U),B=n(173),G=n(175),j=i(G),H=function(){function t(e,n,i){(0,o.default)(this,t),this._peerAgentCounter=0,this._mediaMap=null,this._loaded=!1,this._streamrootKey=e,this._playerInterface=n,this._initOptions=new C.default(i),this._manifestCache=new R.default,this._manifestCache.onMediaMapCreated=this._onMediaMapCreated.bind(this),this._onTrackSwitchCallback=this._onTrackSwitch.bind(this),this._onEmergencyTrackSwitchCallback=this._onEmergencyTrackSwitch.bind(this),this._onPlaybackErrorCallback=this._onPlaybackError.bind(this),this._playerInterface.on(b.default.TRACK_SWITCH,this._onTrackSwitchCallback),this._playerInterface.on(b.default.EMERGENCY_TRACK_SWITCH,this._onEmergencyTrackSwitchCallback),this._playerInterface.on(b.default.PLAYBACK_ERROR,this._onPlaybackErrorCallback),this._abrInterfaceContructor=(0,B.abrInterfaceGenerator)(this)}return(0,a.default)(t,[{key:"load",value:function(t,e,n){this._loaded&&this.stop(),this._contentUrl=t,this._streamType=e,this._loadOptions=new P.default(n),this._contentId=this._generateContentId(t),this._loaded=!0}},{key:"fetch",value:function(t,e){if((0,_.assertContentAndResponseType)(t),this._loaded){if(t.contentType===y.default.MANIFEST)return this._manifestCache.fetchManifest(t,e);if(t.contentType===y.default.MEDIA_SEGMENT&&this._peerAgent&&this._mediaMap){var n=this._mediaMap.getSegmentViewByUrl(t.url);if(n){var i=new k.default(t,e);return this._peerAgent.getSegment(t,i,n)}}return new F.default(t).fetch(e)}return new F.default(t).fetch(e)}},{key:"attachMediaElement",value:function(t){this._mediaElement=t,this._peerAgent&&(this._peerAgent.mediaElement=t)}},{key:"detachMediaElement",value:function(){this._mediaElement=null,this._peerAgent&&(this._peerAgent.mediaElement=null)}},{key:"_disposePeerAgent",value:function(){this._peerAgent&&(this._peerAgent.dispose(),this._peerAgent=null)}},{key:"stop",value:function(){this._disposePeerAgent(),this._mediaMap=null,this._loaded=!1}},{key:"destroy",value:function(){this._loaded&&this.stop(),this._playerInterface.removeListener(b.default.TRACK_SWITCH,this._onTrackSwitchCallback),this._playerInterface.removeListener(b.default.EMERGENCY_TRACK_SWITCH,this._onEmergencyTrackSwitchCallback),this._playerInterface.removeListener(b.default.PLAYBACK_ERROR,this._onPlaybackErrorCallback)}},{key:"_onMediaMapCreated",value:function(t){if(this._mediaMap){if(this._mediaMap.manifestUrl!==t.manifestUrl)return void this.stop();this._disposePeerAgent(),this._mediaMap=null}this._loaded&&(this._mediaMap=t,this._createPeerAgent())}},{key:"_onTrackSwitch",value:function(t){if(this._mediaMap&&this._streamType===v.default.HLS){var e=this._mediaMap.getTrackViewByUrl(t.levelUrl);e&&this._playerInterface.emit(b.default.TRACK_CHANGE_EVENT,{video:e})}}},{key:"_onEmergencyTrackSwitch",value:function(){this._playerInterface.emit(b.default.EMERGENCY_FRAG_LOAD_ABORT)}},{key:"_onPlaybackError",value:function(t){this._peerAgent&&this._peerAgent.onPlaybackError&&this._peerAgent.onPlaybackError(t)}},{key:"_generateContentId",value:function(t){return this._loadOptions&&this._loadOptions.contentId?this._loadOptions.contentId:this._initOptions&&this._initOptions.contentIdGenerator?this._initOptions.contentIdGenerator(t):this._defaultContentIdGenerator(t)}},{key:"_defaultContentIdGenerator",value:function(t){var e=new d.default(t);return e.host+e.pathname}},{key:"_createPeerAgent",value:function(){if(this._mediaMap){var t=new N.default(this._playerInterface,this._mediaMap),e=new O.default(this._streamrootKey,this._contentId,this._initOptions,this._loadOptions),n=new j.default(this._playerInterface,this._initOptions,this._peerAgentCounter);this._peerAgent=new c.default(t,this._contentUrl,this._mediaMap,e,f.SegmentView,this._streamType,h.default.integrationVersion,n),this._mediaElement&&(this._peerAgent.mediaElement=this._mediaElement),this._peerAgentCounter++}}},{key:"peerAgent",get:function(){return this._peerAgent}},{key:"abr",get:function(){return new this._abrInterfaceContructor}},{key:"version",get:function(){return{streamrooter:"0.1.0",peerAgent:this._peerAgent?this._peerAgent.version:void 0}}}]),t}();H.StreamTypes=v.default,H.ContentTypes=y.default,H.ResponseTypes=E.default,H.Events=b.default,H.Errors=S.default,e.default=H,t.exports=e.default},function(t,e,n){t.exports={default:n(88),__esModule:!0}},function(t,e,n){n(89);var i=n(0).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){var i=n(4);i(i.S+i.F*!n(9),"Object",{defineProperty:n(6).f})},function(t,e,n){"use strict";(function(t){function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s,a,u,c=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,i){"object"==h(e)&&"object"==h(t)?t.exports=i():(a=[],s=i,void 0!==(u="function"==typeof s?s.apply(e,a):s)&&(t.exports=u))}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={t:i,i:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.i=!0,r.exports}var n={};return e.s=t,e.c=n,e.t=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{u:!1,l:!0,get:i})},e.n=function(t){var n=t&&t._?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.v=133)}([function(t,e,n){e.a={m:{T:"chunkDownloaded"},S:{A:"configUpdated"},R:{C:"distributorAnswered",D:"distributorTimedOut"},N:{I:"metricsTrackSwitch"},O:{ENDED:"mediaEnded"},L:{P:"schedulerReachedLiveEdgeStateChanged"},k:{U:"srModuleInterfaceAbrFeedback",B:"srmoduleinterfaceUncompleteSegmentRequested",F:"segmentTransferedToMediaEngine"},G:{H:"peerpoolPeerOpen",j:"peerpoolPeerDestroyed",V:"peerPoolStat",K:"startAskingPeers",W:"stopAskingPeers"},$:{Y:"buffermanagerLowBuffer",q:"buffermanagerHighBuffer",X:"buffermanagerStateChanged"},Z:{J:"peerConnectionDisconnected",tt:"peerConnectionMessageReceived",it:"peerConnectionBinaryDataReceived"},st:{et:"PeerDisconnected"},nt:{rt:"chunkRequested"},ot:{ht:"removeSegmentFromCache",ct:"attemptedGCTrackEdgeFromCache"},at:{ut:"bufferCheck"},ft:{lt:"permTrackerDisconnectionRequest",dt:"tempTrackerDisconnectionRequest",Et:"trackerReconnectionRequest",wt:"trackerReady",_t:"trackerFailed",pt:"trackerBlocked"},vt:{gt:"stopSendingUsage",Tt:"restartSendingUsage"},St:{At:"permSignalingDisconnectionRequest",Rt:"tempSignalingDisconnectionRequest",Ct:"signalingReconnectionRequest"},Dt:{bt:"segmentFillerSuccess",yt:"segmentFillerFallback"}}},function(t,e,n){e.a=function(t,e){return new r(t,e,i.a.Nt)},e.b=function(t,e){return new r(t,e,i.a.TIMEOUT)};var i=n(99),r=void 0;r=n(252).default},function(t,e,n){t.exports=n(147).default},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(7),r=n(3),o=n(14),s=n(19),a="prototype",u=function t(e,n,u){var c,f,h,l=e&t.It,d=e&t.Ot,p=e&t.Lt,v=e&t.Pt,g=e&t.Mt,y=e&t.kt,m=d?r:r[n]||(r[n]={}),E=m[a],_=d?i:p?i[n]:(i[n]||{})[a];d&&(u=n);for(c in u)(f=!l&&_&&void 0!==_[c])&&c in m||(h=f?_[c]:u[c],m[c]=d&&"function"!=typeof _[c]?u[c]:g&&f?o(h,i):y&&_[c]==h?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[a]=t[a],e}(h):v&&"function"==typeof h?o(Function.call,h):h,v&&((m.Ut||(m.Ut={}))[c]=h,e&t.Bt&&E&&!E[c]&&s(E,c,h)))};u.It=1,u.Ot=2,u.Lt=4,u.Pt=8,u.Mt=16,u.kt=32,u.Ft=64,u.Bt=128,t.exports=u},function(t,e,n){t.exports={default:n(263),_:!0}},function(t,e,n){t.exports={default:n(270),_:!0}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==(void 0===t?"undefined":h(t))?null!==t:"function"==typeof t}},function(t,e,n){var i=n(124)("wks"),r=n(72),o=n(7).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).Gt=i},function(t,e,n){t.exports={default:n(265),_:!0}},function(t,e,n){function i(){}function r(t,e,n){this.Ht=t,this.context=e,this.xt=n||!1}function o(){this.jt=new i,this.Vt=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),o.prototype.Kt=function(){var t,e,n=[];if(0===this.Vt)return n;for(e in t=this.jt)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.Wt=function(t,e){var n=a?a+t:t,i=this.jt[n];if(e)return!!i;if(!i)return[];if(i.Ht)return[i.Ht];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].Ht;return s},o.prototype.$t=function(t,e,n,i,r,o){var s=a?a+t:t;if(!this.jt[s])return!1;var u,c,f=this.jt[s],h=arguments.length;if(f.Ht){switch(f.xt&&this.removeListener(t,f.Ht,void 0,!0),h){case 1:return f.Ht.call(f.context),!0;case 2:return f.Ht.call(f.context,e),!0;case 3:return f.Ht.call(f.context,e,n),!0;case 4:return f.Ht.call(f.context,e,n,i),!0;case 5:return f.Ht.call(f.context,e,n,i,r),!0;case 6:return f.Ht.call(f.context,e,n,i,r,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];f.Ht.apply(f.context,u)}else{var l,d=f.length;for(c=0;c<d;c++)switch(f[c].xt&&this.removeListener(t,f[c].Ht,void 0,!0),h){case 1:f[c].Ht.call(f[c].context);break;case 2:f[c].Ht.call(f[c].context,e);break;case 3:f[c].Ht.call(f[c].context,e,n);break;case 4:f[c].Ht.call(f[c].context,e,n,i);break;default:if(!u)for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];f[c].Ht.apply(f[c].context,u)}}return!0},o.prototype.Yt=function(t,e,n){var i=new r(e,n||this),o=a?a+t:t;return this.jt[o]?this.jt[o].Ht?this.jt[o]=[this.jt[o],i]:this.jt[o].push(i):(this.jt[o]=i,this.Vt++),this},o.prototype.xt=function(t,e,n){var i=new r(e,n||this,!0),o=a?a+t:t;return this.jt[o]?this.jt[o].Ht?this.jt[o]=[this.jt[o],i]:this.jt[o].push(i):(this.jt[o]=i,this.Vt++),this},o.prototype.removeListener=function(t,e,n,r){var o=a?a+t:t;if(!this.jt[o])return this;if(!e)return 0==--this.Vt?this.jt=new i:delete this.jt[o],this;var s=this.jt[o];if(s.Ht)s.Ht!==e||r&&!s.xt||n&&s.context!==n||(0==--this.Vt?this.jt=new i:delete this.jt[o]);else{for(var u=0,c=[],f=s.length;u<f;u++)(s[u].Ht!==e||r&&!s[u].xt||n&&s[u].context!==n)&&c.push(s[u]);c.length?this.jt[o]=1===c.length?c[0]:c:0==--this.Vt?this.jt=new i:delete this.jt[o]}return this},o.prototype.qt=function(t){var e;return t?(e=a?a+t:t,this.jt[e]&&(0==--this.Vt?this.jt=new i:delete this.jt[e])):(this.jt=new i,this.Vt=0),this},o.prototype.zt=o.prototype.removeListener,o.prototype.addListener=o.prototype.Yt,o.prototype.Xt=function(){return this},o.Qt=a,o.Zt=o,t.exports=o},function(t,e,n){function i(t){return"number"==typeof t&&!isNaN(t)}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o(this,t),this.Jt=e}return t.prototype.ti=function(t){var e=t-this.Jt;return this.Jt=t,e},t.prototype.ii=function(t){this.Jt=t},f(t,[{key:"si",get:function(){return this.Jt}}]),t}()},function(t,e,n){var i=n(8);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(30);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){t.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(13),r=n(289),o=n(306),s=Object.defineProperty;e.f=n(15)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){function i(t,e){return parseFloat(t.toFixed(e))}function r(t,e){for(var n=[],i=e>=t?1:-1,r=Math.min(t*i,e*i),o=Math.max(t*i,e*i),s=r;s<=o;s++)n.push(s*i);return n}function o(t,e,n){return Math.min(Math.max(t,e),n)}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return o})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(16),r=n(68);t.exports=n(15)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(5),r=n.n(i),s=n(10),a=n.n(s),u=n(2),c=n.n(u),f=function(){function t(){o(this,t),this.ei=new a.a}return t.prototype.register=function(t){var e=t.name;return!this.ei.has(e)&&(this.ei.set(e,t),!0)},t.prototype.ni=function(t,e){return!this.ei.has(t)&&(e.name=t,this.ei.set(t,e),!0)},t.prototype.clear=function(t){return!!t&&this.ri(t.name)},t.prototype.ri=function(t){var e=this.ei.get(t);return!!e&&(e.clear(),this.ei.delete(e.name))},t.prototype.oi=function(){var t=!0,e=!1,n=void 0;try{for(var i,o=r()(this.ei.values());!(t=(i=o.next()).done);t=!0){var s=i.value;this.clear(s)||c.a.hi("Cannot remove timer","Timer "+s.id+" was not found in timers map.")}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}},t}();e.a=f},function(t,e,n){t.exports={default:n(268),_:!0}},function(t,e,n){var i=n(4),r=n(3),o=n(18);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.Lt+i.It*o(function(){n(1)}),"Object",s)}},function(t,e,n){var i=n(44);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i="Unvalid weight parameter for EMWA: must be an number in ]0,1[",r=function(){function t(e,n){if(o(this,t),n<=0||n>=1)throw new Error(i);this.ci=e,this.ai=n}return t.prototype.update=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null!==e?e:this.ai;this.ci=(1-n)*this.ci+n*t},t.ui=function(){return{fi:i}},t.li=function(e,n,i){return new t(e,this.di(n,i))},t.di=function(t,e){var n=t/e;return 1-1/Math.pow(2,1/n)},f(t,[{key:"value",get:function(){return this.ci}}]),t}();e.a=r},function(t,e,n){n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var i=n(260),r=n.n(i),o=n(42),s={HLS:"hls",DASH:"dash",SMOOTH:"smooth"};n.n(o)()(s);var a=function(t){if(-1===r()(s).indexOf(t))throw new TypeError("'"+t+"' is not a valid value for stream type.")}},function(t,e,n){e.a={Ei:"safe",wi:"unsafe"}},function(t,e,n){function i(){var t=window&&window.navigator?window.navigator.userAgent:"";return(new o.a).pi(t)._i()}var r=n(337),o=n.n(r);e.a={vi:i,mi:function(){var t=i();return"mobile"===t.gi.type||"tablet"===t.gi.type||"console"===t.gi.type||"Android"===t.Ti.name||"iOS"===t.Ti.name}}},function(t,e,n){t.exports={default:n(262),_:!0}},function(t,e,n){t.exports={default:n(264),_:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(14),r=n(110),o=n(109),s=n(13),a=n(48),u=n(74),c={},f={};(e=t.exports=function(t,e,n,h,l){var d,p,v,g,y=l?function(){return t}:u(t),m=i(n,h,e?2:1),E=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=a(t.length);d>E;E++)if((g=e?m(s(p=t[E])[0],p[1]):m(t[E]))===c||g===f)return g}else for(v=y.call(t);!(p=v.next()).done;)if((g=r(v,m,p.value,e))===c||g===f)return g}).Si=c,e.Ai=f},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){var i=n(65),r=n(44);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(303)(!0);n(66)(String,"String",function(t){this.Ri=String(t),this.Ci=0},function(){var t,e=this.Ri,n=this.Ci;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this.Ci+=t.length,{value:t,done:!1})})},function(t,e,n){t.exports=n(149).default},function(t,e,n){var s=n(86),a=n(207),u=function(t){function e(n,r,s){var a;return o(this,e),(a=i(this,t.call(this,n,r,s))).Di(),a}return r(e,t),e.prototype.Di=function(){this.bi={cdnDownloaded:0,cdnDuration:0,p2pDownloaded:0,p2pDuration:0}},e.prototype.yi=function(){var t=this,e={result:function(e,n){e?t.Ni(e):t.Ii(n)},Oi:this.Li.onProgress},n=this.Pi(),i=new a.a(this.Mi,this.ki,this.bi,e,n);this.Ui=i.send()},e.prototype.Pi=function(){},e.prototype.Ni=function(t){this.Bi(t)},e.prototype.Ii=function(t){this.Fi(t)},e.prototype.Gi=function(){t.prototype.Gi.call(this),this.Ui.abort()},e}(s.a);e.a=u},function(t,e,n){e.a=function(){}},function(t,e,n){function i(t,e){var n=t.prototype,i=!0,o=!1,s=void 0;try{for(var a,u=f()(r(n));!(i=(a=u.next()).done);i=!0){var c=a.value;if(h(e[c])!=h(n[c])){var l=e.constructor.name;throw new Error("The method "+c+" of "+t.name+" is not defined in "+l)}}}catch(t){o=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}}function r(t){var e=u()(t).filter(function(t){return"constructor"!==t}),n=Object.prototype;if(s()(t)===n)return e;var i=s()(t);return e.concat(r(i))}n.d(e,"a",function(){return i});var o=n(257),s=n.n(o),a=n(101),u=n.n(a),c=n(5),f=n.n(c)},function(t,e,n){function i(t){p()(t);for(var e=l()(t),n=0;n<e.length;n++){var r=t[e[n]];null===r||"object"!=(void 0===r?"undefined":h(r))||c()(r)||i(r)}}var r=n(29),o=n.n(r),s=n(43),a=n.n(s),u=n(258),c=n.n(u),f=n(101),l=n.n(f),d=n(42),p=n.n(d),v=n(6),g=n.n(v);e.a={Hi:function(t,e){return g()(t,e)},xi:i,ji:function(t,e){for(var n={},i=a()(t),r=0;r<i.length;r++){var o=i[r];e!==o&&(n[o]=t[o])}return n},Vi:function(t){return JSON.parse(o()(t))}}},function(t,e,n){t.exports={default:n(272),_:!0}},function(t,e,n){t.exports={default:n(277),_:!0}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(72)("meta"),r=n(8),o=n(33),s=n(16).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),f=function(t){s(t,i,{value:{t:"O"+ ++a,w:{}}})},l=t.exports={Ki:i,Wi:!1,$i:function(t,e){if(!r(t))return"symbol"==(void 0===t?"undefined":h(t))?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[i].t},Yi:function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[i].w},qi:function(t){return c&&l.Wi&&u(t)&&!o(t,i)&&f(t),t}}},function(t,e,n){var i=n(117),r=n(64);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(16).f,r=n(33),o=n(9)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{u:!0,value:e})}},function(t,e,n){var i=n(71),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){n(309);for(var i=n(7),r=n(19),o=n(34),s=n(9)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],f=i[c],h=f&&f.prototype;h&&!h[s]&&r(h,s,c),o[c]=o.Array}},function(t,e,n){var i=n(29),r=n.n(i),s=n(6),a=n.n(s),u=n(138),c=n(251),f=function(){function t(e,n){o(this,t),this.Mi=e,this.zi=n}return t.prototype.send=function(t,e){var n=this.Mi,i=n.Xi,o=n.Qi,s=n.Zi,f=i.ANALYTICS.KLARA_URL;a()(t,{customer:i.ID_CLIENT,content:o.content,peerAgentVersion:"4.13.6",token:s,platform:c.a.get()});var h=r()(t),l=""+f+this.zi;e&&(l+="/"+e),u.a.send(l,h,this.Mi)},t}();e.a=f},function(t,e,n){var i="Method not implemented",r=function(){function t(){o(this,t)}return t.prototype.Ji=function(t){throw new Error(i)},t.prototype.ts=function(t,e,n){throw new Error(i)},t.prototype.ss=function(){throw new Error(i)},t.prototype.es=function(){throw new Error(i)},f(t,[{key:"ns",get:function(){throw new Error(i)}},{key:"rs",get:function(){throw new Error(i)}},{key:"byteLength",get:function(){throw new Error(i)}}]),t}();e.a=r},function(t,e,n){var i=n(129),r=n.n(i),s=n(11),a=n.n(s),u=n(183),c=n(228),h=n(225),l=n(224),d=n(223),p=n(227),v=n(226),g=n(222),y=n(91),m=n(77),E=n(166),_=n(237),T=n(41),b=n(198),w=n(0),S=n(248),A=n(250),R=n(241),L=n(254),O=function(){function t(e,i,s,f,w,L,O,I){o(this,t),this.os=Date.now(),this.hs=new S.a,this.cs=new S.a;var C=T.a.Vi(m.a);this.p2pConfig=e,n.t(A.a)(C,e,s),this.Xi=C;var D=n.t(R.a)({contentId:e.contentId,as:i});this.us=new a.a,this.fs=new _.a,this.Qi=new E.a(this,f,O),this.Qi.content=D,this.ls=!0,this.ds=!0,this.Zi=r.a.Es(),this.status=new u.a,this.ws=new y.a,this._s=new p.a(this.ws),this.ps=new c.a,this.vs=new h.a,this.ms=new l.a,this.gs=new v.a(f,w,L),this.Ts=new g.a(this.us),this.Ss=new d.a(this.us),this.As=new b.a(this.Xi,this.us),this.Rs=I}return t.prototype.ys=function(t){t.configuration&&(n.t(A.b)(this.Xi,t.configuration,t.isClustered),this.us.$t(w.a.S.A));var e=this.Xi.BACKEND_USE_SSL?"https":"http",i=this.Xi.BACKEND_USE_SSL?"wss":"ws";this.Xi.TRACKER_URL=n.t(L.a)(e+"://"+t.trackerDns),this.Xi.ANALYTICS.KLARA_URL=n.t(L.a)(e+"://"+t.klaraDns),this.Xi.SIGNALING_URL=n.t(L.a)(i+"://"+t.signalingDns),this.status.Ns(t.token),this.Is(),this.Xi.ENCODE_SDP||(this.Xi.P2P_PROTOCOL_VERSION+="-uncompressed"),this.Xi.CLUSTER_BY_PA_VERSION&&(this.Xi.P2P_PROTOCOL_VERSION+="-pa4.13.6"),this.Rs&&this.Xi.CLUSTER_BY_INTEGRATION_TAG&&(this.Xi.P2P_PROTOCOL_VERSION+="-w"+this.Rs.wrapperVersion+"-s"+this.Rs.streamrooterVersion),null!=t.contentActivated&&(this.Xi.CONTENT_ACTIVATED=t.contentActivated),null!=t.rampUpActivated&&(this.Xi.RAMP_UP_ACTIVATED=t.rampUpActivated)},t.prototype.Os=function(){var t=this.Xi.FALLBACK_URLS;this.Xi.ANALYTICS.KLARA_URL=n.t(L.a)(t.KLARA_URL),this.Is()},t.prototype.Is=function(){var t=this.Qi.isLive()?this.Xi.LIVE.QOS_REF_PERCENTAGE:this.Xi.QOS_REF_PERCENTAGE;t===parseFloat(t,3)&&100*Math.random()<t&&(this.Xi.QOS_P2P_DISABLED=!0);var e=100*Math.random();this.Xi.ANALYTICS.ENABLE_STATS_SENDER=e<=this.Xi.ANALYTICS.STATS_SENDER_PERCENTAGE,this.Xi.ANALYTICS.ENABLE_CONTROL_SENDER=e<=this.Xi.ANALYTICS.CONTROL_SENDER_PERCENTAGE},t.prototype.dispose=function(){this.Qi.dispose(),this.fs.dispose(),this.As.dispose(),this.gs.dispose()},f(t,[{key:"Cs",get:function(){return this.hs.Ds}},{key:"bs",get:function(){return this.cs.Ds}}]),t}();e.a=O},function(t,e,n){var i=function(){function t(){o(this,t)}return t.prototype.getSegmentTime=function(t){return 0},t.prototype.getSegmentList=function(t,e,n){return[]},t.prototype.getTrackList=function(){return[]},t}();e.a=i},function(t,e,n){var i=function(){function t(){o(this,t)}return t.fromArrayBuffer=function(e){return new t},t.prototype.isEqual=function(t){return!1},t.prototype.viewToString=function(){return""},t.prototype.toArrayBuffer=function(){return new ArrayBuffer(0)},t.prototype.isInTrack=function(t){return!1},t.prototype.getId=function(){return 0},t}();e.a=i},function(t,e,n){function s(t){var e=[],n=!0,i=!1,r=void 0;try{for(var o,s=d()(t.split(":"));!(n=(o=s.next()).done);n=!0){var a=o.value;e.push(h()(a,16))}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return v.a.Ls(new Uint8Array(e))}function a(t){var e=v.a.Ps(t),n="",i=!0,r=!1,o=void 0;try{for(var s,a=d()(e);!(i=(s=a.next()).done);i=!0){var u=s.value.toString(16).toUpperCase();u.length<2&&2!==("0"+u).length&&y.a.hi("Decoded illegal DTLS byte 0"+u+" from "+t),2!==u.length&&(u="0"+u[0]),0===n.length?n+=u:n+=":"+u}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}function u(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=d()(t.split("."));!(i=(s=a.next()).done);i=!0){var u=s.value;n.push(h()(u,10))}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n.push(Math.floor(e/256)),n.push(e%256),v.a.Ls(new Uint8Array(n))}function c(t){var e=v.a.Ps(t);return{Ms:e[0]+"."+e[1]+"."+e[2]+"."+e[3],port:256*e[4]+e[5]}}n.d(e,"d",function(){return m}),n.d(e,"c",function(){return E}),n.d(e,"e",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"f",function(){return u}),n.d(e,"h",function(){return c}),n.d(e,"b",function(){return T}),n.d(e,"a",function(){return b});var f=n(100),h=n.n(f),l=n(5),d=n.n(l),p=n(261),v=n.n(p),g=n(2),y=n.n(g),m=function(t){var e=Math.floor(t/256),n=t%256;return new Uint8Array([n,e])},E=function(t){var e=m(Math.floor(t/65536)),n=m(t%65536);return new Uint8Array([n[0],n[1],e[0],e[1]])},_=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;o(this,t),this.ks={value:e,Us:this.Bs(e,n,i,r,s)}}return t.prototype.Bs=function(t,e,n,i,r){if(t<1)return"0"+e+i;var o=["","K","M","G","T","P","E","Z","Y"],s=Math.min(Math.floor(Math.log(t)/Math.log(n)),o.length-1);return parseFloat((t/Math.pow(n,s)).toFixed(r))+o[s]+e+i},t.prototype.valueOf=function(){return this.ks.value},t.prototype.toString=function(){return this.ks.Us},t}(),T=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return o(this,e),i(this,t.call(this,n,"B",1e3,r,s))}return r(e,t),e}(_),b=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return o(this,e),i(this,t.call(this,n,"b",1e3,r,s))}return r(e,t),e}(_)},function(t,e,n){e.a=function(t){if(null===t)throw new Error("Panic! Attempted to unwrap null");if(void 0===t)throw new Error("Panic! Attempted to unwrap undefined");return t}},function(t,e,n){var i=function(){function t(e){o(this,t),this.Fs=e,this.Gs=[]}return t.prototype.push=function(t){this.Hs(),this.Gs.push({time:Date.now(),value:t})},t.prototype.Hs=function(){for(var t=Date.now();this.Gs.length>0&&t-this.Fs>=this.Gs[0].time;)this.Gs.shift()},t.prototype.js=function(t){if(this.Hs(),t>this.Fs)return null;for(var e=Date.now()-t,n=0;n<this.Gs.length&&this.Gs[n].time<=e;)n++;return n<this.Gs.length-1?this.Gs[this.Gs.length-1].value-this.Gs[n].value:null},t.prototype.Vs=function(t){if(this.Hs(),t>this.Fs)return null;for(var e=Date.now()-t,n=0;n<this.Gs.length&&this.Gs[n].time<=e;)n++;return n<this.Gs.length-1?this.Gs[this.Gs.length-1].time-this.Gs[n].time:null},f(t,[{key:"delta",get:function(){return this.Hs(),this.Gs.length>1?this.Gs[this.Gs.length-1].value-this.Gs[0].value:null}},{key:"xs",get:function(){return this.Hs(),this.Gs.length>1?this.Gs[this.Gs.length-1].time-this.Gs[0].time:null}}]),t}();e.a=i},function(t,e,n){var i=n(12),r=function(){function t(){o(this,t);var e=Date.now();this.Ks=0,this.Ws=0,this.$s=new i.b(e),this.Ys=new i.b(e)}return t.prototype.qs=function(){var t=this.zs();return t.Xs?t.value/t.Xs:t.value},t.prototype.zs=function(){var t=Date.now(),e=this.$s.ti(t),n=this.Ys.ti(t);this.Ks+=this.Ws*e;var i=this.Ks;return this.Ks=0,{value:i,Xs:n}},t.prototype.Qs=function(t){var e=Date.now(),n=this.$s.ti(e);this.Ks+=this.Ws*n,this.Ws=t},t}();e.a=r},function(t,e,n){t.exports={default:n(267),_:!0}},function(t,e,n){t.exports={default:n(281),_:!0}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(31),r=n(9)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.Zs?"Arguments":s}},function(t,e,n){var i=n(8),r=n(7).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(31);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(113),r=n(4),o=n(301),s=n(19),a=n(33),u=n(34),c=n(293),f=n(47),h=n(116),l=n(9)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,g,y,m){c(n,e,v);var E,_,T,b=function(t){if(!d&&t in R)return R[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==g,A=!1,R=t.prototype,L=R[l]||R["@@iterator"]||g&&R[g],O=L||b(g),I=g?S?b("entries"):O:void 0,C="Array"==e?R.entries||L:L;if(C&&(T=h(C.call(new t)))!==Object.prototype&&T.next&&(f(T,w,!0),i||a(T,l)||s(T,l,p)),S&&L&&"values"!==L.name&&(A=!0,O=function(){return L.call(this)}),i&&!m||!d&&!A&&R[l]||s(R,l,O),u[e]=O,u[w]=p,g)if(E={values:S?O:b("values"),keys:y?O:b("keys"),entries:I},m)for(_ in E)_ in R||o(R,_,E[_]);else r(r.Pt+r.It*(d||A),e,E);return E}},function(t,e,n){var i=n(30);t.exports.f=function(t){return new function(t){var e,n;this.Js=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)}(t)}},function(t,e){t.exports=function(t,e){return{l:!(1&t),u:!(2&t),te:!(4&t),value:e}}},function(t,e,n){var i=n(19);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){var i=n(124)("keys"),r=n(72);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(8);t.exports=function(t,e){if(!i(t)||t.Ri!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var i=n(62),r=n(9)("iterator"),o=n(34);t.exports=n(3).ie=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e){},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==("undefined"==typeof window?"undefined":h(window))&&(n=window)}t.exports=n},function(t,e,n){var i=n(59),r=n.n(i),o=n(41),s={BACKEND_USE_SSL:!0,TRACKER_URL:"",SIGNALING_URL:"",FALLBACK_URLS:{KLARA_URL:"https://klara.streamroot.io"},DISTRIBUTOR:{URL:"https://distributor.streamroot.io",OVERRIDDEN:!1,TIMEOUT_DELAY:1e4,MAX_RETRY:1},SIGNALING_DELAY_STEP:1e4,SIGNALING_DELAY_MAX:3e5,SIGNALING_DELAY_MAX_INITIAL:3e4,TRACKER_DELAY_MAX:3e5,TRACKER_DELAY_INIT:2e3,MAX_NUMBER_OF_PEERS_ASKED_BY_GET_PEERS_MESSAGE:20,ASK_PEERS_INTERVAL:6e4,ASK_PEERS_AFTER_TRACK_SWITCH_INTERVAL:1e4,SEND_TRACKS_INTERVAL:6e4,CONF_LABEL:"default",ANALYTICS:{KLARA_URL:"",EXPOSE_CONF_LABEL:!1,RETRY_NUMBER:3,RETRY_DELAY:1e4,TIMEOUT_DELAY:3e3,TRAFFIC_INTERVAL_ARRAY:function(t,e,n){for(var i=[],r=5e3;r<12e4;r+=1e4)i.push(r);return i.push(12e4),i}(),STATS_INTERVAL:12e4,CONTROL_INTERVAL:6e5,STATS_SENDER_PERCENTAGE:100,CONTROL_SENDER_PERCENTAGE:100,ENABLE_STATS_SENDER:!0,ENABLE_CONTROL_SENDER:!0},QOS_REF_PERCENTAGE:0,QOS_P2P_DISABLED:!1,ERRORS:{API_KEY:"8aab71ffca6bd2e6ff350e5e3b6fc40a",HANDLER:"xhr",STAGES:["staging","qa","production"]},PEER_CONNECTION_TIMEOUT:5e4,ICECANDIDATES_TIMEOUT:15e3,SEND_HEARTBEAT_INTERVAL:5e3,CHECK_HEARTBEAT_INTERVAL:1e4,DATACHANNEL_TYPE:"limited-retransmits",DATACHANNEL_MAX_PACKET_LIFETIME:1e3,DATACHANNEL_MAX_RETRANSMITS:1,ENABLE_STUN:!0,ENABLE_TURN:!1,ENCODE_SDP:!0,STUNSERVERS:["stun.l.google.com:19302"],TURNSERVERS:[],CLIENT_TRACKER_PROTOCOL_VERSION:"3.0.0",P2P_PROTOCOL_VERSION:"3.5.1",CHUNK_SIZE:15360,ALLOW_LIVE_PUSH_SEGMENT:!0,ALLOW_VOD_PUSH_SEGMENT:!0,MIN_CHUNK_PERCENTAGE_DOWNLOADED_FOR_HAS_SEGMENT_ANSWER:80,P2P_CACHE_MAX_SIZE:136314880,MAX_DISTRIBUTED_SEGMENT_LIST_LENGTH:300,GETSEGMENTTIME_CACHE_MAX_SIZE:1e3,NB_SEGMENT_P2P_PREBUFFER:10,MAX_BUFFER_DURATION:300,SEGMENT_ID_ACCEPTABLE_RANGE:r.a,CHUNK_BATCHING_INTERVAL:1e3,CHUNK_TIMEOUT:3e3,CHUNK_GRACE_DURATION:3e4,UP_BUFFERED_AMOUNT_LOW_THRESHOLD:15e3,UP_MAX_BUFFERED_AMOUNT:6e4,CHUNK_UP_TIMEOUT:2400,SPLIT_UPLOAD_QUEUE:!1,ENABLE_UPLOAD_DEQUEUE_ALL:!1,LIVE:{LOWER_BUFFER_TARGET:15,HIGHER_BUFFER_TARGET:30,BUFFER_LEVEL_UPLOAD_SPEED_EMWA_WEIGHT:.1,UPLOAD_THRESHOLD_MAX_BUFFER_TARGET_LOCKING:6e3,P2P_CACHE_MAX_SIZE:62914560,CHUNK_TIMEOUT:1700,CHUNK_UP_TIMEOUT:1100,QOS_REF_PERCENTAGE:0,NEAR_EDGE_MARGIN:12e4,LOW_TARGET_P2P_DL_BLOCK_DURATION:2e4,INIT_P2P_DOWNLOAD_BLOCK_DURATION:0,INIT_P2P_UPLOAD_BLOCK_DURATION:0,ENABLE_DYNAMIC_LOWER_TARGET:!1,CRITICAL_LOWER_TARGET_RATIO:.5,FAST_BUFFER_FILL_FRACTION:.5,LOWER_BUFFER_TARGET_DECREASE_STEP:.2,LOWER_BUFFER_TARGET_INCREASE_STEP:.3},BUFFER_CHECK_INTERVAL:100,BUFFER_ZERO_THRESHOLD:2,VOD_CRITICAL_BUFFER_THRESHOLD:-1,VOD_CRITICAL_BUFFER_P2P_STOP_DOWNLOAD_DURATION:2e4,VOD_CRITICAL_BUFFER_P2P_STOP_UPLOAD_DURATION:0,VOD_SAFE_BUFFER_THRESHOLD:10,SPEED_MONITOR_INTERVAL:1e3,MEAN_SPEED_CALCULATION_INTERVAL:500,PEER_UPLOAD_SPEED_EMA_HALF_LIFE:1e4,PEER_DOWNLOAD_SPEED_EMA_HALF_LIFE:15e3,PEER_SPEED_MONITOR_INTERVAL:1e3,PEER_TIMEOUT_RATIO_WINDOW:3e4,PEER_UPLOAD_CAPACITY_SAFE_RATIO:.5,PEER_UPLOAD_CAPACITY_EXTRA_RATIO:.1,PEER_UPLOAD_CAPACITY_COMPUTATION_INTERVAL:1e3,DEFAULT_PEER_UPLOAD_CAPACITY:3e3,MIN_PEER_UPLOAD_CAPACITY:1500,MAX_PEER_UPLOAD_CAPACITY_TIMEOUT_RATIO:.1,PEER_UPLOAD_CAPACITY_EWMA_WEIGHT_UP:.6,PEER_UPLOAD_CAPACITY_EWMA_WEIGHT_DOWN:.5,PUC_EMWA_WEIGHT_USE_TIMEOUT_RATIO:!0,PUC_EMWA_WEIGHT_CAP:.8,PEER_INIT_LOCKED_DURATION:5e4,PEER_LOCKED_UPLOAD_THRESHOLD:.02,PEER_LOCKED_DOWNLOAD_THRESHOLD:.03,POST_TRACK_SWITCH_PEER_LOCK_SENSITIVITY_ON:!1,POST_TRACK_SWITCH_PEER_SPEED_SENSITIVITY_DURATION:5e3,PEER_UPLOAD_SPEED_SENSITIVE_EMA_HALF_LIFE:2e3,PEER_DOWNLOAD_SPEED_SENSITIVE_EMA_HALF_LIFE:3e3,PEER_CRITICAL_CHUNK_TIMEOUT_THRESHOLD:.6,LOOSER_UPLOAD_THRESHOLD:50,PEER_POOL_LIMIT:16,PEER_POOL_MAINTENANCE_INTERVAL:1e3,EXPECTED_CONNECTION_SUCCESS_RATE:.4,RESERVED_OFFER_SLOTS:3,CANDIDATE_PEERS_TRY_DEQUEUE_INTERVAL:1e3,MAX_TRACKER_EXCLUSION_LENGTH:100,PEER_DISCONNECTED_EXCLUSION_DURATION:6e4,PEER_DISCONNECTED_EXCLUSION_RANK:1,OFFER_DECLINED_EXCLUSION_DURATION:6e4,OFFER_DECLINED_EXCLUSION_RANK:1,PEER_REMOVED_EXCLUSION_DURATION:9e5,PEER_REMOVED_EXCLUSION_RANK:1,PEER_CONNECTION_ATTEMPT_TIMED_OUT_EXCLUSION_DURATION:9e5,PEER_CONNECTION_ATTEMPT_EXCLUSION_RANK:1,CDN_SPEED_ESTIMATE_CONSIDER_P2P:!1,CDN_CONCURRENT_SCALING_CAP:1.5,P2P_SPEED_ZERO_THRESHOLD:50,P2P_SPEED_ESTIMATION_BUCKET_DURATION:100,P2P_SPEED_ESTIMATION_BUCKET_COUNT:100,P2P_SPEED_EMA_WEIGHT:.5,P2P_SPEED_EMA_ZERO_HALF_LIFE:12e4,P2P_USEFUL_CALCULATION_INTERVAL:5e3,P2P_USEFUL_SMA_WINDOW:12e4,P2P_DL_THRESHOLD_FOR_USEFUL_CORRECTION:50,P2P_USEFUL_RATIO_WEIGHT:.8,ABR_SEGMENT_CDN_RATIO_THRESHOLD:.3,ABR_CDN_SPEED_UPDATE_RATIO_THRESHOLD:.1,ABR_CDN_SMALL_SEGMENT_SPEED_UPDATE_RATIO_THRESHOLD:0,ABR_CDN_DL_THRESHOLD:100,ABR_CDN_DL_DECAY_TIME:12e4,USE_COMBINED_ABR_FEEDBACK:!0,BITRATE_ESTIMATION_WINDOW:3e4,ENABLE_PREBUFFER_FEEDBACK:!1,BLOCK_SEEDER_SCHEDULING_WINDOW:6e4,BLOCK_SEEDER_SCHEDULING_DURATION:12e4,BLOCK_SEEDER_SCHEDULING_TIMEOUT_THRESHOLD:1.1,BLOCK_SEEDER_SCHEDULING_REQUEST_THRESHOLD:50,PEER_COMPUTE_RTT_INTERVAL:5e3,USE_CONTINOUS_PROGRESS_FEEDBACK:!0,PROGRESS_ADD_TOTAL:!1,ENABLE_LATENCY_FEEDBACK:!1,LATENCY_CAPPING_RATIO:.5,MAX_PEER_CONNECTION_FAILURES:r.a,SEGMENT_REQUEST_TIMEOUT_TO_STOP_ASKING_PEERS:null,TRANSFER_ACTIVITY_TIMEOUT_TO_DISCONNECT_FROM_BACKEND:null,LOCKED_RETRY_INTERVAL:30,LOCKED_RETRY_TIMEOUT:500,TIMEOUT_GET_FULL_SEGMENT:500,RETURN_COPY_SEGMENT:!0,ENABLE_FIX_UNRELIABLE_SEGMENT_TIME:!0,ALLOW_P2P:!0,DEVICE_INFO:"",ID_CLIENT:"",ENABLE_MOBILE_BROWSER:!1,ENABLE_SAFARI:!1,CONTENT_ACTIVATED:!0,RAMP_UP_ACTIVATED:!0,ENABLE_PLAYBACK_ERROR_LOGGING:!1,DEBUG:!1,ENABLE_FILTER_BANNED_SEEDERS:!1,ENABLE_PUSH_SEGMENT_OPTIM:!0,ENABLE_P2P_SCHEDULER_OPTIM:!0,ENABLE_FUNNEL_GETSEGMENT_CALLBACKS:!1,ENABLE_RANGE_REQUEST_DETECTION:!0,ENABLE_TRACK_EDGE_GC_BLOCK:!1,P2P_CACHE_GC_TRACK_EDGE_BLOCK_DURATION:0,RANGE_REQUEST_DETECTION:!0,RR_DETECTION_MIN_BUFFER_LEVEL:10,CLUSTER_BY_PA_VERSION:!1,CLUSTER_BY_INTEGRATION_TAG:!1};o.a.xi(s),e.a=s},function(t,e,n){var i=n(6),r=n.n(i),o={peerAgentCounter:0,mediaEngine:"legacy",integrationTag:"legacy"};e.a=function(t,e){r()(t,e?{peerAgentCounter:e.peerAgentCounter,mediaEngine:e.mediaEngineTag,integrationTag:"w"+e.wrapperVersion+"-s"+e.streamrooterVersion}:o)}},function(t,e,n){e.a=function t(e){o(this,t),this.message=e.error.message,this.stacktrace=e.error.stack,this.fileName=e.filename,this.lineNumber=e.lineno,this.columnNumber=e.colno?e.colno:void 0}},function(t,e,i){var r=i(103),s=i.n(r),a=i(1),u=i(17),c=i(41),h=i(39),l=function(){function t(e,r,s){o(this,t),this.se=e,this.ee=r,this.ne=0,this.re=!1,this.oe=c.a.Hi({responseType:t.he.JSON,ce:[].concat(n(i.t(u.a)(200,206)),[304]),timeout:0,ae:0,ue:0,withCredentials:!1,headers:{},fe:{onprogress:h.a}},s)}return t.prototype.send=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new s.a(function(n,r){function o(){var t=this;this.le(e).then(function(t){n(t)}).catch(function(e){t.ne!==t.oe.ae?(t.ne++,i.t(a.b)(function(){t.de(),o.call(t)},t.oe.ue)):r(e)})}o.call(t)})},t.prototype.abort=function(){throw new TypeError("Cannot call abstract method")},t.prototype.le=function(){throw new TypeError("Cannot call abstract method")},t.prototype.de=function(){throw new TypeError("Cannot call abstract method")},f(t,[{key:"Ee",set:function(t){this.we=t}}]),t}();l.Methods={_e:"GET",pe:"POST"},l.he={JSON:"json",ARRAY_BUFFER:"arraybuffer"},l.ve={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l.ui={me:"Response status is not part of valid status codes",ge:"Request has been aborted",Te:"An error occured while sending the request",Se:"Request timeout"},e.a=l},function(t,e,n){var i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,t),this.Ae=e,this.Re=n}return f(t,[{key:"message",get:function(){return this.Ae}},{key:"status",get:function(){return this.Re}}]),t}();e.a=i},function(t,e,n){var i=function(){function t(e,n,i){o(this,t),this.Ce=e,this.De=n,this.be=i,this.ye=Date.now()}return f(t,[{key:"segmentCoord",get:function(){return this.Ce}},{key:"Ne",get:function(){return this.De}},{key:"Ie",get:function(){return this.be}}]),t}();e.a=i},function(t,e,n){function i(t,e,n,i){var r=e?p.a.Methods.pe:p.a.Methods._e,o=new p.a(r,t,{headers:{Authorization:i}}),a=e?s()(e):null;return o.Ee=!0,o.send(a).then(function(t){n(null,t)},function(t){n(t,null)}),o}var r=n(29),s=n.n(r),a=n(11),u=n.n(a),c=n(20),h=n(1),l=n(56),d=n(37),p=n.n(d),v=n(0),g=n(2),y=n.n(g),m=function(){function t(e,n,i){var r=this;o(this,t),this.Ue=i.Xi,this.Be=i.us,this.Re=i.status,this.Fe=i.Qi,this.Ge=i.ms;var s=new u.a;this.He=this.Ue.CLIENT_TRACKER_PROTOCOL_VERSION,this.xe=e,this.je=n,this.Ve=!1,this.Ke=this.Ue.TRACKER_DELAY_INIT,this.We=new c.a,this.$e=[],this.Ye=!1,this.qe=function(){return s},this.ze=function(){r.de()},this.Xe=function(){r.disconnect()},this.Qe=function(){r.Ze=!0,r.disconnect()},i.us.xt(v.a.R.C,this.ze),i.us.Yt(v.a.ft.Et,this.ze),i.us.Yt(v.a.ft.dt,this.Xe),i.us.Yt(v.a.ft.lt,this.Qe)}return f(t,null,[{key:"Oe",get:function(){return{wt:"tracker_ready",ERROR:"tracker_error",Le:"content_deactivated",Pe:"ramp_up_deactivated",Me:"qos_tester",ke:"other"}}}]),t.prototype.dispose=function(){this.Be.removeListener(v.a.R.C,this.ze),this.Be.removeListener(v.a.ft.Et,this.ze),this.Be.removeListener(v.a.ft.dt,this.Xe),this.Be.removeListener(v.a.ft.lt,this.Qe),this.Ze=!0,this.disconnect(),this.We.oi(),this.Je&&(this.Je.abort(),this.Je=null)},t.prototype.tn=function(){var t=this.Fe.in.video;return t?t.viewToString():"defautTrackHash"},t.prototype.sn=function(t,e){var i={tracks:[this.tn()],exclusions:t,peer_number:this.Ue.MAX_NUMBER_OF_PEERS_ASKED_BY_GET_PEERS_MESSAGE,current_position:this.Fe.en,id:n.t(l.a)(this.nn)};this.rn(i),this.on("peers",i,function(t,n){e(t,[n])},!0)},t.prototype.de=function(){if(this.Ze||!0===this.Ue.QOS_P2P_DISABLED||!this.Ue.CONTENT_ACTIVATED||!this.Ue.RAMP_UP_ACTIVATED){var e=void 0;return e=this.Ue.RAMP_UP_ACTIVATED?!0===this.Ue.QOS_P2P_DISABLED?t.Oe.Me:this.Ue.CONTENT_ACTIVATED?t.Oe.ke:t.Oe.Le:t.Oe.Pe,void this.Be.$t(v.a.ft.pt,{reason:e})}this.hn=this.Ue.TRACKER_URL,this.cn=this.Re.an();var i=n.t(l.a)(this.Fe.content),r=this.Ue.P2P_PROTOCOL_VERSION,o=this.Ue.ID_CLIENT,s=this.Fe.isLive(),a=this.Re.un(),u=void 0;u=s?{content:i,p2p_protocol:r,customer_id:o,is_live:s,buffer_level_max:this.xe.getBufferLevelMax(),tracker_id:a}:{content:i,p2p_protocol:r,customer_id:o,is_live:s,tracker_id:a},this.on("init",u,this.fn.bind(this),!0)},t.prototype.fn=function(e,i){if(e)return y.a.ln(e),void this.Be.$t(v.a.ft._t,{reason:t.Oe.ERROR});this.nn=i.peer_id,this.Re.dn(this.nn);var r=n.t(h.a)(this.En.bind(this),this.Ue.SEND_TRACKS_INTERVAL);this.We.ni("tracks",r),this.Re.wn(!0),this.Re._n(i.tracker_id),this.Ve=!0,this.Be.$t(v.a.ft.wt),this.qe().$t(t.Oe.wt)},t.prototype.En=function(){var t={tracks:[this.tn()],id:n.t(l.a)(this.nn),current_position:this.Fe.en};this.rn(t),this.on("tracks",t,function(){},!0)},t.prototype.rn=function(t){this.je.getStats()&&this.Fe.isLive()&&(t.near_edge=this.Fe.pn)},t.prototype.on=function(t,e,n,r){var o=this;switch(t){case"init":this.Ge.sentTrackerInitCount++;break;case"peers":this.Ge.sentTrackerPeersCount++;break;case"tracks":this.Ge.sentTrackerTracksCount++;break;default:y.a.ln(new Error("Unexpected tracker route: "+t))}var s=function(t,e){if(o.Je=null,!o.Fe.vn){if(t&&r)return o.disconnect(),o.mn(),void n(t,e);var s=o.$e.shift();void 0===s?o.Ye=!1:o.Je=i(s.url,s.data,s.gn,o.cn),n(t,e)}},a=this.hn+t;this.Ye?this.$e.push({url:a,data:e,gn:s}):(this.Ye=!0,this.Je=i(a,e,s,this.cn))},t.prototype.disconnect=function(){this.We.ri("tracks"),this.We.ri("reconnect"),this.Ye=!1,this.$e=[],!0===this.Ve&&(this.Ke=this.Ue.TRACKER_DELAY_INIT,this.Re.wn(!1),this.Ve=!1,i(this.hn+"bye",{id:n.t(l.a)(this.nn)},function(){},this.cn),this.qe().$t("tracker_disconnected"))},t.prototype.mn=function(){var t=n.t(h.b)(this.de.bind(this),this.Ke);this.We.ni("reconnect",t),this.Ke=Math.min(2*this.Ke,this.Ue.TRACKER_DELAY_MAX)},t}();e.a=m},function(t,e,n){t.exports=n(189).default},function(t,e,n){e.a={IDLE:"IDLE",Tn:"NO_PEER",Sn:"RANDOM",An:"DYNAMIC",Rn:"TOP_SEEDER"}},function(t,e,n){var i=n(39),r=function(){function t(e,n,i){o(this,t),this.Mi=e,this.ki=n,this.Li=i}return t.prototype.getSegment=function(){try{this.yi()}catch(t){this.Cn(t)}return{abort:this.Gi.bind(this)}},t.prototype.yi=function(){throw new Error("Cannot call abstract method")},t.prototype.Fi=function(t){this.Dn(),this.Li.onSuccess(t,this.bi,this.ki)},t.prototype.Bi=function(t){this.Li.onError(t,this.ki)},t.prototype.Cn=function(t){this.Li.onFallback(t)},t.prototype.Gi=function(){this.bn(),this.yn()},t.prototype.bn=function(){this.Li.onSuccess=i.a,this.Li.onFallback=i.a},t.prototype.Dn=function(){this.Mi.ms.getSegmentSuccess++},t.prototype.yn=function(){this.Mi.gs.abortFragmentCount++},t}();e.a=r},function(t,e,n){var i=n(11),r=n.n(i),s=n(0),a=n(1),u=function(){function t(e,n){o(this,t),this.Mi=e,this.Nn=n,this.In=new r.a}return t.prototype.xt=function(t,e){this.In.xt(t,e)},t.prototype.On=function(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.In).$t.apply(e,[t].concat(i)),this.qt()},t.prototype.qt=function(){this.In.qt()},t.prototype.Ln=function(t){var e=this;try{this.Nn.ts({response:t},this.Pn.bind(this),this.Mn.bind(this))}catch(t){return void this.Mn(t)}n.t(a.b)(function(){e.Mn()},this.Mi.Xi.TIMEOUT_GET_FULL_SEGMENT)},t.prototype.Pn=function(t){this.On(s.a.Dt.bt,t.response)},t.prototype.Mn=function(t){this.On(s.a.Dt.yt,t)},t}();e.a=u},function(t,e,n){function i(t,e){var n={},i=t.headers;if(i&&void 0!==i.length)throw new Error("Custom headers object should not have a `length` attribute (you might use the previous API format)");return i&&s()(n,i),e&&(n.Range=function(t){return"bytes="+t.start+"-"+(t.end||"")}(e)),n}function r(t){var e=t.headers;if(e&&void 0!==e.Range){var n=e.Range.split("=")[1].split("-"),i=parseInt(n[0],10),r=parseInt(n[1],10);return isNaN(r)?{start:i}:{start:i,end:r}}}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var o=n(6),s=n.n(o)},function(t,e,n){var i=n(28),r=n.n(i),s=n(10),a=n.n(s),u=n(60),c=n.n(u),f=n(5),h=n.n(f),l=n(231),d=n(165),p=n(0),v=n(2),g=n.n(v),y=n(25),m=function(){function t(e,n,i,r){o(this,t),this.kn=!1,this.Un=[],this.Mi=r,this.Bn=r.Qi.in,this.Fn=n,this.Gn=i,this.Hn=new d.a(e,r),this.xn=new l.a(this.Hn,r)}return t.prototype.jn=function(t,e){var n=void 0,i=[];if(n="audio"===e?this.xn.audio:this.xn.video){var r=this.Hn.Vn(t,n,this.Mi.Xi.MAX_BUFFER_DURATION),o=this.Gn.Kn(n),s=this.Wn(r,o),a=this.Mi.Xi.ENABLE_P2P_SCHEDULER_OPTIM&&0===s.length?[]:this.Fn.$n(t);if("video"===e){var u=this.Mi.Xi.ENABLE_PREBUFFER_FEEDBACK||this.Mi.Xi.ENABLE_FIX_UNRELIABLE_SEGMENT_TIME?!r.length:r.length<=1;u!==this.kn&&(this.kn=u,this.Mi.us.$t(p.a.L.P,u))}if(i=this.Yn(s,a),this.Mi.Xi.ENABLE_PREBUFFER_FEEDBACK&&this.qn(e,s,i),null===this.Hn.getSegmentTime(n))g.a.ln(new Error("Unexpected getSegmentTime error: track edge timestamp is not supposed to be unreliable"));else if(this.Mi.Qi.isLive()){var c=this.Mi.Qi.zn===y.b.HLS?r:s;if(c.length>1){var f=c[0],h=c[c.length-1],l=this.Hn.getSegmentTime(f),d=this.Hn.getSegmentTime(h);if(null!==l&&null!==d){var v=d-l;this.Mi.Qi.pn=v<=this.Mi.Xi.LIVE.NEAR_EDGE_MARGIN/1e3}else g.a.hi(new Error("Unexpected getSegmentTime error: 1st and last segments in range are unreliable")),this.Mi.Qi.pn=!0}else this.Mi.Qi.pn=!0}}return i},t.prototype.qn=function(t,e,n){this.Mi.Qi.nextSegmentPrebuffered[t]=e.length>=2&&(!n.length||!e[0].isEqual(n[0])&&!e[1].isEqual(n[0]))},t.prototype.Xn=function(t){if(this.Mi.Xi.ENABLE_PUSH_SEGMENT_OPTIM){var e=!0,n=!1,i=void 0;try{for(var r,o=h()(this.Un);!(e=(r=o.next()).done);e=!0){var s=r.value;if(t.isEqual(s)){var a=this.Fn.Qn(t);return a&&a.Jn.Zn()}}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return this.Un.length<this.Mi.Xi.NB_SEGMENT_P2P_PREBUFFER&&this.tr(t)}var u=this.ir(),c=!0,f=!1,l=void 0;try{for(var d,p=h()(u);!(c=(d=p.next()).done);c=!0){var v=d.value;if(t.isEqual(v))return!0}}catch(t){f=!0,l=t}finally{try{!c&&p.return&&p.return()}finally{if(f)throw l}}return!1},t.prototype.tr=function(t){for(var e=!1,n=["audio","video"],i=0;i<n.length;i++){var r=n[i],o=this.xn[r];e=e||!!o&&t.isInTrack(o.trackView)&&t.getId()>o.getId()&&t.getId()-o.getId()<=this.Mi.Xi.SEGMENT_ID_ACCEPTABLE_RANGE}return e},t.prototype.Yn=function(t,e){if(this.Mi.Xi.ENABLE_P2P_SCHEDULER_OPTIM){if(0===e.length||0===t.length)return t;var n=new c.a(e.map(function(t){return t.viewToString()}));return t.filter(function(t){return!n.has(t.viewToString())})}return t.filter(function(t){return void 0===e.find(function(e){return t.isEqual(e)})})},t.prototype.Wn=function(t,e){var n=new a.a,i=!0,o=!1,s=void 0;try{for(var u,c=h()(t);!(i=(u=c.next()).done);i=!0){var f=u.value;n.set(f.viewToString(),f)}}catch(t){o=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}var l=!0,d=!1,p=void 0;try{for(var v,g=h()(e);!(l=(v=g.next()).done);l=!0){var y=v.value;n.set(y.viewToString(),y)}}catch(t){d=!0,p=t}finally{try{!l&&g.return&&g.return()}finally{if(d)throw p}}return r()(n.values())},t.prototype.sr=function(){return this.Un},t.prototype.ir=function(){throw new Error("Cannot call abstract method")},t.prototype.er=function(t){throw new Error("Cannot call abstract method")},t.prototype.nr=function(){return this.xn.video},t.prototype.dispose=function(){this.Hn.dispose()},t}();e.a=m},function(t,e,n){e.a={rr:{or:"sampledPUC",hr:"sampledLiveConnectionRtt",cr:"totalConnectionDuration"}}},function(t,e,n){var i=function(){function t(){o(this,t),this.ar={}}return t.prototype.ur=function(t,e){this.ar[t]=e},t.prototype.lr=function(t){var e=this.ar[t];if(e)return e()},t}();e.a=i},function(t,e,n){var i=n(42),r=n.n(i),s=n(12),a=n(40),u=n(54);e.a=function t(e,i,c){if(o(this,t),n.t(a.a)(u.a,e),!n.t(s.a)(i))throw new Error("Invalid value for size");if(!c)throw new Error("No hash");this.segmentCoord=e,this.size=i,this.hash=c,r()(this)}},function(t,e,n){var i=n(259),r=n.n(i);e.a={clear:function(t){t.length=0},dr:function(t,e){for(var n=0,i=t.length-1;i>=0;i--)r()(t[i],e)&&(t.splice(i,1),n++);return n}}},function(t,e,n){function i(){return!!(window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection)}function r(t){return!(!(i()&&t.ALLOW_P2P&&t.CONTENT_ACTIVATED)||function(t){var e=o.a.vi();if(!e.Er)return!1;var n=e.wr;return"Edge"===n.name||!(t.ENABLE_SAFARI||"Safari"!==n.name&&"Mobile Safari"!==n.name)}(t))&&(!o.a.mi()||t.ENABLE_MOBILE_BROWSER)}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var o=n(27)},function(t,e,n){var i=function(){function t(e){o(this,t),this._r=e}return t.prototype.pr=function(){return!0},t.prototype.vr=function(t){},t.prototype.mr=function(){},t.prototype.gr=function(t){return!0},t.prototype.push=function(t){this._r.push(t),this.Tr()},t.prototype.Sr=function(){for(var t=this._r.shift();void 0!==t&&!this.gr(t);)t=this._r.shift();return t},t.prototype.Tr=function(){if(this.pr()){var t=this.Sr();t?this.vr(t):this.mr()}},t.prototype.Ar=function(t){for(;this.pr()&&t>0;){var e=this.Sr();if(!e){this.mr();break}this.vr(e),t--}},t.prototype.Rr=function(){for(;this.pr();){var t=this.Sr();if(!t){this.mr();break}this.vr(t)}},t}();e.a=i},function(t,e,n){function i(t){if(0===t.length)return null;for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}e.a={Cr:function(t){if(0===t.length)return null;t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2},Dr:i,br:function(t){var e=i(t);if(!e)return null;for(var n=0,r=0;r<t.length;r++)n+=Math.abs(t[r]-e);return n/t.length}}},function(t,e,n){var i=function(){function t(e){o(this,t),this.yr=e,this._r=[]}return t.prototype.Nr=function(t){this._r.length>=this.yr&&this._r.shift(),this._r.push(t)},t.prototype.Ir=function(){if(this._r.length>0){var t=Math.floor(Math.random()*this._r.length);return this._r.splice(t,1)[0]}},f(t,[{key:"Dr",get:function(){return this.length>0?this._r.reduce(function(t,e){return t+e})/this.length:0}},{key:"length",get:function(){return this._r.length}},{key:"Or",get:function(){return this._r}}]),t}();e.a=i},function(t,e,n){var i=n(100),r=n.n(i),o=n(5),s=n.n(o),a=n(28),u=n.n(a),c=n(27),f=n(55),h=window.RTCPeerConnection||window.webkitRTCPeerConnection,l=window.RTCIceCandidate,d=window.RTCSessionDescription,p=function(t,e){"Firefox"===c.a.vi().wr.name?t.getStats(null,function(t){e(u()(t.values()))},function(){}):t.getStats(function(t){var n=[];t.result().forEach(function(t){var e={};t.names().forEach(function(n){e[n]=t.stat(n)}),e.id=t.id,e.type=t.type,e.timestamp=t.timestamp,n.push(e)}),e(n)})},v=/^a=ice-ufrag:(.+)/,g=/^a=ice-pwd:(.+)/,y=/^a=fingerprint:sha-256 ([A-F0-9]{2}(?::[A-F0-9]{2}){31})/,m=/^a=candidate:.* (?:udp|UDP) .* ([0-9]{1,3}(?:\.[0-9]{1,3}){3}) ([0-9]{1,5}) typ ([a-zA-Z]+)(?: raddr ([0-9]{1,3}(?:\.[0-9]{1,3}){3}) rport ([0-9]{1,5}))?/;e.a={Lr:function(t){return new h(function(t){var e=t.ENABLE_STUN,n=t.ENABLE_TURN;if(!e&&!n)return{};var i=e?[{urls:t.STUNSERVERS.map(function(t){return"stun:"+t})}]:[];return{iceServers:n?t.TURNSERVERS.concat(i):i}}(t),{optional:[{DtlsSrtpKeyAgreement:!0}]})},Pr:function(t,e){"Firefox"!==c.a.vi().wr.name&&p(t,function(t){var n=!0,i=!1,r=void 0;try{for(var o,a=s()(t);!(n=(o=a.next()).done);n=!0){var u=o.value;if(u.googRtt)return void e(parseFloat(u.googRtt))}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}})},IceCandidate:l,SessionDescription:d,getStats:p,Mr:function(t,e){var i="",o="",a="",u=[],c=!0,h=!1,l=void 0;try{for(var d,p=s()(t.split("\n"));!(c=(d=p.next()).done);c=!0){var E=d.value,_=v.exec(E);null===_?null===(_=g.exec(E))?null===(_=y.exec(E))?null===(_=m.exec(E))||u.push({kr:_[1],Ur:_[2],type:_[3],Br:_[4],Fr:_[5]}):a=_[1]:o=_[1]:i=_[1]}}catch(t){h=!0,l=t}finally{try{!c&&p.return&&p.return()}finally{if(h)throw l}}var T="";"offer"===e?T+="O":"answer"===e&&(T+="A"),T+=","+i+","+o,T+=","+n.t(f.e)(a);var b=!0,w=!1,S=void 0;try{for(var A,R=s()(u);!(b=(A=R.next()).done);b=!0){var L=A.value,O="";if("host"===L.type)O+=",H";else{if("srflx"!==L.type)continue;O+=",S"}if(O+=","+n.t(f.f)(L.kr,r()(L.Ur,10)),"srflx"===L.type){if(!L.Br||!L.Fr)continue;O+=","+n.t(f.f)(L.Br,r()(L.Fr,10))}T+=O}}catch(t){w=!0,S=t}finally{try{!b&&R.return&&R.return()}finally{if(w)throw S}}return T},Gr:function(t){for(var e=t.split(","),i=e.shift(),r=e.shift(),o=e.shift(),a=n.t(f.g)(e.shift()),u=[];e.length>0;){var c=e.shift(),h=n.t(f.h)(e.shift()),l=void 0;"S"===c&&(l=n.t(f.h)(e.shift())),u.push({type:"S"===c?"srflx":"host",kr:h.Ms,Ur:h.port.toString(),Br:l?l.Ms:void 0,Fr:l?l.port.toString():void 0})}var d="v=0\n        o=- 2533049204347174788 2 IN IP4 127.0.0.1\n        s=-\n        t=0 0\n        a=msid-semantic: WMS\n        m=application 59118 DTLS/SCTP 5000\n        c=IN IP4 0.0.0.0\n        a=sctpmap:5000 webrtc-datachannel 1024\n        a=setup:"+("O"===i?"actpass":"active")+"\n        a=ice-ufrag:"+r+"\n        a=ice-pwd:"+o+"\n        a=fingerprint:sha-256 "+a,p=1,v=!0,g=!1,y=void 0;try{for(var m,E=s()(u);!(v=(m=E.next()).done);v=!0){var _=m.value;d+="\na=candidate:"+(p-1)+" 1 udp "+p+" "+_.kr+" "+_.Ur+" typ "+_.type,_.Br&&_.Fr&&(d+=" raddr "+_.Br+" rport "+_.Fr),p++}}catch(t){g=!0,y=t}finally{try{!v&&E.return&&E.return()}finally{if(g)throw y}}return(d+="\n").replace(/^\s+/gm,"")}}},function(t,e,n){n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var i=n(129),r=n.n(i),s={TIMEOUT:0,Nt:1},a=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.TIMEOUT;o(this,t),this.Hr="timer-"+r.a.Es(),this.xr=this.Hr,this.jr=e,this.Vr=n,this.Kr=i,this.Wr=i===s.Nt}return t.prototype.clear=function(){throw new Error("Cannot call abstract method")},f(t,[{key:"id",get:function(){return this.Hr}},{key:"name",set:function(t){this.xr=t},get:function(){return this.xr}}]),t}()},function(t,e,n){t.exports={default:n(269),_:!0}},function(t,e,n){t.exports={default:n(273),_:!0}},function(t,e,n){t.exports={default:n(278),_:!0}},function(t,e,n){t.exports={default:n(280),_:!0}},function(t,e,n){e._=!0;var i=function(t){return t&&t._?t:{default:t}}(n(6));e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){var i=n(16).f,r=n(114),o=n(69),s=n(14),a=n(61),u=n(32),c=n(66),f=n(112),h=n(123),l=n(15),d=n(45).$i,p=n(73),v=l?"_s":"size",g=function(t,e){var n,i=d(e);if("F"!==i)return t.Ci[i];for(n=t.$r;n;n=n.n)if(n.Yr==e)return n};t.exports={qr:function(t,e,n,c){var f=t(function(t,i){a(t,f,e,"_i"),t.Ri=e,t.Ci=r(null),t.$r=void 0,t.zr=void 0,t[v]=0,void 0!=i&&u(i,n,t[c],t)});return o(f.prototype,{clear:function(){for(var t=p(this,e),n=t.Ci,i=t.$r;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.t];t.$r=t.zr=void 0,t[v]=0},delete:function(t){var n=p(this,e),i=g(n,t);if(i){var r=i.n,o=i.p;delete n.Ci[i.t],i.r=!0,o&&(o.n=r),r&&(r.p=o),n.$r==i&&(n.$r=r),n.zr==i&&(n.zr=o),n[v]--}return!!i},forEach:function(t){p(this,e);for(var n,i=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this.$r;)for(i(n.Xr,n.Yr,this);n&&n.r;)n=n.p},has:function(t){return!!g(p(this,e),t)}}),l&&i(f.prototype,"size",{get:function(){return p(this,e)[v]}}),f},Qr:function(t,e,n){var i,r,o=g(t,e);return o?o.Xr=n:(t.zr=o={t:r=d(e,!0),Yr:e,Xr:n,p:i=t.zr,n:void 0,r:!1},t.$r||(t.$r=o),i&&(i.n=o),t[v]++,"F"!==r&&(t.Ci[r]=o)),t},Zr:g,Jr:function(t,e,n){c(t,e,function(t,n){this.Ri=p(t,e),this.to=n,this.zr=void 0},function(){for(var t=this,e=t.to,n=t.zr;n&&n.r;)n=n.p;return t.Ri&&(t.zr=n=n?n.n:t.Ri.$r)?"keys"==e?f(0,n.Yr):"values"==e?f(0,n.Xr):f(0,[n.Yr,n.Xr]):(t.Ri=void 0,f(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){var i=n(62),r=n(283);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(7),r=n(4),o=n(45),s=n(18),a=n(19),u=n(69),c=n(32),f=n(61),h=n(8),l=n(47),d=n(16).f,p=n(285)(0),v=n(15);t.exports=function(t,e,n,g,y,m){var E=i[t],_=E,T=y?"set":"add",b=_&&_.prototype,w={};return v&&"function"==typeof _&&(m||b.forEach&&!s(function(){(new _).entries().next()}))?(_=e(function(e,n){f(e,_,t,"_c"),e.io=new E,void 0!=n&&c(n,y,e[T],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in b&&(!m||"clear"!=t)&&a(_.prototype,t,function(n,i){if(f(this,_,t),!e&&m&&!h(n))return"get"==t&&void 0;var r=this.io[t](0===n?0:n,i);return e?this:r})}),m||d(_.prototype,"size",{get:function(){return this.io.size}})):(_=g.qr(e,t,y,T),u(_.prototype,n),o.Wi=!0),l(_,t),w[t]=_,r(r.Ot+r.kt+r.It,w),m||g.Jr(_,t,y),_}},function(t,e,n){var i=n(7).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(34),r=n(9)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(13);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(9)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(t){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=!0},function(t,e,n){var i=n(13),r=n(115),o=n(64),s=n(70)("IE_PROTO"),a=function(){},u=function(){var t,e=n(63)("iframe"),i=o.length;for(e.style.display="none",n(108).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.It;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(16),r=n(13),o=n(46);t.exports=n(15)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var i=n(33),r=n(23),o=n(70)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(33),r=n(35),o=n(284)(!1),s=n(70)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t){try{return{e:!1,Xr:t()}}catch(t){return{e:!0,Xr:t}}}},function(t,e,n){var i=n(13),r=n(8),o=n(67);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.Js}},function(t,e,n){var i=n(4),r=n(30),o=n(14),s=n(32);t.exports=function(t){i(i.Lt,t,{from:function(t){var e,n,i,a,u=arguments[1];return r(this),(e=void 0!==u)&&r(u),void 0==t?new this:(n=[],e?(i=0,a=o(u,arguments[2],2),s(t,!1,function(t){n.push(a(t,i++))})):s(t,!1,n.push,n),new this(n))}})}},function(t,e,n){var i=n(4);t.exports=function(t){i(i.Lt,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){var i=n(7),r=n(3),o=n(16),s=n(15),a=n(9)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];s&&e&&!e[a]&&o.f(e,a,{u:!0,get:function(){return this}})}},function(t,e,n){var i=n(7),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(13),r=n(30),o=n(9)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},function(t,e){t.exports="\t\n\v\f\r Ã‚ Ã¡Å¡â‚¬Ã¡ Å½Ã¢â‚¬â‚¬Ã¢â‚¬ÂÃ¢â‚¬â€šÃ¢â‚¬Æ’Ã¢â‚¬â€žÃ¢â‚¬â€¦Ã¢â‚¬â€ Ã¢â‚¬â€¡Ã¢â‚¬Ë†Ã¢â‚¬â€°Ã¢â‚¬Å Ã¢â‚¬Â¯Ã¢ÂÅ¸Ã£â‚¬â‚¬\u2028\u2029\ufeff"},function(t,e,n){var i,r,o,s=n(14),a=n(290),u=n(108),c=n(63),f=n(7),h=f.process,l=f.setImmediate,d=f.clearImmediate,p=f.MessageChannel,v=f.so,g=0,y={},m="onreadystatechange",E=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},_=function(t){E.call(t.data)};l&&d||(l=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++g]=function(){a("function"==typeof t?t:Function(t),e)},i(g),g},d=function(t){delete y[t]},"process"==n(31)(h)?i=function(t){h.eo(s(E,t,1))}:v&&v.now?i=function(t){v.now(s(E,t,1))}:p?(o=(r=new p).port2,r.port1.onmessage=_,i=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.no?(i=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):i=m in c("script")?function(t){u.appendChild(c("script"))[m]=function(){u.removeChild(this),E.call(t)}}:function(t){setTimeout(s(E,t,1),0)}),t.exports={set:l,clear:d}},function(t,e,n){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={t:i,i:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.i=!0,r.exports}var n={};return e.s=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{u:!1,l:!0,get:i})},e.n=function(t){var n=t&&t._?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.v=1)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={IDLE:"IDLE",ro:"PLAYING",oo:"SEEKING",ho:"BUFFERING",co:"BUFFERING_WITH_BUFFER",ao:"PAUSED",ENDED:"ENDED"},t.exports=e.default},function(t,e,n){function i(t){return t&&t._?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(2)),o=i(n(3)),s=i(n(4)),a=i(n(5)),u=i(n(6)),c={uo:"ATTACHED",fo:"DETACHED",lo:"DISPOSED"},f=function(){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.do=c.uo,this.Eo=new r.default,this.wo=new o.default(e,this.Eo,n||a.default),this._o=new s.default(this.Eo),this.po=new u.default(e,this._o)}return t.prototype.vo=function(){return this.po.mo()},t.prototype.To=function(){this.do===c.fo&&(this.do=c.uo,this.wo.resume(),this._o.resume())},t.prototype.detach=function(){this.do===c.uo&&(this.do=c.fo,this.wo.pause(),this._o.pause())},t.prototype.dispose=function(){this.do=c.lo,this.wo.dispose(),this._o.dispose()},t}();e.default=f,t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t._?t:{default:t}}(n(0)),r=function(){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.So=[],this.Ao()}return t.prototype.Ro=function(t){var e=this;this.do!==t&&(this.Co=this.do,this.do=t,this.So.forEach(function(t){t(e.do,e.Co)}))},t.prototype.Ao=function(){this.Ro(i.default.IDLE)},t.prototype.Do=function(){this.Ro(i.default.ro)},t.prototype.bo=function(){this.Ro(i.default.oo)},t.prototype.yo=function(){this.Ro(i.default.ho)},t.prototype.No=function(){this.Ro(i.default.co)},t.prototype.Io=function(){this.Ro(i.default.ao)},t.prototype.Oo=function(){this.Ro(i.default.ENDED)},t.prototype.Lo=function(){return this.do},t.prototype.Po=function(t){this.So.indexOf(t)<0&&this.So.push(t)},t.prototype.Mo=function(t){var e=this.So.indexOf(t);e>-1&&this.So.splice(e,1)},t.prototype.ko=function(){return this.do===i.default.IDLE},t.prototype.Uo=function(){return this.do===i.default.ro},t.prototype.Bo=function(){return this.do===i.default.oo},t.prototype.Fo=function(){return this.do===i.default.ho},t.prototype.Go=function(){return this.do===i.default.co},t.prototype.Ho=function(){return this.do===i.default.ao},t.prototype.xo=function(){return this.do===i.default.ENDED},t}();e.default=r,t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.l=i.l||!1,i.u=!0,"value"in i&&(i.te=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,n,i){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.jo=i,this.Vo=e,this.Eo=n,this.Ko=0,this.resume()}return t.prototype.dispose=function(){this.pause()},t.prototype.pause=function(){this.Wo.clear()},t.prototype.resume=function(){this.Wo=this.jo(this.$o.bind(this),100)},t.prototype.Yo=function(){for(var t=this.Vo.currentTime,e=this.Vo.buffered,n=0;n<e.length;n++)if(e.start(n)<=t&&t<=e.end(n))return e.end(n)-t;return 0},t.prototype.$o=function(){var t=this.Vo.duration-this.Vo.currentTime,e=Math.abs(this.Vo.currentTime-this.Ko);isNaN(e)?this.Eo.Ao():this.Vo.seeking?this.Eo.bo():this.Vo.paused?this.Eo.ko()||(!isNaN(t)&&t<.3?this.Eo.Oo():this.Eo.Io()):e>0?this.Eo.Do():this.Eo.ko()||this.Eo.Bo()||(this.Yo()<1?this.Eo.yo():this.Eo.No()),this.Ko=this.Vo.currentTime},i(t,null,[{key:"BUFFERING_WITH_BUFFER_THRESHOLD",get:function(){return 1}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t._?t:{default:t}}(n(0)),r=function(){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.Eo=e,this.bi={};var n=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(i.default)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;this.bi[i.default[u]]={count:0,qo:0}}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}this.resume(),this.zo=this.Xo.bind(this),this.Eo.Po(this.zo)}return t.prototype.getStats=function(){return this.Qo&&this.Zo(this.Eo.Lo()),this.bi},t.prototype.pause=function(){this.Qo=!1,this.Jo(this.Eo.Lo())},t.prototype.resume=function(){this.Qo=!0,this.th(this.Eo.Lo())},t.prototype.dispose=function(){this.pause(),this.Eo.Mo(this.zo)},t.prototype.Xo=function(t,e){this.Jo(e),this.th(t)},t.prototype.Jo=function(t){this.Zo(t),this.bi[t].ih=null},t.prototype.Zo=function(t){var e=this.bi[t],n=Date.now();e.qo+=(n-e.ih)/1e3,e.ih=n},t.prototype.th=function(t){var e=this.bi[t];e.count++,e.ih=Date.now()},t}();e.default=r,t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return new i(t,e)};var i=function(){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.jr=e,this.Vr=n,this.sh=this.eh()}return t.prototype.eh=function(){return setInterval(this.jr,this.Vr)},t.prototype.clear=function(){clearInterval(this.sh)},t}();t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t._?t:{default:t}}(n(0)),r=n(7),o=function(){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.Vo=e,this._o=n,this.nh=0}return t.prototype.rh=function(){var t=0;return(t=this.Vo.getVideoPlaybackQuality?this.Vo.getVideoPlaybackQuality().droppedVideoFrames||0:this.Vo.webkitDroppedFrameCount||this.Vo.oh||0)>0&&(this.nh=t),this.nh},t.prototype.mo=function(){var t=this._o.getStats(),e=this.rh();return{hh:(0,r.ah)(this.Vo),oh:e,timeSpentPlaying:t[i.default.ro].qo,timeSpentPaused:t[i.default.ao].qo,timeSpentSeeking:t[i.default.oo].qo,timeSpentEnded:t[i.default.ENDED].qo,uh:t[i.default.ho].count,timeSpentRebuffering:t[i.default.ho].qo,fh:t[i.default.co].count,timeSpentRebufferingWithBuffer:t[i.default.co].qo}},t}();e.default=o,t.exports=e.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={ah:function(t){if(void 0===t||null===t)return 0;for(var e=t.buffered,n=t.currentTime,i=n,r=0;r<e.length;r++)e.start(r)<i+.3&&e.end(r)>i&&(i=e.end(r));return Math.max(i-n,0)}},t.exports=e.default}])},function(t,e,n){var i=n(339),r=n(340),o=r;o.lh=i,o.Es=r,t.exports=o},function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,r=n;return r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]}},function(t,e,n){(function(e){var n,i=e.crypto||e.msCrypto;if(i&&i.getRandomValues){var r=new Uint8Array(16);n=function(){return i.getRandomValues(r),r}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=n}).call(e,n(76))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),r=n.n(i),o=n(169),s=n(157),a=n(163),u=n(172),c=n(171),f=n(206),h=n(154),l=n(190),d=n(134),p=n(175),v=n(170),g=n(167),y=n(181),m=n(232),E=n(221),_=n(180),T=n(159),b=n(178),w=n(40),S=n(52),A=n(25),R=n(182),L=n(2),O=n.n(L),I=n(143),C=n(160),D=n(94),P=n(244),M=n(245),N=n(168),x=n(153),k=n(184),U=n(186),F=n(54),B=n(53),G=n(215);O.a.dh(window.document.currentScript&&window.document.currentScript.src?window.document.currentScript.src:null);var j=function t(e,i,L,j,H,V,X,K){var W=this;if("string"!=typeof X||""===X||X.length>10)throw new Error("Unvalid argument in PeerAgent constructor: integration version must be a non-empty string of less than 10 characters");var Y=new I.a,q=new S.a(j,i,X,e,Y,L,V,K);O.a.Eh(q.Xi.ID_CLIENT),O.a.wh({stream:q.Qi.content}),n.t(w.a)(B.a,L),n.t(w.a)(F.a,H.prototype),n.t(A.a)(V);var z=void 0,Q=void 0,$=void 0,Z=void 0,J=void 0,tt=void 0,et=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,st=void 0,at=void 0,ut=void 0,ct=void 0,ft=void 0,ht=void 0,lt=void 0,dt=void 0,pt=!1,vt=function(){q.Xi.DEBUG&&(at=new f.a(Q,ft,q))};(ot=n.t(D.a)(q.Xi))&&(ht=new a.a(e),lt=new k.a(ht,q)),this.getSegment=function(t,e,i){return null!==i&&n.t(w.a)(F.a,i),b.a.getSegment(this,t,e,i,q)},this.getP2PData=function(t){if(!ot)throw new Error("P2P is not activated, getP2PData can't be called");var i=void 0;return pt?i=ot?Z.ph(t)||new u.a(t,Z,st,q):new c.a(t):(dt=function(t){return t.trackView&&t.trackView.type&&("audio"===t.trackView.type||"video"===t.trackView.type)}(t),ot&&(st=new _.a,J=new N.a,Q=new p.a(e,J,H,st,q),$=new v.a(q),ct=new h.a(Y,q),e.isLive()?ft=new l.a(e,Y,q):n.t(U.a)(q),Z=new g.a(Q,st,q),et=new y.a(st,Z,q),nt=new m.a(Z,q),tt=new T.a(L,q),it=n.t(E.a)(L,Z,tt,q),J.init(Z,it),z=new s.a(Z,it,q),ut=new d.a(Y,q),n.t(x.a)(q),(rt=new C.a(q)).connect(),o.a._h(it,Z,st,tt,q),lt._h(dt),vt()),pt=!0,i=new c.a(t)),dt&&lt.vh(t),it.er(t),i},this.onPlaybackError=function(t){q.gs.playbackErrorCount++,q.Xi.ENABLE_PLAYBACK_ERROR_LOGGING&&"string"==typeof t&&""!==t&&(t=t.substring(0,125),O.a.ln(new Error("Playback error: "+t)))},this.dispose=function(){q.dispose(),ot&&(pt&&(ut.dispose(),z.dispose(),Z.dispose(),it.dispose(),Q.dispose(),$.dispose(),rt.dispose(),at&&at.dispose(),ct.dispose(),ft&&ft.dispose()),ht.mh()),e&&r()(e,new G.a),P.a.gh(q.Zi)},this.setMediaElement=function(t){W.mediaElement=t},Object.defineProperty(this,"mediaElement",{get:function(){return Y.mediaElement},set:function(t){q.gs.mediaElementSet++,Y.mediaElement!==t&&q.gs.mediaElementChanged++,Y.mediaElement=t}}),Object.defineProperty(this,"p2pDownloadOn",{get:function(){return q.ls},set:function(t){t!==q.ls&&(q.ls=t,q.us.$t("p2pDownloadToggle",t))}}),Object.defineProperty(this,"version",{get:function(){return t.version}}),Object.defineProperty(this,"p2pUploadOn",{get:function(){return q.ds},set:function(t){t!==q.ds&&(q.ds=t,q.us.$t("p2pUploadToggle",t))}}),Object.defineProperty(this,"isP2PEnabled",{get:function(){return n.t(D.a)(q.Xi)}}),Object.defineProperty(this,"stats",{get:function(){return R.a.get(Q,q,ft,Y)}}),Object.defineProperty(this,"nextSegmentPrebuffered",{get:function(){return q.Qi.nextSegmentPrebuffered}}),Object.defineProperty(this,"PublicAPI",{get:function(){return M.a.get(W)}}),P.a.Th(q.Zi,this)};Object.defineProperty(j,"StreamTypes",{get:function(){return A.b}}),Object.defineProperty(j,"version",{get:function(){return"4.13.6"}}),P.a.Sh(j),e.default=j},function(t,e,n){t.exports=n(132).default},function(t,e,n){var i=n(142),r=n(141),s=n(135),a=n(137),u=n(20),c=n(0),f=n(1),h=function(){function t(e,n){o(this,t),this.Ah=0,this.Mi=n,this.We=new u.a,this.Rh=new s.a(n),this.Ch=new i.a(n),this.Dh=new r.a(e,n),this.bh=new a.a(e,n),this.Mi.us.xt(c.a.R.C,this.de.bind(this))}return t.prototype.de=function(){this.Mi.Xi.CONTENT_ACTIVATED&&(this.Mi.Xi.ANALYTICS.ENABLE_STATS_SENDER&&this.yh(),this.Mi.Xi.ANALYTICS.ENABLE_CONTROL_SENDER&&this.Nh(),this.Mi.Xi.RAMP_UP_ACTIVATED&&(this.Ih(),this.Oh=this.Lh.bind(this),window.addEventListener("beforeunload",this.Oh),this.Ph=this.Lh.bind(this),this.Mi.us.xt(c.a.O.ENDED,this.Ph)))},t.prototype.Lh=function(){this.Ch.Mh()},t.prototype.dispose=function(){this.We.oi(),this.Rh.dispose(),this.Dh.dispose(),this.bh.dispose(),window.removeEventListener("beforeunload",this.Oh),this.Mi.us.removeListener(c.a.O.ENDED,this.Ph)},t.prototype.Ih=function(){var t=this;if(this.Ah<this.Mi.Xi.ANALYTICS.TRAFFIC_INTERVAL_ARRAY.length-1){var e=n.t(f.b)(function(){t.Ch.Mh(),t.Ih()},this.Mi.Xi.ANALYTICS.TRAFFIC_INTERVAL_ARRAY[this.Ah]);this.We.register(e),this.Ah++}else{var i=this.Mi.Xi.ANALYTICS.TRAFFIC_INTERVAL_ARRAY[this.Mi.Xi.ANALYTICS.TRAFFIC_INTERVAL_ARRAY.length-1],r=this.Ch.Mh.bind(this.Ch),o=n.t(f.a)(r,i);this.We.register(o)}},t.prototype.yh=function(){var t=n.t(f.a)(this.Dh.kh.bind(this.Dh),this.Mi.Xi.ANALYTICS.STATS_INTERVAL);this.We.register(t)},t.prototype.Nh=function(){var t=n.t(f.a)(this.Dh.Uh.bind(this.Dh),this.Mi.Xi.ANALYTICS.CONTROL_INTERVAL);this.We.register(t)},t}();e.a=h},function(t,e,n){var i=n(104),r=n.n(i),s=n(50),a=n(0),u=n(83),c=n(136),f=n(78),h=function(){function t(e){var n=this;o(this,t),this.Bh=!1,this.do=c.a.Fh,this.Gh=function(){n.do=c.a.Hh,n.xh()},this.jh=function(t){switch(t.reason){case u.a.Oe.Le:n.do=c.a.Le;break;case u.a.Oe.ERROR:n.do=c.a.Vh;break;case u.a.Oe.Pe:n.do=c.a.Pe;break;case u.a.Oe.Me:n.do=c.a.Me;break;default:n.do=c.a.Fh}n.xh()},this.fn=function(){n.do=c.a.Kh,n.xh()},this.Mi=e,this.Wh=new s.a(e,"p2pconfig"),this.Mi.us.xt(a.a.R.D,this.Gh),this.Mi.us.xt(a.a.ft.pt,this.jh),this.Mi.us.xt(a.a.ft._t,this.jh),this.Mi.us.xt(a.a.ft.wt,this.fn)}return t.prototype.xh=function(){if(!this.Bh&&this.do!==c.a.Le){var t={};t.activateP2P=this.Mi.Xi.ALLOW_P2P,t.debug=this.Mi.p2pConfig.debug||!1,t.deviceInfo=this.Mi.Xi.DEVICE_INFO,t.trackerUrl=this.Mi.Xi.TRACKER_URL,t.backendUrl=this.Mi.Xi.DISTRIBUTOR.URL,t.signalingUrl=this.Mi.Xi.SIGNALING_URL,t.analyticsUrl=this.Mi.Xi.ANALYTICS.KLARA_URL,t.rangeRequestEnabled=this.Mi.Xi.RANGE_REQUEST_DETECTION,t.mobileBrowserEnabled=this.Mi.Xi.ENABLE_MOBILE_BROWSER,t.enableStunServers=this.Mi.Xi.ENABLE_STUN;var e={live:this.Mi.Qi.isLive(),confLabel:this.Mi.Xi.CONF_LABEL,origin:"",referrer:"",href:"",p2pConfig:r()({},t,{liveCacheSize:this.Mi.Xi.LIVE.P2P_CACHE_MAX_SIZE/1048576,vodCacheSize:this.Mi.Xi.P2P_CACHE_MAX_SIZE/1048576}),rampUpActivated:this.Mi.Xi.RAMP_UP_ACTIVATED,statsSender:this.Mi.Xi.ANALYTICS.ENABLE_STATS_SENDER,controlSender:this.Mi.Xi.ANALYTICS.ENABLE_CONTROL_SENDER,trackerId:this.Mi.status.un()||"",state:this.do};document&&document.referrer&&(e.referrer=document.referrer),window&&(window.origin&&(e.origin=window.origin),window.location&&window.location.href&&(e.href=window.location.href)),n.t(f.a)(e,this.Mi.Rs),this.Wh.send(e),this.Bh=!0}},t.prototype.dispose=function(){this.Mi.us.removeListener(a.a.R.D,this.Gh),this.Mi.us.removeListener(a.a.ft.pt,this.jh),this.Mi.us.removeListener(a.a.ft._t,this.jh),this.Mi.us.removeListener(a.a.ft.wt,this.fn)},t}();e.a=h},function(t,e,n){e.a={Hh:"no_distributor",Kh:"tracker_ready",Vh:"tracker_error",Pe:"ramp_up_deactivated",Le:"content_deactivated",Me:"qos_tester",Fh:"unknown"}},function(t,e,n){var i=n(0),r=n(1),s=function(){function t(e,i){o(this,t),this.Wo=null,this.Mi=i,null===e.mediaElement||this.Mi.Qi.isLive()||(this.$h=e.mediaElement,this.Wo=n.t(r.a)(this.Yh.bind(this),100))}return t.prototype.Yh=function(){if(null!==this.$h){var t=this.$h.duration,e=this.$h.currentTime;t&&t-e<.3&&(null!==this.Wo&&(this.Wo.clear(),this.Wo=null),this.Mi.us.$t(i.a.O.ENDED))}},t.prototype.dispose=function(){null!==this.Wo&&this.Wo.clear()},t}();e.a=s},function(t,e,n){var i=n(37),r=n.n(i),s=n(2),a=n.n(s),u=function(){function t(){o(this,t)}return t.send=function(t,e,n){var i=n.Xi,o=n.status,s={timeout:i.ANALYTICS.TIMEOUT_DELAY,ae:i.ANALYTICS.RETRY_NUMBER,ue:i.ANALYTICS.RETRY_DELAY,headers:{Authorization:o.an(),"Content-Type":"application/json;charset=UTF-8"}},u=new r.a(r.a.Methods.pe,t,s);u.Ee=!0,u.send(e).catch(function(t){a.a.ln(new Error("Could not send analytics payload: "+t.message+". Status: "+t.status))})},t}();e.a=u},function(t,e,n){var i=function(){function t(e){o(this,t),this.Mi=e,this.de()}return t.prototype.de=function(){var t=this;this.reset(),this.Mi.us.Yt("p2pUploadToggle",function(e){e||(t.qh=!1)}),this.Mi.us.Yt("p2pDownloadToggle",function(e){e||(t.zh=!1)})},t.prototype.reset=function(){this.zh=this.Mi.ls,this.qh=this.Mi.ds},f(t,[{key:"p2pDownloadAlwaysOn",get:function(){return this.zh}},{key:"p2pUploadAlwaysOn",get:function(){return this.qh}}]),t}();e.a=i},function(t,e,n){var i=n(58),r=n(17),s=n(0),a=function(){function t(e){o(this,t),this.Xh=new i.a,this.Qh=new i.a,this.Zh=new i.a,this.Jh=new i.a,this.Mi=e,e.us.Yt(s.a.G.V,this.tc,this),e.us.Yt(s.a.G.H,this.ic,this),e.us.Yt(s.a.G.j,this.ic,this)}return t.prototype.ic=function(t){var e=t.sc,n=Math.max(0,e-this.Mi.Xi.PEER_POOL_LIMIT);this.Zh.Qs(n),this.Jh.Qs(n>0?1:0)},t.prototype.tc=function(t){var e=t.sc,n=t.ec;this.Xh.Qs(e),this.Qh.Qs(n)},t.prototype.nc=function(){return n.t(r.b)(this.Xh.qs(),2)},t.prototype.rc=function(){return n.t(r.b)(this.Qh.qs(),2)},t.prototype.oc=function(){return this.Zh.qs()},t.prototype.hc=function(){return this.Jh.zs().value},t}();e.a=a},function(t,e,n){var i=n(6),r=n.n(i),s=n(50),a=n(140),u=n(139),c=n(12),f=n(17),h=n(145),l=n(78),d=function(){function t(e,n){o(this,t);var i=n.Xi,r=n.Qi,f=n.status,l=n.ps,d=n.vs,p=n.ms,v=n.Ss,g=n.Ts;this.Ue=i,this.Re=f,this.cc=l,this.ac=d,this.Ge=p,this.uc=g,this.Fe=r,this.fc=v,this.Wh=new s.a(n,"stats"),this.lc=n._s,this.dc=n.gs,this.Ec=n.Rs,this.wc=Date.now(),this._c=new c.b,this.pc=new c.b,this.vc=new c.b,this.mc=new c.b,this.gc=new c.b,this.Tc=new c.b,this.Sc=new c.b,this.Ac=new c.b,this.Rc=new c.b,this.Cc=new c.b,this.Dc=new c.b,this.bc=new c.b,this.yc=new c.b,this.Nc=new c.b,this.Ic=new c.b,this.Oc=new c.b,this.Lc=new c.b,this.Pc=new c.b,this.Mc=new c.b,this.kc=new c.b,this.Uc=new c.b,this.Bc=new c.b,this.Fc=new a.a(n),this.Gc=new u.a(n),this.Hc=new c.b,this.xc=new c.b,this.jc=new c.b,this.Vc=new c.b,this.Kc=new c.b,this.Wc=new c.b,this.$c=new c.b,this.Yc=new c.b,this.qc=new c.b,this.zc=new c.b,this.Xc=new c.b,this.Qc=new c.b,this.Zc=new c.b,this.Jc=new c.b,this.ta=new c.b,this.ia=new c.b,this.sa=new c.b,this.ea=new c.b,this.na=new c.b,this.ra=new c.b,this.oa=new c.b,this.ha=new c.b,this.ca=new c.b,this.aa=new c.b,this.ua=new c.b,this.fa=new c.b,this.la=new c.b,this.da=new c.b,this.Ea=new c.b,this.wa=new c.b,this._a=new c.b,this.pa=new c.b,this.va=new c.b,this.ma=new c.b,this.ga=new c.b,this.Ta=new c.b,this.Sa=new c.b,this.Aa=new c.b,this.Ra=new c.b,this.Ca=new c.b,this.Da=new c.b,this.ba=new c.b,this.ya=new c.b,this.Na=new c.b,this.Ia=new c.b,this.Oa=new c.b,this.La=new c.b,this.Pa=0,this.Ma=new c.b,this.ka=new c.b,this.Ua=new c.b,this.Ba=new c.b,this.Fa=new c.b,this.Ga=new c.b,this.Ha=new c.b,this.xa=new c.b,this.ja=new c.b,this.Va=new c.b,this.Ka=new c.b,this.Wa=new c.b,this.$a=new c.b,this.Ya=new c.b,this.qa=new c.b,this.za=new c.b,this.Xa=new c.b,this.Qa=new h.a(e,n),this.Za=new c.b,this.Ja=new c.b,this.tu={},this.iu=new c.b,this.Mi=n}return t.prototype.su=function(){return Date.now()-this.wc},t.prototype.eu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return isNaN(this.tu[t])?this.su():Date.now()-this.tu[t]},t.prototype.nu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";this.tu[t]=Date.now()},t.prototype.ru=function(){var t=this.Fc.oc(),e=this.Fc.hc(),n=this.lc.ou.Ir();t=e>0?t*this.eu()/e:0;var i=this.lc.hu.Ir();return{count:this.Fc.nc(),sameTrackCount:this.Fc.rc(),match:this.Qc.ti(this.lc.match),excessMatch:this.Zc.ti(this.lc.excessMatch),openedMatch:this.zc.ti(this.lc.openedMatch),openedOffer:this.Xc.ti(this.lc.openedOffer),unansweredOffer:this.Jc.ti(this.lc.unansweredOffer),offer:this.ta.ti(this.lc.offer),locked:this.lc.locked.qs(),loosers:this.lc.loosers.qs(),active:this.ia.ti(this.lc.active),transfer:this.sa.ti(this.lc.transfer),denied:this.ea.ti(this.lc.denied),droppedSameTrack:this.na.ti(this.lc.droppedSameTrack),droppedOtherTrack:this.ra.ti(this.lc.droppedOtherTrack),offerTimeout:this.oa.ti(this.lc.offerTimeout),answerTimeout:this.ha.ti(this.lc.answerTimeout),timeoutNewConnection:this.ca.ti(this.lc.timeoutNewConnection),timeoutCheckingConnection:this.aa.ti(this.lc.timeoutCheckingConnection),timeoutFailedConnection:this.ua.ti(this.lc.timeoutFailedConnection),timeoutNewIce:this.fa.ti(this.lc.timeoutNewIce),timeoutGatheringIce:this.la.ti(this.lc.timeoutGatheringIce),timeoutCompleteIce:this.da.ti(this.lc.timeoutCompleteIce),disconnected:this.Ea.ti(this.lc.disconnected),lateMessage:this.wa.ti(this.lc.lateMessage),sampledPUC:this.lc.sampledPUC,peerPoolUploadCapacity:this.lc.peerPoolUploadCapacity.qs(),exclusionSize:this.lc.exclusionSize,successPeerConnectionAttemptDuration:this.lc.successPeerConnectionAttemptDuration.Ir()||0,failedPeerConnectionAttemptDuration:this.lc.failedPeerConnectionAttemptDuration.Ir()||0,sampledConnectionDuration:i?Math.round(i.cu):0,sampledTimeSpentOnSameTrack:i?Math.round(i.au):0,totalConnectionDuration:Math.round(this.lc.totalConnectionDuration),dataChannelBufferEmptyingTime:n?n.time:0,dataChannelBufferEmptyingAmount:n?n.uu:0,timeSpentAbovePeerLimit:e,averageOverLimitPeerCount:t,timeoutLocalSdp:this._a.ti(this.lc.timeoutLocalSdp),timeoutRemoteSdp:this.pa.ti(this.lc.timeoutRemoteSdp),timeoutLocalSdpWithStun:this.va.ti(this.lc.timeoutLocalSdpWithStun),timeoutRemoteSdpWithStun:this.ma.ti(this.lc.timeoutRemoteSdpWithStun),timeoutWithLocalStunIce:this.ga.ti(this.lc.timeoutWithLocalStunIce),timeoutWithRemoteStunIce:this.Ta.ti(this.lc.timeoutWithRemoteStunIce),sampledP2pMeanRtt:this.lc.sampledP2pMeanRtt}},t.prototype.fu=function(){if(this.fc){var t=n.t(f.b)(this.fc.lu(),2),e=n.t(f.b)(this.fc.du(),2),i=n.t(f.b)(this.fc.Eu(),2),r=this.fc.wu(),o=r.Xs?n.t(f.b)(r.value/r.Xs,2):n.t(f.b)(r.value,2),s=n.t(f.b)(1e3*this.Ya.ti(this.fc._u)/(r.value+this.fc.bufferedAmount),2),a=this.fc.alwaysDynamicBuffer,u=n.t(f.b)(this.fc.lowerBufferTargetNetChangePerRebound,2),c=this.fc.sampledHighLowBufferTargetGap,h=n.t(f.b)(this.fc.pu.qs(),2);return{bufferState:this.fc.bufferState,alwaysDynamicBuffer:a,timeSpentOnEdgeRatio:t,timeSpentWithoutPeerRatio:e,timeSpentDynamicRatio:o,timeSpentTopSeederRatio:i,bufferRefillRatio:s,lowerBufferTargetNetChangePerRebound:u,timeLowerTargetAboveLiveEdgeRatio:h,sampledHighLowBufferTargetGap:c}}},t.prototype.vu=function(){var t=this.uc.p2pUsefulEstimate,e=this.Pc.ti(this.uc.concurrentP2pDownloaded),n=this.Mc.ti(this.uc.concurrentP2pDownloadCount),i=this.kc.ti(this.uc.cdnEstimationCount),r=this.Uc.ti(this.uc.p2pSpeedWindowsCount),o=this.Bc.ti(this.uc.zeroP2pSpeedWindowsCount),s=this.uc.bandwidthEstimateCV,a=this.Za.ti(this.uc.feebackCount),u=this.Ja.ti(this.uc.zeroDurationFeedbackCount),c=this.iu.ti(this.uc.trackSwitchWithPeers);return this.uc.mu(),{p2pUsefulEstimate:t,concurrentP2pDownloaded:e,concurrentP2pDownloadCount:n,cdnEstimationCount:i,p2pSpeedWindowsCount:r,zeroP2pSpeedWindowsCount:o,bandwidthEstimateCV:s,feebackCount:a,zeroDurationFeedbackCount:u,trackSwitchWithPeers:c}},t.prototype.gu=function(){var t=this.Re.Tu(),e=this.Re.Su(),i=this.Re.Au(),o=this.Re.un(),s={PP:this.cc.Ru,PC:this.cc.Cu,CP:this.cc.Du,CC:this.cc.bu,HP:this.cc.yu,HD:this.cc.Nu,M:this.cc.Iu},a=s.PP+s.PC+s.CP+s.CC+s.HP+s.HD+s.M,u=this.pc.ti(this.cc.cdnDownloaded),c=u,h=this._c.ti(this.cc.p2pUseful),l=this.vc.ti(this.cc.p2pConsumed),d=this.mc.ti(this.cc.cdnConsumed),p={p2pMediaDownloaded:this.gc.ti(this.cc.p2pMediaDownloaded),p2pHeadersDownloaded:this.Sc.ti(this.cc.p2pHeadersDownloaded),p2pMessagesDownloaded:this.Tc.ti(this.cc.p2pMessagesDownloaded),p2pMessagesCount:this.Ac.ti(this.cc.p2pMessagesCount),cdnDownloaded:u,p2pUseful:h,cdnUseful:c,p2pConsumed:l,cdnConsumed:d,p2pUploaded:this.Rc.ti(this.cc.p2pUploaded),multipleDl:{PP:this.Cc.ti(s.PP),PC:this.Dc.ti(s.PC),CP:this.bc.ti(s.CP),CC:this.yc.ti(s.CC),HP:this.Nc.ti(s.HP),HD:this.Ic.ti(s.HD),M:this.Oc.ti(s.M),total:this.Lc.ti(a)}},v=this.Hc.ti(this.ac.Ou),g=this.jc.ti(this.ac.Lu),y=this.xc.ti(this.ac.Pu),m=this.Vc.ti(this.ac.Mu),E=this.Kc.ti(this.ac.ku),_=this.Wc.ti(this.ac.Uu),T=this.$c.ti(this.ac.Bu),b=this.eu(),w=b>0?Math.round(v*this.Ue.CHUNK_SIZE*8/b):0,S=b>0?Math.round((m+E)*this.Ue.CHUNK_SIZE*8/b):0,A=this.Yc.ti(this.ac.Fu),R=this.qc.ti(this.ac.Gu),L={receivedChunkRequestBitrate:w,sentChunkRequestBitrate:S,receivedChunkRequestsMissedRatio:g>0?n.t(f.b)(y/g,2):0,sentSafeChunkRequests:m,sentUnsafeChunkRequests:E,sentSafeChunkRequestsTimeout:_,sentUnsafeChunkRequestsTimeout:T,uploadQueueExpirationRatio:v>0?n.t(f.b)(1-g/v,2):0,gracedChunks:A,expiredGraceChunks:R},O=this.qa.ti(this.dc.abortFragmentCount),I={emergencyTrackSwitchCPM:this.Xa.ti(this.dc.Hu)/(b/6e4)};this.Qa.xu&&(I=r()(I,this.Qa.vo()));var C=this.Fe.isAlwaysDvr&&this.Fe.isLive();this.Fe.ju();var D={transfers:p,efficiency:L,qos:I,peers:this.ru(),buffer:this.fu(),abr:this.vu(),live:this.Fe.isLive(),signalingServerConnected:t,trackerConnected:e,trackerVersion:i,trackerId:o,sessionDuration:this.su(),timespan:b,options:{p2pDownloadAlwaysOn:this.Gc.p2pDownloadAlwaysOn,p2pUploadAlwaysOn:this.Gc.p2pUploadAlwaysOn},confLabel:this.Ue.CONF_LABEL,qosTester:this.Ue.QOS_P2P_DISABLED,mediaDuration:Math.round(this.dc.duration),videoTrackCount:this.dc.videoTrackCount,minBitrate:this.dc.minBitrate,maxBitrate:this.dc.maxBitrate,aggPlaybackErrorCount:this.dc.playbackErrorCount,playbackErrorCount:this.za.ti(this.dc.playbackErrorCount),abortFragmentCount:O,isAlwaysDvr:C,rampUpActivated:this.Ue.RAMP_UP_ACTIVATED,mediaElementSet:this.dc.mediaElementSet,mediaElementChanged:this.dc.mediaElementChanged};return this.nu(),this.Gc.reset(),D},t.prototype.Vu=function(){var t=this.Sa.ti(this.Ge.Ku),e=this.Aa.ti(this.Ge.Wu),i=this.Ra.ti(this.Ge.$u),r=this.Ca.ti(this.Ge.Yu),o=i>0?n.t(f.b)(t/i,2):0,s=i>0?n.t(f.b)(e/i,2):0,a=i>0?r/i:0,u=this.Ge.qu(),c=this.Da.ti(this.Ge.zu),h=this.ba.ti(this.Ge.Xu),l=this.ya.ti(this.Ge.Qu),d=this.Na.ti(this.Ge.Zu),p=this.Ia.ti(this.Ge.checkHeartbeatFailed),v=this.Oa.ti(this.Ge.getSegmentSuccess),g=this.La.ti(this.Ge.getSegmentFallback),y=this.Ma.ti(this.Ge.sentOfferSdpVolume),m=this.ka.ti(this.Ge.sentAnswerSdpVolume),E=this.Ua.ti(this.Ge.sentIceCandidatesVolume),_=this.Ba.ti(this.Ge.signalingMessagesCount),T=this.Fa.ti(this.Ge.sentDistributorRootCount),b=this.Ga.ti(this.Ge.sentTrackerInitCount),w=this.Ha.ti(this.Ge.sentTrackerPeersCount),S=this.xa.ti(this.Ge.sentTrackerTracksCount),A={live:this.Fe.isLive(),meanMissedIceCandidate:o,meanGatheredIceCandidate:s,earlyIceCandidateGatheringRatio:a,sampledIceGatheringDuration:u,p2pSgtCheckSuccess:c,p2pSgtCheckFail:h,hybridSgtCheckSuccess:l,hybridSgtCheckFail:d,checkHeartbeatFailed:p,getSegmentSuccess:v,getSegmentFallback:g,sessionDuration:this.su(),timespan:this.eu("control"),confLabel:this.Ue.CONF_LABEL,sentOfferSdpVolume:y,sentAnswerSdpVolume:m,sentIceCandidatesVolume:E,signalingMessagesCount:_,sentDistributorRootCount:T,sentTrackerInitCount:b,sentTrackerPeersCount:w,sentTrackerTracksCount:S,rampUpActivated:this.Ue.RAMP_UP_ACTIVATED,rangeRequestStatus:this.Fe.rangeRequestStatus.status};return this.nu("control"),A},t.prototype.kh=function(){var t=this.gu();t.timespan<2*this.Ue.ANALYTICS.STATS_INTERVAL&&(n.t(l.a)(t,this.Ec),this.Wh.send(t),this.Mi.os=Date.now())},t.prototype.Uh=function(){var t=this.Vu();t.timespan<2*this.Ue.ANALYTICS.CONTROL_INTERVAL&&(n.t(l.a)(t,this.Ec),this.Wh.send(t,"control"))},t.prototype.dispose=function(){this.Qa.dispose()},t}();e.a=d},function(t,e,n){var i=n(50),r=n(12),s=n(0),a=function(){function t(e){var n=this;o(this,t),this.Mi=e,this.Wh=new i.a(e,"traffic"),this.Ju=new r.b,this.tf=new r.b,this.if=new r.b,this.sf=Date.now(),this.Mi.us.Yt(s.a.vt.gt,function(){n.Ea=!0}),this.Mi.us.Yt(s.a.vt.Tt,function(){n.Ea=!1})}return t.prototype.ef=function(){var t=this.Ju.ti(this.Mi.ps.p2pUseful),e=this.tf.ti(this.Mi.ps.cdnDownloaded),n=this.if.ti(this.Mi.ps.p2pUploaded),i=this.eu(),r={live:this.Mi.Qi.isLive(),cdn:e,p2p:t,upload:n,timespan:i};return this.nu(),r},t.prototype.eu=function(){return Date.now()-this.sf},t.prototype.nu=function(){this.sf=Date.now()},t.prototype.Mh=function(){if(!this.Ea){var t=this.ef();this.Wh.send(t,"usage")}},t}();e.a=a},function(t,e,n){var i=function(){function t(){o(this,t),this.$h=null}return f(t,[{key:"mediaElement",get:function(){return this.$h},set:function(t){this.$h=t}}]),t}();e.a=i},function(t,e,n){var i=n(12),r=n(17),s=function(){function t(){o(this,t),this.nf=new i.b,this.rf=new i.b,this.hf=new i.b,this.cf=new i.b,this.af=new i.b,this.uf=new i.b,this.ff=new i.b,this.lf=new i.b,this.df=new i.b(Date.now()),this.Ef=new i.b,this.wf=new i.b}return t.prototype._f=function(t,e,i,o){var s=this.df.ti(Date.now()),a=this.ff.ti(t)/(s/6e4),u=this.lf.ti(e)/(s/6e4),c=this.Ef.ti(i)/(s/6e4),f=this.wf.ti(o)/(s/6e4);return{rebufferingCPM:n.t(r.b)(a,2),rebufferingWithBufferCPM:n.t(r.b)(u,2),droppedFrameCPM:n.t(r.b)(c,2),trackSwitchCPM:n.t(r.b)(f,2)}},t.prototype.format=function(t,e){t.oh<this.Ef.si&&this.Ef.ii(t.oh);var i=this._f(t.uh,t.fh,t.oh,e);return{rebufferingCPM:i.rebufferingCPM,rebufferingWithBufferCPM:i.rebufferingWithBufferCPM,droppedFrameCPM:i.droppedFrameCPM,trackSwitchCPM:i.trackSwitchCPM,timeSpentPlaying:n.t(r.b)(this.nf.ti(t.timeSpentPlaying),2),timeSpentPaused:n.t(r.b)(this.rf.ti(t.timeSpentPaused),2),timeSpentEnded:n.t(r.b)(this.uf.ti(t.timeSpentEnded),2),timeSpentRebuffering:n.t(r.b)(this.hf.ti(t.timeSpentRebuffering),2),timeSpentRebufferingWithBuffer:n.t(r.b)(this.cf.ti(t.timeSpentRebufferingWithBuffer),2),timeSpentSeeking:n.t(r.b)(this.af.ti(t.timeSpentSeeking),2),startupTime:t.startupTime,endedOnce:t.endedOnce}},t}();e.a=s},function(t,e,n){var i=n(128),r=n.n(i),s=n(144),a=n(1),u=n(0),c=function(){function t(e,n){o(this,t),this.pf=-1,this.Be=n.us,this.vf=this.mf.bind(this),n.us.Yt(u.a.N.I,this.vf),null!==e.mediaElement&&(this.gf=!0,this.Tf=new r.a(e.mediaElement,a.a),this.Sf=new s.a)}return t.prototype.mf=function(){this.pf++},t.prototype.vo=function(){if(!this.gf)throw new Error("getQoSAnalytics was called on non-initialized QoSAnalyticsHandler");var t=this.Tf.vo();return this.Sf.format(t,this.pf)},t.prototype.dispose=function(){this.Tf&&this.Tf.dispose(),this.Be.removeListener(u.a.N.I,this.vf)},f(t,[{key:"xu",get:function(){return this.gf}}]),t}();e.a=c},function(t,e,n){var i=n(6),r=n.n(i),s=n(79),a=function(){function t(){o(this,t),this.Af=null,this.Rf={}}return t.prototype.Cf=function(t){t.filename&&t.filename===this.Af&&this.ln(new s.a(t))},t.prototype.hi=function(t,e){throw arguments.length>2&&void 0!==arguments[2]&&arguments[2],new Error("AbstractError#notify should be implemented")},t.prototype.ln=function(t,e){throw new Error("AbstractError#notifyError should be implemented")},t.prototype.Df=function(){return"4.13.6".split("-")[0]},t.prototype.wh=function(t){r()(this.Rf,t)},t.prototype.dh=function(t){this.Af=t},t.prototype.Eh=function(t){},t}();e.a=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var s=n(146),a=n(148),u=n.n(a),c=n(77);n(79);var f=function(t){function e(){var n;return o(this,e),n=i(this,t.call(this)),window.addEventListener("error",n.Cf.bind(n)),u.a.apiKey=c.a.ERRORS.API_KEY,u.a.bf=c.a.ERRORS.HANDLER,u.a.yf=c.a.ERRORS.STAGES,u.a.Nf=!0,u.a.releaseStage="production",u.a.If=!1,u.a.appVersion=n.Df(),n}return r(e,t),e.prototype.hi=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warning";n.match(/^(warning|info|error)$/)||(n="warning"),u.a.hi(t,e,this.Rf,n)},e.prototype.ln=function(t,e){u.a.Of(t,{groupingHash:e||t.message})},e.prototype.wh=function(e){t.prototype.wh.call(this,e),u.a.metaData=this.Rf},e.prototype.Eh=function(t){u.a.userId=t},e}(s.a);e.default=new f},function(t,e,n){var i,r;!function(n){function o(){_=!1}function s(t){var e=c("disableLog"),n=window.console;void 0===n||void 0===n.log||e||n.log("[Bugsnag] "+t)}function a(t,e,n){if(n>=c("maxDepth",E))return encodeURIComponent(e)+"=[RECURSIVE]";n=n+1||1;try{if(window.Node&&t instanceof window.Node)return encodeURIComponent(e)+"="+encodeURIComponent(p(t));var i=[];for(var r in t)if(t.hasOwnProperty(r)&&null!=r&&null!=t[r]){var o=e?e+"["+r+"]":r,s=t[r];i.push("object"==(void 0===s?"undefined":h(s))?a(s,o,n):encodeURIComponent(o)+"="+encodeURIComponent(s))}return i.join("&")}catch(t){return encodeURIComponent(e)+"="+encodeURIComponent(""+t)}}function u(t,e,n){if(null==e)return t;if(n>=c("maxDepth",E))return"[RECURSIVE]";t=t||{};for(var i in e)if(e.hasOwnProperty(i))try{e[i].constructor===Object?t[i]=u(t[i],e[i],n+1||1):t[i]=e[i]}catch(n){t[i]=e[i]}return t}function c(t,e){T=T||function(t){var e={},n=/^data\-([\w\-]+)$/;if(L)for(var i=L.attributes,r=0;r<i.length;r++){var o=i[r];n.test(o.nodeName)&&(e[o.nodeName.match(n)[1]]=o.value||o.nodeValue)}return e}();var n=void 0!==y[t]?y[t]:T[t.toLowerCase()];return"false"===n&&(n=!1),void 0!==n?n:e}function f(t,e){var n=c("apiKey");if(function(t){return!(!t||!t.match(b))||(s("Invalid API key '"+t+"'"),!1)}(n)&&m){m-=1;var i=c("releaseStage","production"),r=c("notifyReleaseStages");if(r){for(var o=!1,f=0;f<r.length;f++)if(i===r[f]){o=!0;break}if(!o)return}var h=[t.name,t.message,t.stacktrace].join("|");if(h!==g){g=h,v&&((e=e||{})["Last Event"]=function(t){return{millisecondsAgo:new Date-t.timeStamp,type:t.type,which:t.which,target:p(t.target)}}(v));var l={notifierVersion:A,apiKey:n,projectRoot:c("projectRoot")||window.location.protocol+"//"+window.location.host,context:c("context")||window.location.pathname,userId:c("userId"),user:c("user"),metaData:u(u({},c("metaData")),e),releaseStage:i,appVersion:c("appVersion"),url:window.location.href,userAgent:navigator.userAgent,language:navigator.language||navigator.userLanguage,severity:t.severity,name:t.name,message:t.message,stacktrace:t.stacktrace,file:t.file,lineNumber:t.lineNumber,columnNumber:t.columnNumber,payloadVersion:"2"},d=y.Lf;if("function"==typeof d&&!1===d(l,l.metaData))return;if(0===l.lineNumber&&/Script error\.?/.test(l.message))return s("Ignoring cross-domain script error. See https://bugsnag.com/docs/notifiers/js/cors");!function(t,e){if(t+="?"+a(e)+"&ct=img&cb="+(new Date).getTime(),"undefined"!=typeof BUGSNAG_TESTING&&y.Pf)y.Pf(t,e);else if("xhr"===c("notifyHandler")){var n=new XMLHttpRequest;n.open("GET",t,!0),n.send()}else(new Image).src=t}(c("endpoint")||S,l)}}}function l(){var t,e;try{throw new Error("")}catch(n){t="<generated>\n",e=d(n)}if(!e){t="<generated-ie>\n";var n=[];try{for(var i=arguments.Zs.caller.caller;i&&n.length<10;){var r=w.test(i.toString())?RegExp.$1||"[anonymous]":"[anonymous]";n.push(r),i=i.caller}}catch(t){s(t)}e=n.join("\n")}return t+e}function d(t){return t.stack||t.Mf||t.stacktrace}function p(t){if(t){var e=t.attributes;if(e){for(var n="<"+t.nodeName.toLowerCase(),i=0;i<e.length;i++)e[i].value&&"null"!==e[i].value.toString()&&(n+=" "+e[i].name+'="'+e[i].value+'"');return n+">"}return t.nodeName}}var v,g,y={},m=10,E=5;y.kf=function(){return window.Bugsnag=n,void 0===n&&delete window.Bugsnag,y},y.refresh=function(){m=10},y.Of=function(t,e,n,i){t&&(e&&"string"!=typeof e&&(n=e,e=void 0),n||(n={}),function(t){var e=function(){var t=document.currentScript||void 0;if(!t&&_){var e=document.scripts||document.getElementsByTagName("script");t=e[e.length-1]}return t}();e&&(t.Uf={src:e.src,content:c("inlineScript",!0)?e.innerHTML:""})}(n),f({name:e||t.name,message:t.message||t.description,stacktrace:d(t)||l(),file:t.fileName||t.Bf,lineNumber:t.lineNumber||t.line,columnNumber:t.columnNumber?t.columnNumber+1:void 0,severity:i||"warning"},n))},y.hi=function(t,e,n,i){f({name:t,message:e,stacktrace:l(),file:window.location.toString(),lineNumber:1,severity:i||"warning"},n)};var _="complete"!==document.readyState;document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.attachEvent("onload",o);var T,b=/^[0-9a-f]{32}$/i,w=/function\s*([\w\-$]+)?\s*\(/i,S="https://notify.bugsnag.com/js",A="2.5.0",R=document.getElementsByTagName("script"),L=R[R.length-1];if(window.atob&&window.ErrorEvent)try{new window.ErrorEvent("test").colno}catch(t){}window.Bugsnag=y,void 0!==(r=function(){return y}.apply(e,i=[]))&&(t.exports=r)}(window.Bugsnag)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var s=n(103),a=n.n(s),u=n(43),c=n.n(u),f=n(80),h=n(1),l=n(81),d=n(150),p=function(t){function e(n,r,s){var a;return o(this,e),(a=i(this,t.call(this,n,r,s))).de(),a}return r(e,t),e.prototype.de=function(){this.Ff=new XMLHttpRequest,this.Ff.open(this.se,this.ee,!0),this.Ff.responseType=this.oe.responseType,this.Ff.withCredentials=this.oe.withCredentials;for(var t=c()(this.oe.headers),e=0,n=t.length;e<n;e++){var i=t[e];this.Ff.setRequestHeader(i,this.oe.headers[i])}this.re=!1},e.prototype.abort=function(){this.re=!0,this.Ff.abort()},e.prototype.le=function(t){var i=this;return new a.a(function(r,o){i.re?o(new l.a(e.ui.ge)):i.oe.timeout&&(i.Gf=n.t(h.b)(function(){i.abort(),o(new l.a(e.ui.Se))},i.oe.timeout)),i.Ff.onloadend=function(){i.re?o(new l.a(e.ui.ge)):i.Ff.readyState===e.ve.DONE?i.oe.ce.indexOf(i.Ff.status)>-1?r(i.Ff.response):o(new l.a(e.ui.me,i.Ff.status)):o(new l.a(e.ui.Te))},i.Ff.onprogress=function(t){var e=new d.a(t.lengthComputable,t.loaded,t.total);i.oe.fe.onprogress(e)},i.Ff.onerror=function(){o(new l.a(e.ui.Te))},i.Ff.send(t)})},e}(f.a);e.default=p},function(t,e,n){var i=function(){function t(e,n,i){o(this,t),this.Hf=e,this.xf=n,this.Lc=i}return f(t,[{key:"lengthComputable",get:function(){return this.Hf}},{key:"loaded",get:function(){return this.xf}},{key:"total",get:function(){return this.Lc}}]),t}();e.a=i},function(t,e,n){var i=n(152);e.a=function(t){var e=[],n=t,r=function(){var t=function(){for(var t=-1,i=Date.now(),r=0;r<e.length&&i-e[r].timestamp()>n;r++)t=r;return t}();t>-1&&e.splice(0,t+1)};this.jf=function(t){r();var n=new i.a(t);e.push(n)},this.Vf=function(){if(r(),!e.length)return 0;for(var t=0,n=0;n<e.length;n++)t+=e[n].value();return t/e.length},this.Kf=function(){if(r(),!e.length)return 0;for(var t=0,n=0;n<e.length;n++)t+=e[n].value();return t}}},function(t,e,n){e.a=function(t){var e=t,n=Date.now();this.timestamp=function(){return n},this.value=function(){return e}}},function(t,e,n){e.a=function(t){var e=new i.a(t.Xi.BITRATE_ESTIMATION_WINDOW);t.us.Yt(r.a.k.U,function(){e.push(t.ps.p2pConsumed+t.ps.cdnConsumed);var n=e.delta,i=e.xs;n&&i&&(t.Ts.Wf=8*n/i)})};var i=n(57),r=n(0)},function(t,e,n){var i=n(1),r=n(243),s=n(0),a=function(){function t(e,r){o(this,t),this.$f=e,this.Mi=r,this.Yf(),this.qf=n.t(i.a)(this.Yf.bind(this),this.Mi.Xi.BUFFER_CHECK_INTERVAL)}return t.prototype.Yf=function(){this.$a=r.a.ah(this.$f),this.Mi.Ss.bufferedAmount=this.$a,this.Mi.us.$t(s.a.at.ut,this.$a)},t.prototype.dispose=function(){this.qf.clear()},t}();e.a=a},function(t,e,n){e.a=function(t,e,n){if(n.USE_COMBINED_ABR_FEEDBACK){var i=t.cdnDownloaded+t.p2pDownloaded,r=t.cdnDownloaded/i,o=void 0;if(r<n.ABR_SEGMENT_CDN_RATIO_THRESHOLD||t.cdnDownloaded<n.ABR_CDN_DL_THRESHOLD){var s=void 0;if(null!==e.zf){var a=Date.now()-e.zf,u=Math.max(0,1-a/n.ABR_CDN_DL_DECAY_TIME);s=(1-u)*e.ns+u*e.Xf}else s=e.ns;o=8*i/s}else o=8*t.cdnDownloaded/e.Xf/r;t.p2pDuration=(1-r)*o,t.cdnDuration=r*o}else e.ns>0?t.p2pDuration=8*t.p2pDownloaded/e.ns:t.p2pDuration=0,null!==e.Xf?t.cdnDuration=8*t.cdnDownloaded/e.Xf:t.cdnDuration=0}},function(t,e,s){var a=s(5),u=s.n(a),c=s(95),f=s(0),h=s(2),l=s.n(h),d=s(1),p=function(t){function e(n,r){var s;o(this,e);var a=[];return s=i(this,t.call(this,a)),s.Qf=a,s.Zf=n,s.Mi=r,s.vf=s.mf.bind(s),s.Mi.us.Yt(f.a.N.I,s.vf),s}return r(e,t),e.prototype.dispose=function(){this.Jf&&this.Jf.clear(),this.Mi.us.removeListener(f.a.N.I,this.vf)},e.prototype.flush=function(){this.Mi._s.excessMatch+=this.Qf.length,this.Qf.length=0},e.prototype.tl=function(t,e){if(null===t){var i=[],r=!0,o=!1,s=void 0;try{for(var a,c=u()(e);!(r=(a=c.next()).done);r=!0){var f=a.value.peers;i.push.apply(i,n(f))}}catch(t){o=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw s}}if(!(i.length<1)){this.flush(),this.Mi._s.match+=i.length;var h=!0,d=!1,p=void 0;try{for(var v,g=u()(i);!(h=(v=g.next()).done);h=!0){var y=v.value;this.push(y)}}catch(t){d=!0,p=t}finally{try{!h&&g.return&&g.return()}finally{if(d)throw p}}void 0===this.Jf&&this.il()}}else l.a.hi("Error asking peers from tracker:",t.message)},e.prototype.mf=function(t){t.sl&&this.flush()},e.prototype.il=function(){this.Jf=s.t(d.a)(this.el.bind(this),this.Mi.Xi.CANDIDATE_PEERS_TRY_DEQUEUE_INTERVAL)},e.prototype.el=function(){var t=Math.min(this.Qf.length,this.Zf.nl());t>0&&this.Ar(t)},e.prototype.pr=function(){return this.Qf.length>0&&this.Zf.nl()>this.Mi.Xi.RESERVED_OFFER_SLOTS},e.prototype.vr=function(t){this.Zf.Lr(t)},e}(c.a);e.a=p},function(t,e,n){var i=n(21),r=n.n(i),s=n(1),a=n(185),u=n(0),c=n(26),f=function(){function t(e,n,i){o(this,t),this.rl=!1,this.ol=r.a,this.Fn=e,this.hl=n,this.Mi=i,this.cl=this.de.bind(this),this.al=this.ul.bind(this),this.Mi.us.xt(u.a.R.C,this.cl),this.Mi.Xi.ENABLE_TRACK_EDGE_GC_BLOCK&&this.Mi.us.Yt(u.a.ot.ct,this.al)}return t.prototype.de=function(){this.sh=n.t(s.a)(this.fl.bind(this),this.Mi.Xi.CHUNK_BATCHING_INTERVAL)},t.prototype.ul=function(){this.ll(this.Mi.Xi.P2P_CACHE_GC_TRACK_EDGE_BLOCK_DURATION)},t.prototype.dispose=function(){this.sh&&this.sh.clear(),this.Mi.us.removeListener(u.a.R.C,this.cl),this.Mi.us.removeListener(u.a.ot.ct,this.al)},t.prototype.ll=function(t){var e=Date.now()+t;this.ol=Math.max(this.ol,e)},t.prototype.dl=function(){return Date.now()<this.ol},t.prototype.El=function(t,e,n,i){for(var r=this.Mi.Xi.ENABLE_FILTER_BANNED_SEEDERS?e._l.wl():e._l.all(),o=r.length,s=0;s<o;s++){for(var a=r[s],u=n.pl(a);u.vl(i)>0&&e.ml;){var c=e.Jn.gl(a,u.vl(i),i);u.Tl(i,u.vl(i)-c.size),a.Sl(t,c.Al,i,e.Jn)}if(!e.ml)break}},t.prototype.fl=function(){for(var t=new a.a(this.Mi.Xi.CHUNK_BATCHING_INTERVAL),e=this.hl.ir(),n=e.length,i=0;i<n;i++){var r=e[i],o=this.dl()?this.Fn.Qn(r):this.Fn.Rl(r);null!==o&&this.Mi.ls&&o.ml&&!this.Mi.Cs&&(this.El(r,o,t,c.a.Ei),this.El(r,o,t,c.a.wi))}},t}();e.a=f},function(t,e,n){var i=n(11),r=n.n(i),s=n(173),a=n(84),u=n.n(a),c=n(0),h=n(93),l="downloaded",d="CDNdownloaded",p=function(){function t(e,n,i,s,a){o(this,t),this.Mi=a,this.Ue=a.Xi,this.cc=a.ps,this.ac=a.vs,this.Ge=a.ms,this.Cl=a.fs,this.Fn=n,this.Dl=!1,this.bl=[],this.yl=!1,this.Nl=!0,this.Il=!1,this.Ol=!1,this.Ce=e,this.Ll=i,this.Pl=s,this.Ml=new r.a}return t.prototype.qe=function(){return this.Ml},t.prototype.kl=function(t){var e=Math.ceil(t/this.Ue.CHUNK_SIZE);h.a.clear(this.bl);for(var n=0;n<e;n++)this.bl.push("pending")},t.prototype.Ul=function(t){this.size||(this.size=t,this.Bl=new u.a(t,this.Ce,this.Mi.us),this.kl(t))},t.prototype.Fl=function(){return this.bl.length},t.prototype.Gl=function(t,e){if(!this.Dl&&this.Hl(t)){var n=this.Ue.CHUNK_SIZE,i=t*this.Ue.CHUNK_SIZE;i+n>this.size&&(n=this.size-i),this.Bl.xl(i,n,e)}else this.Dl,e(null)},t.prototype.jl=function(t,e,n){for(var i=1,r=1===e?0:t.length-1,o=1===e?t.length-1:0,s=r;s!==o;s+=e){var a=s+e;if(a>=0&&a<=t.length-1){if(1!==Math.abs(t[s]-t[a])||i===n)break;i++}}return i},t.prototype.Vl=function(){for(var t=[],e=0,n=this.bl.length;e<n;e++)"failed"!==this.bl[e]&&"pending"!==this.bl[e]||t.push(e);return t},t.prototype.Kl=function(t,e){var n=t;return t&&(n+=","),n+=""+e[0],e.length>1&&(n+="-"+e[e.length-1]),n},t.prototype.gl=function(t,e){for(var n="",i=e,r=this.Vl();r.length>0&&i>0;){var o=r[0],s=r[r.length-1],a=void 0,u=void 0;if(this.bl.length-1-s===o){var c=this.jl(r,1,i),f=this.jl(r,-1,i);a=(u=Math.max(c,f))===c?1:-1}else a=this.bl.length-1-s>o?1:-1,u=this.jl(r,a,i);var h=1===a?0:r.length-u,l=r.splice(h,u);l=1===a?l:l.reverse(),n=this.Kl(n,l),i-=l.length;for(var d=0,p=l.length;d<p;d++)this.bl[l[d]]="downloading"}return{Al:n,size:e-i}},t.prototype.Wl=function(t,e){if(!this.Bl||e>=this.bl.length)this.cc.Iu+=t.byteLength;else{if(this.Nl=!1,this.Hl(e)||this.yl){var n=this.bl[e];n===l?this.cc.Ru+=t.byteLength:(n===d||this.yl)&&(this.cc.Du+=t.byteLength)}else if(this.bl[e]=l,this.Bl.$l(t,e*this.Ue.CHUNK_SIZE),(this.Mi.Qi.isLive()&&this.Ue.ALLOW_LIVE_PUSH_SEGMENT||!this.Mi.Qi.isLive()&&this.Ue.ALLOW_VOD_PUSH_SEGMENT)&&this.Yl(),this.ql()){var i=this.Fn.Qn(this.Ce);i&&i._l.clear(),this.zl(),this.Xl(this.Bl)}this.Mi.us.$t(c.a.m.T)}},t.prototype.timeout=function(t){"downloading"===this.bl[t]&&(this.bl[t]="failed")},t.prototype.ql=function(){var t=this;return!!this.size&&this.bl.every(function(e,n){return t.Hl(n)})},t.prototype.Zn=function(){return!this.ql()&&!this.Ql&&!this.Il},t.prototype.ph=function(){var t=this;return this.Il=!0,!(this.Nl||!this.size)&&(t.Ql||t.Dl||(t.Ql=new s.a(t.Ce,t.Fn,t.Bl,t.bl,t.size,t,t.ql(),t.Pl,t.Mi)),this.Dl||(this.yl=!0),this.Ql)},t.prototype.Zl=function(){var t=this;return this.bl.reduce(function(e,n,i){return e+(t.Hl(i)?1/t.Fl()*100:0)},0)},t.prototype.Jl=function(t){this.Nl=!1,this.Bl=t,this.size||(this.kl(t.byteLength),this.size=t.byteLength),this.td(),this.cc.p2pUseful+=this.sd().p2pDownloaded},t.prototype.Yl=function(){var t=this.Zl();!this.Ol&&t>=this.Ue.MIN_CHUNK_PERCENTAGE_DOWNLOADED_FOR_HAS_SEGMENT_ANSWER&&(this.Ol=!0,this.Ll.ed(this.Ce))},t.prototype.td=function(){var t=void 0;t={start:0,end:this.Fl()},this.Ql&&this.Ql.nd()&&(t=this.Ql.nd());for(var e=t.start;e<t.end;e++){if(this.Hl(e)){var n=this.Ue.CHUNK_SIZE;e===this.Fl()-1&&(n=this.size-(this.Fl()-1)*this.Ue.CHUNK_SIZE),this.bl[e]===l?this.cc.Cu+=n:this.bl[e]===d&&(this.cc.bu+=n)}this.bl[e]=d}},t.prototype.sd=function(){var t=0,e=0,n=this.Fl()-1;if(this.size)for(var i=0;i<this.bl.length;i++){var r=void 0,o=this.bl[i];r=i<n?this.Ue.CHUNK_SIZE:this.size-n*this.Ue.CHUNK_SIZE,o===l?t+=r:o===d&&(e+=r)}return{p2pDownloaded:t,cdnDownloaded:e}},t.prototype.zl=function(){this.Dl=!0},t.prototype.rd=function(){this.Dl=!1},t.prototype.od=function(){delete this.Ql},t.prototype.Xl=function(t){var e=this,n=this.Pl.hd(this.Ce),i=function(t,i){n.hash===i?(e.Ge.zu++,e.Bl.$l(t),e.Bl.ad(),e.cc.p2pUseful+=e.size,e.rd()):(e.Ge.Xu++,e.Fn.ud(n.segmentCoord),e.cc.yu+=e.size)};t.xl(0,t.byteLength,function(t){e.Cl.fd(t,i)})},t.prototype.Hl=function(t){var e=this.bl[t];return e===l||e===d},t.prototype.dispose=function(){this.Bl&&this.Bl.ld()},f(t,[{key:"ml",get:function(){return this.bl.indexOf("failed")>=0||this.bl.indexOf("pending")>=0}}]),t}();e.a=p},function(t,e,n){var i=n(5),r=n.n(i),s=n(10),a=n.n(s),u=n(56),f=n(2),h=n.n(f),l=function(){function t(e,n){o(this,t),this.dd=new a.a,this.Ue=n.Xi;for(var i=e.getTrackList(),r=0;r<i.length;r++)this.dd.set(i[r],[])}return t.prototype.Ed=function(t){var e=this.wd(t);if(e){var i=n.t(u.a)(this.dd.get(e));if(0===i.length)i.push(t);else if(i[0].getId()>t.getId())i.unshift(t);else for(var r=i.length;r>0;r--)if(t.getId()>i[r-1].getId()){i.splice(r,0,t);break}var o=i.length;if(o>this.Ue.MAX_DISTRIBUTED_SEGMENT_LIST_LENGTH){var s=i.slice(o-this.Ue.MAX_DISTRIBUTED_SEGMENT_LIST_LENGTH);this.dd.set(e,s)}}},t.prototype.Kn=function(t){var e=this.wd(t);if(e){var i=n.t(u.a)(this.dd.get(e)).filter(function(e){return e.getId()>t.getId()});return this.dd.set(e,i),this.Ue.ENABLE_PUSH_SEGMENT_OPTIM?i.slice(0,this.Ue.NB_SEGMENT_P2P_PREBUFFER):i}return[]},t.prototype.wd=function(t){var e=!0,n=!1,i=void 0;try{for(var o,s=r()(this.dd);!(e=(o=s.next()).done);e=!0){var a=c(o.value,1)[0];if(t.isInTrack(a))return a}}catch(t){n=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw i}}h.a.ln(new Error("Pushed segment belongs to no track"))},t}();e.a=l},function(t,e,n){var i=n(37),r=n.n(i),s=n(2),a=n.n(s),u=n(0),c=function(){function t(e){o(this,t),this.Mi=e,this.ki=null,this._d=!1}return t.prototype.connect=function(){var t=this;if(this._d)a.a.ln(new Error("Tried to connect to distributor twice."));else{this._d=!0;var e=this.Mi.Xi.DISTRIBUTOR.URL+"?customer="+this.Mi.Xi.ID_CLIENT+"&content="+this.Mi.Qi.content+"&version=4.13.6";e+="&isLive="+String(this.Mi.Qi.isLive()),this.Mi.ms.sentDistributorRootCount++;var n={timeout:this.Mi.Xi.DISTRIBUTOR.TIMEOUT_DELAY,ae:this.Mi.Xi.DISTRIBUTOR.MAX_RETRY};this.ki=new r.a(r.a.Methods._e,e,n),this.ki.Ee=!0,this.ki.send().then(function(e){t.Mi.Qi.vn||(t.Mi.ys(e),t.Mi.us.$t(u.a.R.C))}).catch(function(e){t.Mi.Qi.vn||(t.Mi.Xi.DISTRIBUTOR.OVERRIDDEN||(t.Mi.Xi.ALLOW_P2P=!1,t.Mi.Os(),t.Mi.us.$t(u.a.R.D)),a.a.ln(new Error("Could not connect to distributor: "+e.message+". Status: "+e.status)))}).then(function(){t.ki=null})}},t.prototype.dispose=function(){this.ki&&(this.ki.abort(),this.ki=null)},t}();e.a=c},function(t,e,n){var s=n(82),a=n(1),u=n(26),c=n(2),h=n.n(c),l=function(t){function e(r,s,u,c,f,h){var l;o(this,e),(l=i(this,t.call(this,r,s,h))).pd=f,l.vd=u,l.Mi=c;var d=c.Qi.isLive()?c.Xi.LIVE.CHUNK_TIMEOUT:c.Xi.CHUNK_TIMEOUT;return l.md=n.t(a.b)(function(){l.gd()},d),l.Td=!1,l}return r(e,t),e.Sd=function(t,e){return t.viewToString()+"C"+e},e.prototype.isEqual=function(t){return this.id===t.id},e.prototype.gd=function(){this.Td=!0,this.pd.timeout(this.De,this.be),this.be===u.a.Ei?(this.Mi.vs.Mu++,this.Mi.vs.Uu++):this.be===u.a.wi&&(this.Mi.vs.ku++,this.Mi.vs.Bu++),this.vd.Ad(this)},e.prototype.Rd=function(t){this.pd.Wl(t,this.De),this.Td||(this.be===u.a.Ei?this.Mi.vs.Mu++:this.be===u.a.wi&&this.Mi.vs.ku++,this.md?this.md.clear():h.a.ln(new Error("clear() call on undefined DownloadChunkRequest.timeoutTimer.")))},f(e,[{key:"id",get:function(){return e.Sd(this.Ce,this.De)}},{key:"timestamp",get:function(){return this.ye}}]),e}(s.a);e.a=l},function(t,e,i){var r=i(28),s=i.n(r),a=i(5),u=i.n(a),h=i(10),l=i.n(h),d=function(){function t(e,n,i){o(this,t),this.Ll=e,this.Zf=n,this.Cd=new l.a,this.Mi=i}return t.prototype.Dd=function(t,e,n,i){this.Cd.set(t,{bd:e,yd:Date.now()+n,tag:i})},t.prototype.Nd=function(){var t=Date.now(),e=!0,n=!1,i=void 0;try{for(var r,o=u()(this.Cd.entries());!(e=(r=o.next()).done);e=!0){var s=c(r.value,2),a=s[0];s[1].yd<=t&&this.Cd.delete(a)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}},f(t,[{key:"Id",get:function(){this.Nd();var t=this.Zf.Od(),e=!0,i=!1,r=void 0;try{for(var o,a=u()(this.Ll.Ld());!(e=(o=a.next()).done);e=!0){var f=o.value;t.push(f.getId())}}catch(t){i=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw r}}var h=this.Mi.Xi.MAX_TRACKER_EXCLUSION_LENGTH-t.length;if(h>=this.Cd.size)return[].concat(n(t),n(this.Cd.keys()));var l=Date.now(),d=s()(this.Cd.entries());return d.sort(function(t,e){var n=c(t,2),i=(n[0],n[1]),r=c(e,2),o=(r[0],r[1]);return(o.yd-l)*o.bd-(i.yd-l)*i.bd}),[].concat(n(t),n(d.map(function(t){var e=c(t,2),n=e[0];return e[1],n}).slice(0,h)))}},{key:"Pd",get:function(){return this.Nd(),this.Cd}}]),t}();e.a=d},function(t,e,i){e.a=function(t){var e=[],i=[],r=t,o={};this.kd=function(t,n){e.push({Md:t,Ht:n}),r.addEventListener(t,n)},this.Ud=function(t,e){i.push({Md:t,Ht:e}),window.addEventListener(t,e)},this.mh=function(){(function(){for(var t=0;t<e.length;t++){var n=e[t].Md,i=e[t].Ht;r.removeEventListener(n,i)}e=[]})(),function(){for(var t=0;t<i.length;t++){var e=i[t].Md,n=i[t].Ht;window.removeEventListener(e,n)}i=[]}()},this.Bd=function(t){r.addEventListener(t,function(t){function e(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];o[t].arguments=n}return o[t]={arguments:void 0,Fd:e},e}(t))},this.Gd=function(t,e){if(!o[t]||!o[t].arguments)throw new Error("You are trying to trigger an event that have not been cached before");r.removeEventListener(t,o[t].Fd),o[t].arguments&&e.apply(void 0,n(o[t].arguments))}}},function(t,e){t.exports={Hd:"onTrackChange",xd:"onEmergencyFragLoadAborted"}},function(t,e,n){var i=n(10),r=n.n(i),s=n(56),a=n(25),u=n(2),c=n.n(u),f=n(53),h=function(){function t(e,n){o(this,t),this.jd=e,this.Mi=n,this.Vd=new r.a,this.Kd=new r.a}return t.prototype.Vn=function(t,e,n){var i=e.viewToString(),r=this.Vd.get(t.viewToString());if(r&&r.Wd===i&&r.duration===n)return r.$d;var o=this.getSegmentTime(e),s=void 0;return null===o?(c.a.ln(new Error("Unexpected getSegmentTime error: track edge timestamp is not supposed to be unreliable")),s=[]):s=this.jd.getSegmentList(t,o,n),(this.Mi.Xi.ENABLE_PREBUFFER_FEEDBACK||this.Mi.Xi.ENABLE_FIX_UNRELIABLE_SEGMENT_TIME)&&(s=this.Yd(s,e)),this.Vd.set(t.viewToString(),{Wd:i,$d:s,duration:n}),s},t.prototype.Yd=function(t,e){for(var n=0;n<t.length;n++)if(t[n].getId()>e.getId())return t.slice(n);return[]},t.prototype.getSegmentTime=function(t){if(t.fromPeer&&this.Mi.Qi.zn===a.b.HLS&&this.Mi.Xi.ENABLE_FIX_UNRELIABLE_SEGMENT_TIME)return null;var e=this.Kd.get(t.viewToString());if(void 0!==e)return e;var i=this.jd.getSegmentTime(t);if(this.Kd.set(t.viewToString(),i),this.Kd.size>this.Mi.Xi.GETSEGMENTTIME_CACHE_MAX_SIZE){var r=this.Kd.keys().next().value,o=n.t(s.a)(r);this.Kd.delete(o)}return i},t.prototype.dispose=function(){this.jd=new f.a},t}();e.a=h},function(t,e,n){n(52);var i=n(177),r=n(229),s=function(){function t(e,n,s){o(this,t),this.qd=!1,this.zd=!0,this.isAlwaysDvr=!1,this.in=new r.a(e.us),this.xe=n,this.Xd=s,this.nextSegmentPrebuffered={video:!1,audio:!1},this.rangeRequestStatus=new i.a(e)}return t.prototype.isLive=function(){return this.xe.isLive()},t.prototype.ju=function(){this.isAlwaysDvr=this.isLive()&&!this.zd},t.prototype.dispose=function(){this.qd=!0},f(t,[{key:"vn",get:function(){return this.qd}},{key:"pn",get:function(){return this.zd},set:function(t){this.zd!==t&&(this.zd=t,this.isAlwaysDvr=!1)}},{key:"zn",get:function(){return this.Xd}}]),t}();e.a=s},function(t,e,i){var r=i(59),s=i.n(r),a=i(5),u=i.n(a),f=i(10),h=i.n(f),l=i(230),d=i(84),p=i.n(d),v=i(0),g=i(2),y=i.n(g),m=function(){function t(e,n,i){o(this,t),this.Ll=e,this.Pl=n,this.Mi=i,this.Qd=new h.a,this.Zd=this.ud.bind(this),this.Mi.us.Yt(v.a.ot.ht,this.Zd)}return t.prototype.Qn=function(t){return this.Qd.get(t.viewToString())||null},t.prototype.Jd=function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=u()(this.Qd.values());!(e=(r=o.next()).done);e=!0)r.value._l.remove(t)}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}},t.prototype.Rl=function(t){var e=this.Qn(t);return null===e&&(e=new l.a(t,this,this.Ll,this.Pl,this.Mi),this.Qd.set(e.segmentCoord.viewToString(),e),this.Ll.tE(t),this.iE()),e},t.prototype.ud=function(t){var e=t.viewToString(),n=this.Qd.get(e);n&&(n.dispose(),this.Qd.delete(e))},t.prototype.Ln=function(t,e){var n=this.Rl(t),i=n.Jn,r=new p.a(e,t,this.Mi.us);r.ad(),i.Jl(r),n._l.clear(),(this.Mi.Qi.isLive()&&this.Mi.Xi.ALLOW_LIVE_PUSH_SEGMENT||!this.Mi.Qi.isLive()&&this.Mi.Xi.ALLOW_VOD_PUSH_SEGMENT)&&this.Ll.ed(t)},t.prototype.ph=function(t){var e=this.Qn(t),n=e?e.Jn:null;return n?n.ph():null},t.prototype.$n=function(t){return[].concat(n(this.Qd)).filter(function(e){var n=c(e,2),i=(n[0],n[1]);return i.segmentCoord.isInTrack(t)&&!i.Jn.Zn()}).map(function(t){var e=c(t,2);return e[0],e[1].segmentCoord})},t.prototype.sE=function(){return[].concat(n(this.Qd)).map(function(t){var e=c(t,2),n=(e[0],e[1]);return{eE:n.segmentCoord,nE:n.Jn.rE,oE:n._l.length}})},t.prototype.hE=function(t){return[].concat(n(this.Qd)).filter(function(e){var n=c(e,2),i=(n[0],n[1]);return i.segmentCoord.isInTrack(t)&&i.Jn.ql()}).map(function(t){var e=c(t,2);return e[0],e[1].segmentCoord})},t.prototype.cE=function(){if(!this.Qd.size)return{};var t=void 0,e=0,n=s.a,i=!0,r=!1,o=void 0;try{for(var a,c=u()(this.Qd.values());!(i=(a=c.next()).done);i=!0)t=a.value.segmentCoord.getId(),n=Math.min(n,t),e=Math.max(e,t)}catch(t){r=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw o}}return{aE:n,uE:e}},t.prototype.dispose=function(){this.Qd=new h.a,this.Mi.us.removeListener(v.a.ot.ht,this.Zd)},t.prototype.iE=function(){var t=0,e=this.Mi.Qi.isLive()?this.Mi.Xi.LIVE.P2P_CACHE_MAX_SIZE:this.Mi.Xi.P2P_CACHE_MAX_SIZE,n=void 0,i=0,r=!0,o=!1,s=void 0;try{for(var a,c=u()(this.Qd.values());!(r=(a=c.next()).done);r=!0){var f=a.value;if(f.Jn.size&&(t+=f.Jn.size),t>e){n=this.Qd.size-i;break}i++}}catch(t){o=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw s}}if(n){var h=!0,l=!1,d=void 0;try{for(var p,g=u()(this.Qd.values());!(h=(p=g.next()).done);h=!0){var m=p.value.segmentCoord;if(0===n)break;var E=this.Mi.Qi.fE&&m.viewToString()===this.Mi.Qi.fE.viewToString(),_=this.Mi.Qi.lE&&m.viewToString()===this.Mi.Qi.lE.viewToString();if(this.Mi.Xi.ENABLE_TRACK_EDGE_GC_BLOCK&&(E||_)){y.a.hi("Attempted to remove track edge from P2PCache."),this.Mi.us.$t(v.a.ot.ct);break}this.ud(m),this.Pl.dE(m),n--}}catch(t){l=!0,d=t}finally{try{!h&&g.return&&g.return()}finally{if(l)throw d}}}},t}();e.a=m},function(t,e,n){var i=function(){function t(){o(this,t)}return t.prototype.init=function(t,e){this.Fn=t,this.hl=e},t.prototype.getStats=function(){var t=this.hl.nr();if(t){var e=t.getId(),n=this.Fn.cE(),i=n.aE,r=n.uE;return{min:i||e,max:r||e,current:e}}return null},t}();e.a=i},function(t,e,n){var i=n(0),r=function(){function t(e,n,i,r,s){o(this,t),this.hl=e,this.Fn=n,this.Pl=i,this.Gn=r,this.Mi=s}return t.prototype.EE=function(t,e,n){var i=n.wE;if(this.Pl._E(e),i&&this.Mi.Qi.isLive()&&(this.Mi.Xi.ENABLE_PUSH_SEGMENT_OPTIM&&!this.hl.tr(e.segmentCoord)||this.Gn.Ed(e.segmentCoord)),this.hl.Xn(e.segmentCoord)){var r=this.Fn.Rl(e.segmentCoord);r.Jn.Ul(e.size),t.pE()&&!this.Mi.Xi.ENABLE_FILTER_BANNED_SEEDERS||r._l.add(t)}},t.prototype.vE=function(){var t=void 0;t=this.Mi.Xi.ENABLE_P2P_SCHEDULER_OPTIM?this.hl.sr():this.hl.ir(),this.Mi.us.$t("segmentInfo",t,this.Pl)},t.prototype.mE=function(t){var e=t.gE;this.Fn.Jd(e)},t._h=function(e,n,r,o,s){var a=new t(e,n,r,o,s);s.us.Yt(i.a.G.H,a.vE.bind(a)),s.us.Yt("hasSegment",a.EE.bind(a)),s.us.Yt(i.a.G.j,a.mE.bind(a))},t}();e.a=r},function(t,e,n){var i=n(20),r=n(2),s=n.n(r),a=n(1),u=n(12),c=n(17),f=n(151),h=n(24),l=function(){function t(e){var r=this;o(this,t);var s=e.Xi,c=e.ps,l=e.Ts;this.Ue=s,this.cc=c,this.uc=l,this.TE=new u.b,this.SE=new u.b(Date.now());var d=s.P2P_SPEED_ESTIMATION_BUCKET_COUNT*s.P2P_SPEED_ESTIMATION_BUCKET_DURATION;this.AE=new f.a(d),this.RE=new h.a(0,s.P2P_SPEED_EMA_WEIGHT),this.CE=new f.a(s.P2P_USEFUL_SMA_WINDOW),this.DE=new u.b,this.bE=new f.a(s.P2P_USEFUL_SMA_WINDOW),this.yE=new u.b,this.We=new i.a,this.NE=1-Math.exp(Math.log(.5)*s.MEAN_SPEED_CALCULATION_INTERVAL/s.P2P_SPEED_EMA_ZERO_HALF_LIFE);var p=n.t(a.a)(function(){r.IE()},this.Ue.MEAN_SPEED_CALCULATION_INTERVAL),v=n.t(a.a)(function(){r.OE()},s.P2P_SPEED_ESTIMATION_BUCKET_DURATION),g=n.t(a.a)(function(){r.LE()},this.Ue.P2P_USEFUL_CALCULATION_INTERVAL);this.We.register(p),this.We.register(v),this.We.register(g)}return t.prototype.PE=function(){var t=this.RE.value;return t*(1-this.Ue.P2P_USEFUL_RATIO_WEIGHT)+t*this.uc.p2pUsefulEstimate*this.Ue.P2P_USEFUL_RATIO_WEIGHT},t.prototype.LE=function(){var t=this.yE.ti(this.cc.p2pUseful),e=this.DE.ti(this.cc.p2pMediaDownloaded);e>0&&(this.CE.jf(e),this.bE.jf(t));var i=this.CE.Kf(),r=this.bE.Kf(),o=8*i/this.Ue.P2P_USEFUL_SMA_WINDOW<this.Ue.P2P_DL_THRESHOLD_FOR_USEFUL_CORRECTION?1:Math.min(1,r/i);this.uc.p2pUsefulEstimate=n.t(c.b)(o,3)},t.prototype.IE=function(){var t=this.AE.Vf();this.uc.p2pSpeedWindowsCount++,0===t&&this.uc.zeroP2pSpeedWindowsCount++,t<0?s.a.ln(new Error("Negative p2pMediaDownloaded delta.")):this.RE.value<this.Ue.P2P_SPEED_ZERO_THRESHOLD?this.RE.update(t,1):t>0?this.RE.update(t):0===t&&this.RE.update(t,this.NE),this.uc.ns=this.PE()},t.prototype.OE=function(){var t=this.TE.ti(this.cc.p2pMediaDownloaded),e=this.SE.ti(Date.now());t>0&&e>0?this.AE.jf(8*t/e):t<0&&s.a.ln(new Error("Negative p2pMediaDownloaded delta."))},t.prototype.dispose=function(){this.We.oi()},t}();e.a=l},function(t,e,n){var s=function(t){function e(n){var r;return o(this,e),r=i(this,t.call(this)),r.Ce=n,r}return r(e,t),e.prototype.Ji=function(t){return t},e.prototype.ts=function(t,e){e(t,this.Ce)},e.prototype.ss=function(){return!1},e.prototype.es=function(){return!1},f(e,[{key:"ns",get:function(){return 0}},{key:"rs",get:function(){return 0}},{key:"byteLength",get:function(){return null}}]),e}(n(51).a);e.a=s},function(t,e,n){var s=n(51),a=n(92),u=function(t){function e(n,r,s,u){o(this,e);var c=u.us,f=u.fs,h=i(this,t.call(this)),l=n;return h.ts=function(t,e){c.$t("CDNSegmentDownloaded",l);var n=t.response;u.ps.cdnDownloaded+=n.byteLength,function(t,e){f.fd(t.response,function(n,i){t.response=n;var o=new a.a(l,n.byteLength,i);s._E(o),r.Ln(l,t.response),e(t,l)})}(t,e)},h}return r(e,t),e.prototype.ss=function(){return!1},e.prototype.es=function(){return!1},e.prototype.Ji=function(t){return t},f(e,[{key:"ns",get:function(){return 0}},{key:"rs",get:function(){return 0}},{key:"byteLength",get:function(){return null}}]),e}(s.a);e.a=u},function(t,e,n){var s=n(256),a=n.n(s),u=n(2),c=n.n(u),f=function(t){function e(n,r,s,u,f,h,l,d,p){function v(t){P=t.response,r.Ln(A,t.response),h.rd(),h.od()}o(this,e);var g=p.Xi,y=p.status,m=p.us,E=p.fs,_=p.ms,T=p.ps,b=p.Qi,w=i(this,t.call(this)),S=l,A=n,R=d,L=T,O=_,I=void 0,C=void 0,D=void 0,P=void 0,M=void 0,N=0;return w.ts=function(t,e,n){if(this.ss())P.xl(0,P.byteLength,function(n){t.response=n,h.od(),e(t,null)});else{m.$t("CDNSegmentDownloaded",A);var i=t.response;!function(t){p.ps.cdnDownloaded+=t.byteLength}(i),N=i.byteLength,function(t){if(void 0===I)throw new Error("assertion: _cdnIndexRange is not defined");if(void 0===P)throw new Error("assertion: _segmentData is not defined");try{P.$l(t,I.start*g.CHUNK_SIZE)}catch(t){throw c.a.ln(t),new Error("Invalid configuration: The current stream has no range request enabled and the p2p configuration has range request set to true.")}return P}(i).xl(0,P.byteLength,function(i){if(t.response=i,0!==C){h.zl();var o=R.hd(A);!function(t,e,n,i){E.fd(t.response,function(o,s){e.hash===s?(O.Qu++,t.response=o,v(t),n(t,A)):(O.Zu++,L.Nu+=N,L.yu+=C,r.ud(A),i(t,A))})}(t,o,e,n)}else v(t),e(t,A)})}},w.Ji=function(t){if(p.Xi.ENABLE_RANGE_REQUEST_DETECTION){if(!b.rangeRequestStatus.kE)return t}else if(!p.Xi.RANGE_REQUEST_DETECTION)return t;var e=void 0;if(void 0===I.start||void 0===I.end)throw new Error("PartialSegmentP2P: getUpdatedRange called with complete segment");var n=t?t.start+I.start*g.CHUNK_SIZE:I.start*g.CHUNK_SIZE;return I.end===M.length&&t?e=t.end:I.end<M.length&&(e=t?t.start+I.end*g.CHUNK_SIZE-1:I.end*g.CHUNK_SIZE-1),{start:n,end:e}},w.nd=function(){return I},w.ss=function(){return S},w.es=function(){return h.UE},function(){if(P=s,!u.length)throw new Error("PartialSegmentP2P should not be instantiated with an empty segment");M=u.slice(),I=p.Xi.ENABLE_RANGE_REQUEST_DETECTION&&b.rangeRequestStatus.kE||p.Xi.RANGE_REQUEST_DETECTION?{start:function(){for(var t=0;t<M.length;t++)if("downloaded"!==M[t]&&"CDNdownloaded"!==M[t])return t}(),end:function(){for(var t=M.length-1;t>=0;t--)if("downloaded"!==M[t]&&"CDNdownloaded"!==M[t])return t+1}()}:{start:0,end:M.length},S?C=f:(C=I.start*g.CHUNK_SIZE,I.end<M.length&&(C+=(M.length-I.end-1)*g.CHUNK_SIZE,C+=f-(M.length-1)*g.CHUNK_SIZE)),D=y.BE()}(),a()(w,{ns:{get:function(){return D},set:void 0},rs:{get:function(){return C},set:void 0},byteLength:{get:function(){return f},set:void 0}}),w}return r(e,t),e}(n(51).a);e.a=f},function(t,e,n){var i=n(6),r=n.n(i),o=n(5),s=n.n(o),a=n(21),u=n.n(a),c=n(10),f=n.n(c),h=n(1),l=n(92),d=n(236),p=n(12),v=n(55),g=n(201),y=n(176),m=n(0),E=n(161),_=n(235),T=n(26),b=n(24),w=n(57),S=n(247),A=n(2),R=n.n(A),L=n(242),O=n(234);e.a=function(t,e,i,o,a){var c=o,A=o.Xi,I=o._s,C=new p.b,D=new p.b,P=new p.b,M=new p.b(Date.now()),N=o.us,x=t,k=I,U=new d.a(i,o),F=this,B=b.a.li(0,A.PEER_UPLOAD_SPEED_EMA_HALF_LIFE,A.PEER_SPEED_MONITOR_INTERVAL),G=b.a.li(0,A.PEER_DOWNLOAD_SPEED_EMA_HALF_LIFE,A.PEER_SPEED_MONITOR_INTERVAL),j=Math.max(A.BLOCK_SEEDER_SCHEDULING_WINDOW,A.PEER_TIMEOUT_RATIO_WINDOW),H=new w.a(j),V=new w.a(j),X=Date.now(),K=new L.a,W=new S.a,Y=void 0,q=void 0,z=void 0,Q=0,$=0,Z=!1,J=0,tt=0,et=0,nt=0,it=0,rt=0,ot=!1,st=!1,at=!1,ut=new f.a,ct=new f.a,ft=u.a,ht=function(t){i.xE("requestHasSegment",{segmentCoord:t})},lt=function(){yt()?W.jE():W.VE()},dt=function(){return W.KE},pt=function(t,n){var i=void 0;switch(t){case"heartbeat":Y=n.WE,lt();break;case"requestHasSegment":N.$t("segmentRequested",F,new e(n.segmentCoord));break;case"hasSegment":(i=new e(n.$E.segmentCoord)).fromPeer=!0;var r=new l.a(i,n.$E.size,n.$E.hash),a=!!n.wE;N.$t("hasSegment",F,r,{wE:a});break;case"requestChunks":if(!o.ds)return;i=new e(n.segmentCoord);var u=g.a.decode(n.YE),c=n.qE?T.a.Ei:T.a.wi,f=!0,h=!1,d=void 0;try{for(var p,v=s()(u);!(f=(p=v.next()).done);f=!0){var y=p.value;o.vs.Ou++,U.push(new _.a(i,y,o,c))}}catch(t){h=!0,d=t}finally{try{!f&&v.return&&v.return()}finally{if(h)throw d}}break;default:return void R.a.ln(new Error("Invalid message "+t+" sent by peerConnection"))}at||(k.active++,at=!0)},vt=function(t,e,n){Q+=t.byteLength;var i=ut.get(E.a.Sd(n,e));i?(et++,i.Rd(t),$+=t.byteLength,ut.delete(i.id)):(rt++,(i=ct.get(E.a.Sd(n,e)))?(it++,o.vs.Fu++,i.Rd(t),ct.delete(i.id)):(o.vs.Gu++,o.ps.Iu+=t.byteLength)),gt()},gt=function(){Z||(k.transfer++,Z=!0)},yt=function(){return!Y||o.Qi.in.video.viewToString()===Y},mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.PEER_TIMEOUT_RATIO_WINDOW,e=H.js(t),n=V.js(t);return e>0?n/e:0},Et=function(t){for(var e=0;e<t.length;e++)ht(t[e])};F.HE=i.HE.bind(i),F.tE=ht,F.zE=function(t,e){var n=e.wE;i.xE("hasSegment",{$E:t,wE:!!n})},F.Sl=function(t,e,n,r){var o=g.a.decode(e),a=!0,u=!1,f=void 0;try{for(var h,l=s()(o);!(a=(h=l.next()).done);a=!0){var d=h.value,p=new E.a(t,d,this,c,r,n);ut.set(p.id,p)}}catch(t){u=!0,f=t}finally{try{!a&&l.return&&l.return()}finally{if(u)throw f}}i.xE("requestChunks",{segmentCoord:t,YE:e,qE:n===T.a.Ei})},F.Ad=function(t){et++,nt++,ct.set(t.id,ut.get(t.id)),ut.delete(t.id),n.t(h.b)(function(){var e=ct.get(t.id);e&&e.timestamp===t.timestamp&&ct.delete(t.id)},A.CHUNK_GRACE_DURATION),this.pE()||mt(A.BLOCK_SEEDER_SCHEDULING_WINDOW)>A.BLOCK_SEEDER_SCHEDULING_TIMEOUT_THRESHOLD&&et>A.BLOCK_SEEDER_SCHEDULING_REQUEST_THRESHOLD&&(ft=Date.now())},F.XE=yt,F.close=function(){z?z.clear():R.a.ln(new Error("clear() call on undefined Peer.speedMonitorTimer")),i.close()},F.QE=function(){return i.connected},F.ZE=function(){return Q},F.JE=function(){return U.FE},F.getId=function(){return x},F.tw=function(){return J},F.iw=function(){return tt},F.sw=function(){return G.value},F.ew=function(){return B.value},F.nw=function(){return nt},F.rw=function(){return et},F.ow=function(){return rt},F.hw=function(){return it},F.cw=function(){return q.value},F.aw=function(){var t=mt()>A.PEER_CRITICAL_CHUNK_TIMEOUT_THRESHOLD,e=B.value<A.LOOSER_UPLOAD_THRESHOLD;return t&&e},F.pE=function(){return Date.now()-ft<A.BLOCK_SEEDER_SCHEDULING_DURATION},F.uw=function(t){var e=q.value*(t/1e3),n=Math.ceil(e*(1+A.PEER_UPLOAD_CAPACITY_EXTRA_RATIO)/(8*A.CHUNK_SIZE/1024)),i=Math.floor(n*A.PEER_UPLOAD_CAPACITY_SAFE_RATIO/(1+A.PEER_UPLOAD_CAPACITY_EXTRA_RATIO)),o=n-i;return r()(new O.a,{qE:i,fw:o})},F.lw=function(){return X},F.locked=function(){return(!!A.POST_TRACK_SWITCH_PEER_LOCK_SENSITIVITY_ON||yt())&&(Date.now()-X<A.PEER_INIT_LOCKED_DURATION||B.value/o.Ts.Wf>A.PEER_LOCKED_UPLOAD_THRESHOLD||G.value/o.Ts.Wf>A.PEER_LOCKED_DOWNLOAD_THRESHOLD)},F.dw=function(){return K},F.Ew=function(){return{id:x.slice(-7),ww:new v.a(1e3*J,"ps"),_w:new v.a(1e3*tt,"ps"),pw:new v.b(Q),vw:new v.b(U.FE),mw:i.HE()>=0?i.HE():"unavailable",gw:new v.a(1e3*q.value,"ps"),Tw:Math.round((Date.now()-X)/1e3),Sw:ut.size,Aw:ct.size,Rw:et,Cw:it,Dw:nt,bw:rt,yw:(et?it/et:0).toFixed(2),Nw:(et?nt/et:0).toFixed(2),Iw:(et?rt/et:0).toFixed(2),Ow:new v.b(1e3*this.sw()/8,"ps"),Lw:new v.b(1e3*this.ew()/8,"ps"),Pw:mt().toFixed(2),Mw:(this.locked()?"locked":"unlocked")+"-"+(this.aw()?"looser":"normal"),kw:this.Uw?this.Uw.toFixed(2):"unavailable",Bw:mt(A.BLOCK_SEEDER_SCHEDULING_WINDOW).toFixed(2),Fw:this.pE(),Gw:Y,Hw:yt(),xw:Math.round(dt()/1e3)}},q=new y.a(o,F,a),z=n.t(h.a)(function(){var t=M.ti(Date.now()),e=C.ti(Q),n=D.ti($),r=P.ti(U.FE);J=8*e/t,tt=8*r/t;var s=8*n/t,a=Date.now()-o.Qi.in.GE;ot?A.POST_TRACK_SWITCH_PEER_LOCK_SENSITIVITY_ON&&a<A.POST_TRACK_SWITCH_PEER_SPEED_SENSITIVITY_DURATION?G.update(s,b.a.di(A.PEER_DOWNLOAD_SPEED_SENSITIVE_EMA_HALF_LIFE,A.PEER_SPEED_MONITOR_INTERVAL)):G.update(s):s>0&&(G.update(s,1),ot=!0),st?A.POST_TRACK_SWITCH_PEER_LOCK_SENSITIVITY_ON&&a<A.POST_TRACK_SWITCH_PEER_SPEED_SENSITIVITY_DURATION?B.update(tt,b.a.di(A.PEER_UPLOAD_SPEED_SENSITIVE_EMA_HALF_LIFE,A.PEER_SPEED_MONITOR_INTERVAL)):B.update(tt):tt>0&&(B.update(tt,1),st=!0),H.push(et),V.push(nt);var u=i.HE();u>0&&K.Nr(u)},A.PEER_SPEED_MONITOR_INTERVAL),U.jw=gt,i.xt(m.a.Z.J,function(){k.disconnected++,K.count>0&&k.Vw.Nr(K.Dr),k.hu.Nr({cu:(Date.now()-X)/1e3,au:dt()/1e3}),k.Kw+=(Date.now()-o.os)/1e3,N.$t(m.a.st.et,F),i.removeListener(m.a.Z.it,vt),i.removeListener(m.a.Z.tt,pt),N.zt("segmentInfo",Et),N.zt(m.a.N.I,lt),z?z.clear():R.a.ln(new Error("clear() call on undefined Peer.speedMonitorTimer")),U.dispose(),q.dispose(),i.ld()}),i.Yt(m.a.Z.it,vt),i.Yt(m.a.Z.tt,pt),N.xt("segmentInfo",Et),N.Yt(m.a.N.I,lt),H.push(0),V.push(0)}},function(t,e,n){var i=n(28),r=n.n(i),o=n(5),s=n.n(o),a=n(21),u=n.n(a),c=n(93),f=n(20),h=n(1),l=n(174),d=n(204),p=n(0),v=n(96),g=n(83),y=n(156),m=n(162),E=n(90);e.a=function(t,e,i,o,a){var _=a.Xi,T=a.status,b=a._s,w=void 0,S=void 0,A=void 0,R=null,L=!1,O=null,I=!1,C=0,D=u.a,P=[],M=new g.a(t,e,a),N=o,x=this,k=a.us,U=a.ws,F=new f.a,B=function(){return P.map(function(t){return t.dw()}).filter(function(t){return t.count>0}).map(function(t){return t.Dr})},G=function(){var t=Date.now();return P.map(function(e){var n=e.lw(),i=n>a.os?n:a.os;return t-i}).reduce(function(t,e){return t+e},0)/1e3},j=function(){L=!0,V()},H=function(){L=!1,V()},V=function(t){if(F.clear(R),R=null,!L){var e=t-(Date.now()-D);e>0?(R=n.t(h.b)(tt,e),F.register(R)):tt()}},X=function(t){if(t.sl){var e=!0,n=!1,i=void 0;try{for(var r,o=s()(P);!(e=(r=o.next()).done);e=!0)if(r.value.XE()){a.Ts.trackSwitchWithPeers++;break}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}R&&V(_.ASK_PEERS_AFTER_TRACK_SWITCH_INTERVAL)}},K=function(){ot()&&x.Ww();var t=0,e=0,n=!0,i=!1,r=void 0;try{for(var o,a=s()(P);!(n=(o=a.next()).done);n=!0){var u=o.value;u.locked()&&t++,u.aw()&&e++}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}b.locked.Qs(t),b.loosers.Qs(e);var c=0,f=!0,h=!1,l=void 0;try{for(var d,v=s()(P);!(f=(d=v.next()).done);f=!0)d.value.XE()&&c++}catch(t){h=!0,l=t}finally{try{!f&&v.return&&v.return()}finally{if(h)throw l}}k.$t(p.a.G.V,{sc:P.length,ec:c})},W=function(){for(var t=0,e=0,n=0;n<P.length;n++){var i=P[n];t+=i.tw(),e+=i.iw()}T.$w(t),T.Yw(e),T.qw()},Y=function(){null!==O&&O.dispose(),O=new d.a(T.zw(),this,i,a),A=new y.a(O,a),S=new m.a(this,O,a),w=A.tl.bind(A),I&&z()},q=function(){R&&(F.clear(R),R=null)},z=function(){if(T.Su()&&T.Tu()){var t=Date.now()-D,e=Date.now()-a.Qi.in.GE<t?_.ASK_PEERS_AFTER_TRACK_SWITCH_INTERVAL:_.ASK_PEERS_INTERVAL;V(e),I=!0}},Q=function(t){J(t),k.$t(p.a.G.j,{gE:t,sc:P.length})},$=function(t){return c.a.dr(P,t)>0&&(t.QE()&&t.close(),!0)},Z=function(t){$(t)&&(S.Dd(t.getId(),_.PEER_REMOVED_EXCLUSION_RANK,_.PEER_REMOVED_EXCLUSION_DURATION,"removed"),t.XE()?b.droppedSameTrack++:b.droppedOtherTrack++)},J=function(t){$(t)&&S.Dd(t.getId(),_.PEER_DISCONNECTED_EXCLUSION_RANK,_.PEER_DISCONNECTED_EXCLUSION_DURATION,"disconnected")},tt=function t(){D=Date.now();var e=S.Id;b.exclusionSize=S.Pd.size,M.sn(e,w),R=n.t(h.b)(t,_.ASK_PEERS_INTERVAL),F.register(R)},et=function(){for(var t=0,e=0,n=P.length;e<n;e++)t+=P[e].cw();b.peerPoolUploadCapacity.Qs(t)},nt=function(){return P.length>0?P[Math.floor(Math.random()*P.length)].cw():0},it=function(){k.$t(p.a.ft.lt)},rt=function(){k.$t(p.a.St.At)},ot=function(){return P.length-_.PEER_POOL_LIMIT>0},st=function(t,e,n){return t.ew()/e+t.sw()/n};x.Ld=function(){return P},x.Xw=function(){var t=0,e=!0,n=!1,i=void 0;try{for(var r,o=s()(P);!(e=(r=o.next()).done);e=!0)r.value.locked()&&t++}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t},x.Qw=function(){return Math.max(_.PEER_POOL_LIMIT-x.Xw(),0)},x.Ww=function(){var t=function(){var t=[],e=[],n=1,i=1,r=!0,o=!1,a=void 0;try{for(var u,c=s()(P);!(r=(u=c.next()).done);r=!0){var f=u.value;f.locked()||(f.aw()?t.push(f):e.push(f)),n=Math.max(n,f.ew()),i=Math.max(i,f.sw())}}catch(t){o=!0,a=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return{loosers:t,Zw:e,Jw:n,t_:i}}(),e=t.loosers,n=t.Zw,i=t.Jw,r=t.t_;for(e.sort(function(t,e){return e.ew()-t.ew()});e.length>0&&ot();){var o=e.pop();Z(o)}if(ot())for(n.sort(function(t,e){return st(e,i,r)-st(t,i,r)});n.length>0&&ot();){var a=n.pop();Z(a)}},x.i_=function(){return P.length},x.s_=function(){return O?O.s_():[]},x.tE=function(t){for(var e=0;e<P.length;e++)P[e].tE(t)},x.e_=function(t,e,n){var r=function(){for(var t=[],e=0,n=P.length;e<n;e++)t.push(P[e].cw());var i=v.a.Cr(t);return i?Math.max(i,_.MIN_PEER_UPLOAD_CAPACITY):_.DEFAULT_PEER_UPLOAD_CAPACITY}(),o=new l.a(t,i,e,a,r);P.push(o),n?b.openedMatch++:b.openedOffer++,k.$t(p.a.G.H,{gE:o,sc:P.length}),C=0},this.n_=function(t){S.Dd(t,_.OFFER_DECLINED_EXCLUSION_RANK,_.OFFER_DECLINED_EXCLUSION_DURATION,"offer_declined"),b.denied++},this.r_=function(t){S.Dd(t,_.PEER_CONNECTION_ATTEMPT_EXCLUSION_RANK,_.PEER_CONNECTION_ATTEMPT_TIMED_OUT_EXCLUSION_DURATION,"timed_out"),++C>_.MAX_PEER_CONNECTION_FAILURES&&(it(),rt())},x.ed=function(t){var e=N.hd(t),n=!0,i=!1,r=void 0;try{for(var o,a=s()(P);!(n=(o=a.next()).done);n=!0)o.value.zE(e,{wE:!0})}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}},x.dispose=function(){T.qe().removeListener("tracker_ready",Y),T.qe().removeListener("tracker_disconnected",q),T.qe().removeListener("signaling_ready",z),T.qe().removeListener("signaling_disconnected",q),null!==O&&O.dispose(),A&&A.dispose(),F.oi(),r()(P).forEach(function(t){t.QE()&&t.close()}),M.dispose()},function(){var t=n.t(h.a)(W,_.SPEED_MONITOR_INTERVAL),e=n.t(h.a)(et,_.PEER_UPLOAD_CAPACITY_COMPUTATION_INTERVAL),i=n.t(h.a)(K,_.PEER_POOL_MAINTENANCE_INTERVAL);F.register(t),F.register(e),F.register(i),k.Yt(p.a.st.et,Q),k.Yt(p.a.N.I,X,this),k.Yt(p.a.G.W,j),k.Yt(p.a.G.K,H),T.qe().Yt("tracker_ready",Y,x),T.qe().Yt("tracker_disconnected",q,x),T.qe().Yt("signaling_ready",z,x),T.qe().Yt("signaling_disconnected",q,x),U.ur(E.a.rr.or,nt),U.ur(E.a.rr.hr,B),U.ur(E.a.rr.cr,G)}()}},function(t,e,n){var i=n(24),r=n(57),s=n(12),a=n(1),u=function(){function t(e,u,c){var f=this;o(this,t);var h=e.Xi,l=this.o_(e),d=new s.b(u.ZE()),p=new s.b(Date.now()),v=new r.a(l),g=new r.a(l);this.h_=new i.a(c,h.PEER_UPLOAD_CAPACITY_EWMA_WEIGHT_UP),v.push(u.nw()),g.push(u.rw()),this.sh=n.t(a.a)(function(){v.push(u.nw()),g.push(u.rw());var t=g.delta,e=v.delta,n=d.ti(u.ZE()),i=p.ti(Date.now());if(null!==e&&null!==t){var r=8*n/1024*1e3/i,o=t>0?e/t:0;r>=f.h_.value?f.h_.update(r):o>=h.MAX_PEER_UPLOAD_CAPACITY_TIMEOUT_RATIO&&(h.PUC_EMWA_WEIGHT_USE_TIMEOUT_RATIO?f.h_.update(r,Math.min(o,h.PUC_EMWA_WEIGHT_CAP)):f.h_.update(r,h.PEER_UPLOAD_CAPACITY_EWMA_WEIGHT_DOWN))}},h.PEER_UPLOAD_CAPACITY_COMPUTATION_INTERVAL)}return t.prototype.o_=function(t){var e=t.Xi,n=t.Qi,i=e.PEER_UPLOAD_CAPACITY_COMPUTATION_INTERVAL,r=n.isLive()?e.LIVE.CHUNK_TIMEOUT:e.CHUNK_TIMEOUT;return i*Math.ceil(r/i)+100},t.prototype.dispose=function(){this.sh.clear()},f(t,[{key:"value",get:function(){return this.h_.value}}]),t}();e.a=u},function(t,e,n){n(52);var i=n(0),r=n(2),s=n.n(r),a={c_:"toggledOff",a_:"waitingForDistributor",Fh:"unknown",u_:"disabledByP2PConfig",f_:"disabledByInjectedConf",l_:"disabledBecauseNoCors",d_:"disabledBecauseWrongRange",E_:"probably",w_:"enabled"},u=function(){function t(e){var n=this;o(this,t),this.Re=a.a_,e.us.Yt(i.a.R.C,function(){e.Xi.ENABLE_RANGE_REQUEST_DETECTION?e.Xi.RANGE_REQUEST_DETECTION?n.Re=a.Fh:n.Re=!1===e.p2pConfig.rangeRequestEnabled?a.u_:a.f_:n.Re=a.c_})}return t.prototype.v_=function(){this.Re===a.Fh||this.Re===a.E_?this.Re=a.E_:s.a.ln(new Error("Transition to 'probably' state is possible only from 'unknown'. Current status="+this.Re))},t.prototype.m_=function(){this.Re===a.Fh?this.Re=a.l_:s.a.ln(new Error("Transition to 'disabledBecauseNoCors' state is possible only from 'unknown'. Current status="+this.Re))},t.prototype.g_=function(){this.Re===a.E_||this.Re===a.w_?this.Re=a.d_:s.a.ln(new Error("Transition to 'disabledBecauseWrongRange' state is possible only from 'probably' or 'enabled'. Current status="+this.Re))},t.prototype.T_=function(){this.Re===a.E_||this.Re===a.w_?this.Re=a.w_:s.a.ln(new Error("Transition to 'enabled' state is possible only from 'probably'. Current status="+this.Re))},f(t,[{key:"status",get:function(){return this.Re}},{key:"__",get:function(){return this.Re===a.Fh}},{key:"p_",get:function(){return this.Re===a.E_}},{key:"kE",get:function(){return this.p_||this.Re===a.w_}}]),t}();u.S_=a,e.a=u},function(t,e,n){var i=n(213),r=n(39);e.a={getSegment:function(t,e,o,s,a){var u=o.onProgress,c=void 0===u?r.a:u,f=o.onError,h=void 0===f?r.a:f,l=o.onSuccess,d=void 0===l?r.a:l,p=o.onFallback,v={onProgress:c,onError:h,onSuccess:d,onFallback:void 0===p?r.a:p};return n.t(i.a)(t,a,e,v,s).getSegment()}}},function(t,e,n){var i=function(){function t(e){var n=this;o(this,t),this.Ue=e,this.A_=[],this.R_=function(t,e){var i=t.uw(n.Ue.CHUNK_BATCHING_INTERVAL).qE;return e.uw(n.Ue.CHUNK_BATCHING_INTERVAL).qE-i}}return t.prototype.add=function(t){this.remove(t),this.A_.push(t)},t.prototype.remove=function(t){var e=t.getId();this.A_=this.A_.filter(function(t){return t.getId()!==e})},t.prototype.all=function(){return this.A_.sort(this.R_)},t.prototype.wl=function(){return this.A_.filter(function(t){return!t.pE()}).sort(this.R_)},t.prototype.clear=function(){this.A_.length=0},f(t,[{key:"length",get:function(){return this.A_.length}}]),t}();e.a=i},function(t,e,n){var i=n(10),r=n.n(i),s=function(){function t(){o(this,t),this.C_=new r.a}return t.prototype._E=function(t){var e=t.segmentCoord.viewToString();this.C_.set(e,t)},t.prototype.hd=function(t){var e=t.viewToString(),n=this.C_.get(e);if(!n)throw new Error("segmentInfo not found in the map for the given SegmentCoord");return n},t.prototype.dE=function(t){var e=t.viewToString();this.C_.delete(e)},t}();e.a=s},function(t,e,n){e.a=function(t,e,n){var i=t,r=e;n.us.Yt("segmentRequested",function(t,e){if(n.ds&&!n.bs){var o=r.Qn(e),s=o?o.Jn:null;if(s&&s.Zl()>=n.Xi.MIN_CHUNK_PERCENTAGE_DOWNLOADED_FOR_HAS_SEGMENT_ANSWER){var a=i.hd(e);t.zE(a,{wE:!1})}}})}},function(t,e,n){var i=n(104),r=(n.n(i),n(128));n.n(r),n(1),e.a={get:function(t,e,n,i){var r=e.ps,o=r.cdnDownloaded,s=r.p2pUseful,a=r.p2pUploaded,u={cdn:o,p2p:s,peers:t?t.Ld().length:0,upload:a,confLabel:""};if(e.Xi.ANALYTICS.EXPOSE_CONF_LABEL){var c=e.Xi.QOS_P2P_DISABLED||!e.Xi.RAMP_UP_ACTIVATED?"off":"on";u.confLabel=e.Xi.CONF_LABEL+"|"+c}return u}}},function(t,e,n){var i=n(11),r=n.n(i);e.a=function(){var t=void 0,e=!1,n=0,i=0,o=0,s=0,a=0,u=0,c=0,f=0,h="",l=!1,d="",p=void 0,v=void 0,g=new r.a,y=null;this.zw=function(){return t},this.dn=function(e){t!==e&&(t=e)},this.tw=function(){return n},this.$w=function(t){n=t},this.D_=function(){return i},this.b_=function(){return o},this.iw=function(){return s},this.Yw=function(t){s=t},this.y_=function(){return a},this.N_=function(){return u},this.I_=function(){return f},this.O_=function(t){f+=t},this.Su=function(){return e},this.L_=function(t){h=t},this.Au=function(){return h},this._n=function(t){d=t},this.un=function(){return d},this.wn=function(t){t!==e&&(e=t,!0===t?g.$t("tracker_ready"):g.$t("tracker_disconnected"))},this.qe=function(){return g},this.P_=function(){l=!0,g.$t("signaling_ready")},this.M_=function(){l=!1,g.$t("signaling_disconnected")},this.Tu=function(){return l},this.qw=function(){var t=void 0,e=void 0;n&&(n>o&&(o=n),t=i?(i*p+n)/(p+1):n,p=p?p+1:1,i=t),s&&(s>u&&(u=s),e=a?(a*v+s)/(v+1):s,v=v?v+1:1,a=e)},this.k_=function(t){c=t},this.BE=function(){return c},this.Ns=function(t){y=t},this.an=function(){return y}}},function(t,e,n){var i=n(40),r=n(164),s=n.n(r),a=n(216),u=function(){function t(e,n){o(this,t),this.U_=e,this.U_.Bd(s.a.Hd),this.Mi=n}return t.prototype._h=function(t){var e=this.B_.bind(this),n=this.F_.bind(this);this.U_.kd(s.a.Hd,e),this.U_.kd(s.a.xd,n);try{this.U_.Gd(s.a.Hd,e)}catch(e){if(!t)throw e}},t.prototype.F_=function(){this.Mi.gs.Hu++},t.prototype.B_=function(t){var e=t.audio,r=t.video;e&&n.t(i.a)(a.a,e),r&&n.t(i.a)(a.a,r),this.Mi.Qi.in.update({audio:e,video:r})},t.prototype.vh=function(t){var e={};e[t.trackView.type]=t.trackView,this.B_(e)},t}();e.a=u},function(t,e,n){var i=n(10),r=n.n(i),s=function(){function t(e){o(this,t),this.G_=new r.a,this.H_=e}return t.prototype.pl=function(t){var e=t.getId(),n=this.G_.get(e);return n||(n=t.uw(this.H_),this.G_.set(e,n)),n},t}();e.a=s},function(t,e,n){e.a=function(t){t.us.Yt(i.a.at.ut,function(e){e<t.Xi.VOD_CRITICAL_BUFFER_THRESHOLD?(t.hs.x_(t.Xi.VOD_CRITICAL_BUFFER_P2P_STOP_DOWNLOAD_DURATION,r),t.cs.x_(t.Xi.VOD_CRITICAL_BUFFER_P2P_STOP_UPLOAD_DURATION,r)):e>t.Xi.VOD_SAFE_BUFFER_THRESHOLD&&t.hs.j_(r)})};var i=n(0),r="vodQosOptimizerBlock"},function(t,e,n){var i=function(){function t(){o(this,t)}return t.prototype.xl=function(t,e,n){throw new Error("must be implemented")},t.prototype.$l=function(t,e){throw new Error("must be implemented")},t.prototype.ad=function(){},t.prototype.ld=function(){},f(t,[{key:"byteLength",get:function(){return this.V_},set:function(t){this.V_=t}}]),t}();e.a=i},function(t,e,n){e.a=ArrayBuffer},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var s=n(188),a=function(t){function e(n){var r;if(o(this,e),r=i(this,t.call(this)),"number"==typeof n)r.K_=new s.a(n);else{if(!(n instanceof s.a))throw new Error(e.W_);r.K_=n}return i(r)}return r(e,t),e.prototype.xl=function(t,e,n){n(this.K_.slice(t,t+e))},e.prototype.$l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0===e&&t.byteLength===this.K_.byteLength?this.K_=t:this.K_=this.Y_(t,e)},e.prototype.Y_=function(t,e){var n=new Uint8Array(this.K_);return n.set(new Uint8Array(t),e),n.buffer},f(e,[{key:"byteLength",get:function(){return this.K_.byteLength},set:function(t){throw new TypeError(e.q_)}}]),e}(n(187).a);a.q_="Cannot manually set the byteLength",a.W_="Wrong parameter in Segment Constructor",e.default=a},function(t,e,n){var i=n(25),r=n(0),s=n(194),a=n(191),u=n(193),c=n(192),h=n(1),l=n(17),d="liveLowToHighBlock",p="liveInitBlock",v=function(){function t(e,n,i){o(this,t),this.z_=0,this.X_=0,this.$a=0,this.Q_=null,this.kn=!1,this.Z_=u.a.J_,this.tp=c.a.ZERO,this.ip=null,this.sp=!1,this.ep=0,this.np=0,this.rp=null,this.op=!1,this.Mi=i,this.xe=e,this.$f=n,this.hp=new a.a(i.us),this.cp=this.ap.bind(this),this.up=this.fp.bind(this),this.lp=this.dp.bind(this),this.Ep=this.Yf.bind(this),this.wp=this._p.bind(this),this.pp=this.vp.bind(this),this.Mi.us.Yt(r.a.L.P,this.cp),this.Mi.us.Yt(r.a.k.B,this.up),this.Mi.us.Yt(r.a.G.H,this.lp),this.Mi.us.Yt(r.a.G.j,this.lp),this.Mi.us.Yt(r.a.at.ut,this.Ep),this.Mi.us.Yt(r.a.S.A,this.wp),this.Mi.us.xt(r.a.R.C,this.pp),this.mp=this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET,this.gp=new s.a(this.Mi),this.Tp(0)}return t.prototype.Tp=function(t){this.Mi.Ss.sampledHighLowBufferTargetGap=this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET-this.mp;var e=Math.random()*this.Mi.Xi.ANALYTICS.STATS_INTERVAL;this.rp=n.t(h.b)(this.Tp.bind(this,this.Mi.Xi.ANALYTICS.STATS_INTERVAL-e),t+e)},t.prototype.fp=function(){this.Sp()&&(this.Mi.us.$t(r.a.$.Y,this.$a),this.Ap())},t.prototype.ap=function(t){this.kn=t&&(this.Mi.Qi.zn!==i.b.SMOOTH||this.$a>this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET-3)},t.prototype.dp=function(t){var e=t.sc;this.z_=e},t.prototype.vp=function(){this.Mi.Xi.LIVE.INIT_P2P_DOWNLOAD_BLOCK_DURATION>0&&this.Mi.hs.x_(this.Mi.Xi.LIVE.INIT_P2P_DOWNLOAD_BLOCK_DURATION,p),this.Mi.Xi.LIVE.INIT_P2P_UPLOAD_BLOCK_DURATION>0&&this.Mi.cs.x_(this.Mi.Xi.LIVE.INIT_P2P_UPLOAD_BLOCK_DURATION,p)},t.prototype.Yf=function(t){this.$a=t,0===this.z_?(this.hp.Rp(),this.Ap()):this.gp.Cp>=this.Mi.Xi.LIVE.UPLOAD_THRESHOLD_MAX_BUFFER_TARGET_LOCKING?(this.hp.Dp(),this.Ap()):null!==this.$f.mediaElement?(this.hp.bp(),this.yp()):(this.hp.Np(),this.Ip());var e=void 0;e=this.kn||this.$a>this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET?c.a.Op:this.$a>this.mp?c.a.Lp:this.$a>this.Mi.Xi.LIVE.CRITICAL_LOWER_TARGET_RATIO*this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET?c.a.Pp:this.$a>this.Mi.Xi.BUFFER_ZERO_THRESHOLD?c.a.Mp:c.a.ZERO,this.$a<this.mp&&this.kn?this.Mi.Ss.pu.Qs(1):this.Mi.Ss.pu.Qs(0),e>=c.a.Lp&&(this.op=!0),this.tp!==e&&(this.kp(this.tp,e),this.tp=e)},t.prototype.kp=function(t,e){if(this.Mi.Xi.LIVE.ENABLE_DYNAMIC_LOWER_TARGET){if(t>c.a.ZERO&&e===c.a.Mp&&this.Up((this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET-this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET)*this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET_INCREASE_STEP),t<=c.a.Pp&&e>=c.a.Lp&&(this.ip=Date.now()),t>=c.a.Lp&&e<=c.a.Pp&&(this.sp=!0),e>=c.a.Op){if(null!=this.ip){var n=(Date.now()-this.ip)/1e3;this.ip=null;var i=(this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET-this.mp)*this.Mi.Xi.LIVE.FAST_BUFFER_FILL_FRACTION;(n<=i||0===i)&&this.Up(-(this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET-this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET)*this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET_DECREASE_STEP)}this.sp&&this.ep++}this.ep>0&&(this.Mi.Ss.lowerBufferTargetNetChangePerRebound=this.np/this.ep)}},t.prototype._p=function(){var t=this.Sp();this.mp=this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET,this.sp=!1,t&&this.Bp()},t.prototype.Up=function(t){if(this.op){var e=this.mp,i=this.Sp();this.mp=n.t(l.c)(this.mp+t,this.Mi.Xi.LIVE.CRITICAL_LOWER_TARGET_RATIO*this.Mi.Xi.LIVE.LOWER_BUFFER_TARGET,this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET),this.np+=Math.abs(e-this.mp),i&&this.Bp(),this.op=!1}},t.prototype.yp=function(){this.Fp()?(this.$a>=this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET||this.kn)&&(this.Mi.us.$t(r.a.$.q,this.$a),this.Bp()):this.Sp()||this.Ap()},t.prototype.Gp=function(t){t!==this.Z_&&(this.Z_===u.a.Pp&&t===u.a.Op?this.Mi.hs.x_(this.Mi.Xi.LIVE.LOW_TARGET_P2P_DL_BLOCK_DURATION,d):this.Z_===u.a.Op&&t===u.a.Pp&&(this.Mi.hs.j_(d),this.Mi.hs.j_(p),this.Mi.cs.j_(p)),this.Z_=t)},t.prototype.Ip=function(){this.Gp(u.a.Sn),this.X_=this.Hp(),this.xe.setBufferMarginLive(this.X_)},t.prototype.Ap=function(){this.Gp(u.a.Op),this.X_=this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET,this.xe.setBufferMarginLive(this.X_)},t.prototype.Bp=function(){this.Gp(u.a.Pp),this.X_=this.mp,this.xe.setBufferMarginLive(this.X_)},t.prototype.Sp=function(){return this.X_===this.mp},t.prototype.Fp=function(){return this.X_===this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET},t.prototype.Hp=function(){return this.Q_=this.Q_||Math.floor(Math.random()*(this.Mi.Xi.LIVE.HIGHER_BUFFER_TARGET-this.mp+1))+this.mp,this.Q_},t.prototype.dispose=function(){this.gp.dispose(),this.rp&&this.rp.clear(),this.Mi.us.removeListener(r.a.L.P,this.cp),this.Mi.us.removeListener(r.a.k.B,this.up),this.Mi.us.removeListener(r.a.G.H,this.lp),this.Mi.us.removeListener(r.a.G.j,this.lp),this.Mi.us.removeListener(r.a.at.ut,this.Ep),this.Mi.us.removeListener(r.a.S.A,this.wp),this.Mi.us.removeListener(r.a.R.C,this.pp)},f(t,[{key:"xp",get:function(){return this.X_}},{key:"bufferedAmount",get:function(){return this.$a}},{key:"jp",set:function(t){this.$f=t}},{key:"Vp",get:function(){return this.kn}}]),t}();e.a=v},function(t,e,n){var i=n(0),r=n(85),s=function(){function t(e){o(this,t),this.Ml=e,this.Ao()}return t.prototype.Ro=function(t){this.do!==t&&(this.Co=this.do,this.do=t,this.Co&&this.Ml.$t(i.a.$.X,this.Co,this.do))},t.prototype.Ao=function(){this.Ro(r.a.IDLE)},t.prototype.Rp=function(){this.Ro(r.a.Tn)},t.prototype.Np=function(){this.Ro(r.a.Sn)},t.prototype.bp=function(){this.Ro(r.a.An)},t.prototype.Dp=function(){this.Ro(r.a.Rn)},t.prototype.Lo=function(){return this.do},t.prototype.ko=function(){return this.do===r.a.IDLE},t.prototype.Kp=function(){return this.do===r.a.Tn},t.prototype.Wp=function(){return this.do===r.a.Sn},t.prototype.$p=function(){return this.do===r.a.An},t.prototype.Yp=function(){return this.do===r.a.Rn},t}();e.a=s},function(t,e,n){e.a={ZERO:0,Mp:1,Pp:2,Lp:3,Op:4}},function(t,e,n){e.a={Pp:"target_low",Op:"target_high",Sn:"target_random",J_:"target_init"}},function(t,e,n){var i=n(12),r=n(1),s=n(24),a=function(){function t(e){o(this,t),this.qp=new i.b,this.zp=new i.b(Date.now()),this.Mi=e,this.Xp=new s.a(0,this.Mi.Xi.LIVE.BUFFER_LEVEL_UPLOAD_SPEED_EMWA_WEIGHT),this.Qp=n.t(r.a)(this.Zp.bind(this),1e3)}return t.prototype.Zp=function(){var t=this.Mi.ps.p2pUploaded,e=8*this.qp.ti(t)/this.zp.ti(Date.now());e>0&&this.Xp.update(e)},t.prototype.dispose=function(){this.Qp.clear()},f(t,[{key:"Cp",get:function(){return this.Xp.value}}]),t}();e.a=a},function(t,e,n){var i=n(11),r=n.n(i),s=n(20),a=n(0),u=n(1),c=function(){function t(e){o(this,t),this.Jp=!0,this.tv=!0,this.iv=-1,this.Ml=new r.a,this.We=new s.a,this.Mi=e}return t.prototype.sv=function(){return this.xE("heartbeat",{WE:this.ev()})},t.prototype.nv=function(){var t=this;this.sv();var e=n.t(u.a)(function(){t.Jp||(t.Mi.ms.checkHeartbeatFailed++,t.rv()),t.Jp=!1},this.Mi.Xi.CHECK_HEARTBEAT_INTERVAL),i=n.t(u.a)(this.sv.bind(this),this.Mi.Xi.SEND_HEARTBEAT_INTERVAL);this.We.register(e),this.We.register(i)},t.prototype.ev=function(){var t="noTrack";return this.Mi.Qi.in.video&&(t=this.Mi.Qi.in.video.viewToString()),t},t.prototype.ov=function(){this.tv&&(this.tv=!1,this.Ml.$t(a.a.Z.J))},t.prototype.rv=function(){throw new Error("Cannot call abstract method")},t.prototype.xE=function(t,e){throw new Error("Cannot call abstract method")},t.prototype.hv=function(t,e){throw new Error("Cannot call abstract method")},t.prototype.$t=function(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.Ml).$t.apply(e,[t].concat(i))},t.prototype.Yt=function(t,e){this.Ml.Yt(t,e)},t.prototype.xt=function(t,e){this.Ml.xt(t,e)},t.prototype.removeListener=function(t,e){this.Ml.removeListener(t,e)},t.prototype.HE=function(){return this.iv},t.prototype.ah=function(){throw new Error("Cannot call abstract method")},f(t,[{key:"cv",set:function(t){throw new Error("Cannot call abstract method")}},{key:"connected",get:function(){return this.tv}}]),t}();e.a=c},function(t,e,n){var i=n(11),r=(n.n(i),n(0)),s=n(1),a=function(){function t(e,n){o(this,t),this.av=!1,this.Ue=e,this.Be=n,this.uv(),this.fv(),this.lv=this.uv.bind(this),n.Yt(r.a.k.F,this.lv)}return t.prototype.dispose=function(){this.Wo.clear(),this.Be.removeListener(r.a.k.F,this.lv)},t.prototype.fv=function(){var t=this;this.Wo=n.t(s.a)(function(){t.dv()},1e3)},t.prototype.uv=function(){this.Ev=Date.now(),this.av&&this.wv()},t.prototype.dv=function(){Date.now()-this.Ev>=Number(this.Ue.SEGMENT_REQUEST_TIMEOUT_TO_STOP_ASKING_PEERS)&&this._v()},t.prototype._v=function(){!1===this.av&&(this.av=!0,this.Be.$t(r.a.G.W),this.Wo.clear())},t.prototype.wv=function(){this.av&&(this.av=!1,this.Be.$t(r.a.G.K),this.fv())},t}();e.a=a},function(t,e,n){var i=n(11),r=(n.n(i),n(0)),s=n(1),a=function(){function t(e,n){o(this,t),this.pv=!1,this.Ue=e,this.Be=n,this.vv(),this.fv(),this.mv=this.vv.bind(this),n.Yt(r.a.nt.rt,this.mv),n.Yt(r.a.m.T,this.mv),n.Yt(r.a.k.F,this.mv)}return t.prototype.dispose=function(){this.Wo.clear(),this.Be.removeListener(r.a.nt.rt,this.mv),this.Be.removeListener(r.a.m.T,this.mv),this.Be.removeListener(r.a.k.F,this.mv)},t.prototype.fv=function(){var t=this;this.Wo=n.t(s.a)(function(){t.gv()},1e3)},t.prototype.vv=function(){this.Tv=Date.now(),this.pv&&this.Sv()},t.prototype.gv=function(){Date.now()-this.Tv>=Number(this.Ue.TRANSFER_ACTIVITY_TIMEOUT_TO_DISCONNECT_FROM_BACKEND)&&this.Av()},t.prototype.Av=function(){!1===this.pv&&(this.pv=!0,this.Be.$t(r.a.ft.dt),this.Be.$t(r.a.St.Rt),this.Be.$t(r.a.vt.gt),this.Wo.clear())},t.prototype.Sv=function(){this.pv&&(this.pv=!1,this.Be.$t(r.a.ft.Et),this.Be.$t(r.a.St.Ct),this.Be.$t(r.a.vt.Tt),this.fv())},t}();e.a=a},function(t,e,n){var i=n(11),r=(n.n(i),n(197)),s=n(196),a=n(0),u=function(){function t(e,n){o(this,t),this.Ue=e,this.Be=n,this.cl=this.de.bind(this),this.Be.Yt(a.a.S.A,this.cl),this.de()}return t.prototype.dispose=function(){this.Rv&&this.Rv.dispose(),this.Cv&&this.Cv.dispose(),this.Be.removeListener(a.a.S.A,this.cl)},t.prototype.de=function(){this.Ue.TRANSFER_ACTIVITY_TIMEOUT_TO_DISCONNECT_FROM_BACKEND&&!this.Rv&&(this.Rv=new r.a(this.Ue,this.Be)),this.Ue.SEGMENT_REQUEST_TIMEOUT_TO_STOP_ASKING_PEERS&&!this.Cv&&(this.Cv=new s.a(this.Ue,this.Be))},t}();e.a=u},function(t,e,n){var s=n(6),a=n.n(s),u=n(29),c=n.n(u),l=n(195),d=n(203),p=n(2),v=n.n(p),g=n(98),y=n(0),m=n(202),E=n(1),_=n(240),T=function(t){function e(n,r,s,a){var u;return o(this,e),u=i(this,t.call(this,a)),u.Dv=n,u.bv=r,u.Ce=s,u.yv(),u}return r(e,t),e.prototype.yv=function(){var t=this;this.bv.Nv=this.Mi.Xi.UP_BUFFERED_AMOUNT_LOW_THRESHOLD,this.bv.onclose=function(){t.rv()},this.bv.onerror=function(e){t.rv()},this.bv.onmessage=this.Iv.bind(this),this.Dv.oniceconnectionstatechange=function(){switch(t.Dv.iceConnectionState){case"failed":case"closed":t.Dv.oniceconnectionstatechange=function(){},t.rv()}},this.nv();var e=n.t(E.a)(this.Ov.bind(this),this.Mi.Xi.PEER_COMPUTE_RTT_INTERVAL);this.We.register(e)},e.prototype.Iv=function(t){switch(this.Jp=!0,h(t.data)){case"string":this.Lv(t.data);break;default:this.Pv(t.data)}},e.prototype.Lv=function(t){this.Mi.ps.p2pMessagesDownloaded+=t.length,this.Mi.ps.p2pMessagesCount++;var e=d.a.decode(JSON.parse(t));this.$t(y.a.Z.tt,e.type,e.Mv)},e.prototype.Pv=function(t){var e=n.t(_.a)(t,this.Ce.fromArrayBuffer);this.Mi.ps.p2pHeadersDownloaded+=t.byteLength-e.data.byteLength,this.Mi.ps.p2pMediaDownloaded+=e.data.byteLength,this.$t(y.a.Z.it,e.data,e.Ne,e.segmentCoord)},e.prototype.rv=function(){"closing"!==this.bv.readyState&&"closed"!==this.bv.readyState&&this.bv.close(),"closed"!==this.Dv.signalingState&&this.Dv.close(),this.ov()},e.prototype.kv=function(t){var e=new Error(t);v.a.ln(e),this.rv()},e.prototype.Ov=function(){var t=this;g.a.Pr(this.Dv,function(e){t.iv=e})},e.prototype.xE=function(t,e){if("open"===this.bv.readyState){var n=d.a.encode(t,e),i=c()(n);try{this.bv.send(i)}catch(t){return this.kv("sendMessage failed while data channel open"),!1}return!0}return this.kv("sendMessage failed: DataChannel readyState is not open but "+this.bv.readyState),!1},e.prototype.hv=function(t,e){var i=n.t(_.b)(t,e);if("open"===this.bv.readyState){try{this.bv.send(i)}catch(t){return this.kv("sendBinaryData failed while data channel open"),!1}return!0}return this.kv("sendBinaryData failed: DataChannel readyState is not open but "+this.bv.readyState),!1},e.prototype.close=function(){this.rv(),this.ld()},e.prototype.ld=function(){this.We.oi(),a()(this,new m.a)},e.prototype.ah=function(){return this.bv.bufferedAmount},f(e,[{key:"cv",set:function(t){this.bv.cv=t}}]),e}(l.a);e.a=T},function(t,e,n){function i(t){_.a.ln(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(28),s=n.n(r),a=n(60),u=n.n(a),c=n(6),f=n.n(c),h=n(5),l=n.n(h),d=n(59),p=n.n(d),v=n(10),g=n.n(v),y=n(205),m=n(199),E=n(2),_=n.n(E),T=n(98),b=n(20),w=n(1),S=n(27),A=/typ srflx/,R={ordered:!1,maxRetransmits:1},L=function(){function t(e,n,i,r){o(this,t),this.Mi=r,this.Ue=r.Xi,this.Ge=r.ms,this.Uv=new y.a(r),this.Bv=e,this.Ll=n,this.lc=r._s,this.Uv.connect(this.Ue.SIGNALING_URL,e),this.Uv.Yt("webrtc_offer",this.Fv.bind(this)),this.Uv.Yt("webrtc_answer",this.Gv.bind(this)),this.Hv=new g.a,this.xv=i,this.We=new b.a}return t.prototype.jv=function(){var t=S.a.vi().wr;return"Firefox"===t.name&&"53"===t.Vv?"limited-retransmits":"limited-lifetime"},t.prototype.Kv=function(){var t=this.Ue.DATACHANNEL_TYPE;switch("auto"===t&&(t=this.jv()),t){case"reliable":return{ordered:!0};case"limited-lifetime":return{ordered:!1,maxPacketLifeTime:this.Ue.DATACHANNEL_MAX_PACKET_LIFETIME};case"limited-retransmits":return{ordered:!1,maxRetransmits:this.Ue.DATACHANNEL_MAX_RETRANSMITS};default:return _.a.ln(new Error("Invalid data channel type in injected config.")),R}},t.prototype.Lr=function(t){var e=Math.round(Math.random()*p.a).toString(16),n=T.a.Lr(this.Ue),r=n.createDataChannel("comm",this.Kv());r.binaryType="arraybuffer";var o=Date.now(),s=this.Wv(n,r,t,e,!0);r.onopen=s;var a={$v:e,Yv:t,qv:n,zv:o,Xv:r,Qv:{Zv:!1,Jv:!1,tm:!1,im:!1,sm:!1,em:!1}};this.Hv.set(e,a),n.createOffer(function(t){n.setLocalDescription(t,function(){a.Qv.Zv=!0},i)},i),a.nm=this.rm(a,!0),this.om(a)},t.prototype.om=function(t){var e=this;t.hm=Date.now(),t.qv.onicecandidate=function(n){if(null===n.candidate){var i=Date.now()-t.hm;i<e.Ue.ICECANDIDATES_TIMEOUT&&(e.Ge.Yu++,e.Ge.cm(i)),void 0!==t.zv?e.am(t,"offer"):void 0!==t.um&&e.am(t,"answer")}}},t.prototype.fm=function(t,e){this.Hv.get(e).qv.close(),this.Hv.delete(e),this.Ll.n_(t)},t.prototype.lm=function(t,e,n,i,r){t.oniceconnectionstatechange=function(){},this.We.clear(r);var o=this.Hv.get(n);this.lc.dm(t.iceConnectionState,t.iceGatheringState,i,o.Qv),"have-local-offer"===t.signalingState&&this.lc.unansweredOffer++,t.close();var s=this.Hv.get(n);void 0!==s.zv&&this.lc.failedPeerConnectionAttemptDuration.Nr(Date.now()-s.zv),this.Hv.delete(n),this.Ll.r_(e)},t.prototype.rm=function(t,e){var i=this,r=t.qv,o=t.Yv,s=t.$v,a=n.t(w.b)(function(){i.lm(r,o,s,e,a)},this.Ue.PEER_CONNECTION_TIMEOUT);return this.We.register(a),r.oniceconnectionstatechange=function(){switch(r.iceConnectionState){case"failed":i.lm(r,o,s,e,a)}},a},t.prototype.am=function(t,e){var n=t.qv.localDescription.sdp;A.test(n)&&(t.Qv.tm=!0),this.Ue.ENCODE_SDP&&(n=T.a.Mr(n,e));var i={type:"webrtc_"+e,connexion_id:t.$v,sender_id:this.Bv,receiver_id:t.Yv,sdp:n};"answer"===e&&(i.accepted=!0),this.Uv.send(i)},t.prototype.Fv=function(t){var e=this;this.lc.offer++;var n=t.sender_id,r=t.connexion_id;if(this.nl()<=0){var o={type:"webrtc_answer",connexion_id:r,sender_id:this.Bv,receiver_id:n,accepted:!1};this.Uv.send(o)}else{var s=T.a.Lr(this.Ue),a={$v:r,Yv:n,qv:s,um:Date.now(),Qv:{Zv:!1,Jv:!1,tm:!1,im:!1,sm:!1,em:!1}};this.Hv.set(r,a),this.om(a),this.Ue.ENCODE_SDP&&(t.sdp=T.a.Gr(t.sdp));var u={sdp:t.sdp,type:"offer"},c=new T.a.SessionDescription(u);s.setRemoteDescription(c,function(){s.createAnswer(function(t){s.setLocalDescription(t,function(){a.Qv.Zv=!0},i)},i),a.Qv.Jv=!0,A.test(c.sdp)&&(a.Qv.im=!0)},i),a.nm=this.rm(a,!1),s.ondatachannel=function(t){var o=t.channel||t;o.binaryType="arraybuffer";var a=e.Wv(s,o,n,r,!1);"connecting"===o.readyState?o.onopen=a:a(),o.onerror=i}}},t.prototype.Wv=function(t,e,n,i,r){var o=this;return function(){if(o.Hv.get(i)){var s=o.Hv.get(i);void 0!==s.zv&&o.lc.successPeerConnectionAttemptDuration.Nr(Date.now()-s.zv),o.Hv.delete(i),s.nm&&o.We.clear(s.nm);var a=new m.a(t,e,o.xv,o.Mi);o.Ll.e_(n,a,r)}else o.lc.lateMessage++}},t.prototype.Gv=function(t){var e=t.sender_id,n=t.connexion_id;if(this.Hv.get(n)){var r=this.Hv.get(n),o=r.qv,s=r.nm,a=r.Qv;if(o)if(t.accepted){this.Ue.ENCODE_SDP&&(t.sdp=T.a.Gr(t.sdp));var u={sdp:t.sdp,type:"answer"},c=new T.a.SessionDescription(u);o.setRemoteDescription(c,function(){a.Jv=!0,A.test(c.sdp)&&(a.im=!0)},i)}else this.We.clear(s),this.fm(e,n)}else this.lc.lateMessage++},t.prototype.Em=function(){return this.Hv.size},t.prototype.nl=function(){return Math.max(Math.round(this.Ll.Qw()-this.Em()*this.Ue.EXPECTED_CONNECTION_SUCCESS_RATE),0)},t.prototype.dispose=function(){this.Uv.close(),this.We.oi();var t=!0,e=!1,n=void 0;try{for(var i,r=l()(this.Hv.values());!(t=(i=r.next()).done);t=!0)i.value.qv.close()}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}},t.prototype.s_=function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,o=l()(this.Hv.values());!(e=(r=o.next()).done);e=!0){var s=r.value,a=s.qv,u=a.iceGatheringState,c=a.signalingState,h=a.iceConnectionState,d=s.Xv?s.Xv.readyState:"offered",p=s.zv||s.um,v=p?Math.round((p+this.Ue.PEER_CONNECTION_TIMEOUT-Date.now())/1e3):"unavailable",g={id:s.Yv,timestamp:p,wm:v,iceGatheringState:u,signalingState:c,iceConnectionState:h,readyState:d};t.push(f()(g,s.Qv))}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t},t.prototype.Od=function(){var t=new u.a,e=!0,n=!1,i=void 0;try{for(var r,o=l()(this.Hv.values());!(e=(r=o.next()).done);e=!0){var a=r.value;t.add(a.Yv)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return s()(t)},t}();e.default=L},function(t,e,n){var i=n(255),r=n.n(i),o=n(5),s=n.n(o),a=n(17);e.a={decode:function(t){var e=[],i=t.split(","),o=!0,u=!1,c=void 0;try{for(var f,h=s()(i);!(o=(f=h.next()).done);o=!0){var l=f.value.split("-"),d=""!==l[0]?Number(l[0]):NaN,p=""!==l[1]?Number(l[1]):NaN;if(1===l.length&&r()(d))e.push(d);else{if(2!==l.length||!r()(d)||!r()(p))throw new Error("P2P protocol error: could not decode chunk batch");e=e.concat(n.t(a.a)(d,p))}}}catch(t){u=!0,c=t}finally{try{!o&&h.return&&h.return()}finally{if(u)throw c}}return e}}},function(t,e,n){var i=function(){function t(){o(this,t)}return t.prototype.xE=function(){throw new Error("One should not call sendMessage on a PeerConnection that has already been destroyed")},t.prototype.hv=function(){throw new Error("One should not call sendBinaryData on a PeerConnection that has already been destroyed")},t.prototype.HE=function(){throw new Error("One should not call getRtt on a PeerConnection that has already been destroyed")},t.prototype.ah=function(){throw new Error("One should not call getBufferedAmount on a PeerConnection that has already been destroyed")},t.prototype.ld=function(){throw new Error("One should not call destroy on a PeerConnection that has already been destroyed")},t.prototype.close=function(){throw new Error("One should not call close on a PeerConnection that has already been destroyed")},t.prototype.Yt=function(){throw new Error("One should not call on on a PeerConnection that has already been destroyed")},t}();e.a=i},function(t,e,n){var i=n(6),r=n.n(i),o=n(218);e.a={encode:function(t,e){var n=void 0;switch(t){case o.a._m:n=o.b;break;case o.a.pm:n=o.c;break;case o.a.vm:n=o.d;break;case o.a.mm:n=o.e;break;default:throw new Error("P2P protocol error: unhandled message type")}return r()(new n,e).encode()},decode:function(t){var e=void 0;switch(t.a){case o.f.pm:e=o.c;break;case o.f.vm:e=o.d;break;case o.f.mm:e=o.e;break;case o.f._m:e=o.b;break;default:throw new Error("P2P protocol error: unhandled message type")}var n=e.decode(t),i=n.type;return delete n.type,{type:i,Mv:n}}}},function(t,e,n){e.a=function(t,e,i,r){return new(0,n(200).default)(t,e,i,r)}},function(t,e,n){var i=n(29),r=n.n(i),s=n(41),a=n(2),u=n.n(a),c=n(0),f=n(1),h=function(){function t(e){var n=this;o(this,t),this.Mi=e,e.us.Yt(c.a.St.Ct,function(){n.gm()}),e.us.Yt(c.a.St.Rt,function(){n.close()}),e.us.Yt(c.a.St.At,function(){n.close(!0)}),this.de()}return t.prototype.connect=function(t,e){this.ee=t,this.Hr=e,""!==this.ee&&this.gm()},t.prototype.send=function(t){if(this.Tm&&this.Tm.readyState===WebSocket.OPEN){var e=t.receiver_id+","+r()(s.a.ji(t,"receiver_id"));switch(this.Tm.send(e),this.Mi.ms.signalingMessagesCount++,t.type){case"webrtc_answer":this.Mi.ms.sentAnswerSdpVolume+=e.length;break;case"webrtc_offer":this.Mi.ms.sentOfferSdpVolume+=e.length;break;case"webrtc_icecandidate":this.Mi.ms.sentIceCandidatesVolume+=e.length;break;default:u.a.ln(new Error("Invalid signaling message type sent."))}}else this.Sm.push(t)},t.prototype.Yt=function(t,e){this.Li[t]=e},t.prototype.close=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.Ze=t,this.Am=!0,this.Mi.status.M_(),this.Rm(),this.Tm&&(this.Tm.close(),this.Tm.onopen=function(){},this.Tm.onclose=function(){},this.Tm.onmessage=function(){},this.Tm.onerror=function(){}),null!=this.Cm&&(this.Cm.clear(),delete this.Cm),null!=this.Dm&&(this.Dm.clear(),delete this.Dm),this.de()},t.prototype.gm=function(){if(!this.Ze){this.Am=!1,!this.Tm||this.Tm.readyState!==WebSocket.CONNECTING&&this.Tm.readyState!==WebSocket.OPEN||this.close(),this.Tm=new WebSocket(this.ee+"?id="+this.Hr+"&p2pVersion=4.13.6&client_id="+this.Mi.Xi.ID_CLIENT);var t=this.Tm;this.Cm=n.t(f.b)(function(){t.close()},1e4),this.bm(),this.ym(),this.Nm()}},t.prototype.ym=function(){var t=this,e=this.Tm;this.Tm.onerror=function(){e===t.Tm&&(u.a.hi("Unexpected error on signaling connection"),t.Mi.status.M_(),t.Im())},this.Tm.onclose=function(n){e===t.Tm&&(n&&!n.wasClean&&u.a.hi("Connection to signaling unexpectedly closed - code "+n.code),t.Mi.status.M_(),t.Im())}},t.prototype.Im=function(){var t=this,e=function(){delete t.Dm,t.gm(),t.Om()};if(void 0===this.Dm&&!this.Am){var i=this.Ke;0===i&&(i=Math.round(Math.random()*this.Mi.Xi.SIGNALING_DELAY_MAX_INITIAL)),this.Dm=n.t(f.b)(e,i)}},t.prototype.Om=function(){this.Ke=Math.min(this.Ke+this.Mi.Xi.SIGNALING_DELAY_STEP,this.Mi.Xi.SIGNALING_DELAY_MAX)},t.prototype.bm=function(){var t=this;this.Tm.onopen=function(){t.Mi.status.P_(),t.Cm&&(t.Cm.clear(),delete t.Cm),t.Rm(),t.Lm()}},t.prototype.Nm=function(){var t=this;this.Tm.onmessage=function(e){if("string"==typeof e.data){var n=JSON.parse(e.data);if(t.Li[n.type]){var i=s.a.ji(n,"type");t.Li[n.type](i)}}}},t.prototype.de=function(){this.Li={},this.Ke=0,this.Sm=[]},t.prototype.Rm=function(){this.Ke=0},t.prototype.Lm=function(){for(var t=0;t<this.Sm.length;t++)this.send(this.Sm[t]);this.Sm=[]},t}();e.a=h},function(t,e,n){(function(t){e.a=function(e,n,i){var r=i.status;t.Gm={getStats:function(){for(var t={download:{p2pUseful:i.ps.p2pUseful,p2pUploaded:i.ps.p2pUploaded,cdnDownloaded:i.ps.cdnDownloaded,Pm:r.tw(),Mm:r.iw(),p2pDownloaded:i.ps.p2pUseful,km:i.ps.p2pUseful},peers:{count:0},buffer:{xp:n?n.xp:0,bufferedAmount:i.Ss.bufferedAmount,Vp:n?n.kn:void 0},Um:{connected:r.Su()},trackerConnected:r.Su(),Bm:r.Tu(),isLive:i.Qi.isLive()},o=[],s=0;s<e.Ld().length;s++){var a=e.Ld()[s];a.getId()&&t.peers.count++,o.push(a.Ew())}return t.Fm=o,t}},this.dispose=function(){delete window.Gm}}}).call(e,n(76))},function(t,e,n){var i=n(6),r=n.n(i),s=n(37),a=n.n(s),u=n(88),c=function(){function t(e,n,i,r,s){o(this,t),this.Hm=null,this.Mi=e,this.ki=n,this.bi=i,this.xm=r.result,this.jm=r.Oi,this.Vm=s}return t.prototype.send=function(){var t=this;this.Km=Date.now(),this.Wm=this.Mi.ps.p2pMediaDownloaded;var e={headers:n.t(u.b)(this.ki,this.Vm),responseType:a.a.he.ARRAY_BUFFER,withCredentials:!!this.ki.withCredentials,fe:{onprogress:this.$m.bind(this)}},i=new a.a(a.a.Methods._e,this.ki.url,e);return i.send().then(function(e){t.Ym(e),t.xm(null,e)}).catch(function(e){t.xm(e,null)}),i},t.prototype.$m=function(t){var e=Date.now();null===this.Hm&&(this.Hm=e,this.Mi.Xi.ENABLE_LATENCY_FEEDBACK&&(this.bi.latency=this.Hm-this.Km)),this.bi.cdnDuration=e-this.Km,this.bi.cdnDownloaded=t.loaded;var n={};if(r()(n,this.bi),this.Mi.Xi.USE_CONTINOUS_PROGRESS_FEEDBACK)if(t.lengthComputable){var i=t.loaded/t.total;n.p2pDownloaded=Math.round(i*this.bi.p2pDownloaded),n.p2pDuration=Math.round(i*this.bi.p2pDuration)}else n.p2pDownloaded=0,n.p2pDuration=0;this.Mi.Xi.PROGRESS_ADD_TOTAL&&(n.lengthComputable=t.lengthComputable,n.total=t.lengthComputable?t.total+this.bi.p2pDownloaded:0),this.jm(n,this.ki)},t.prototype.Ym=function(t){var e=Date.now();this.bi.cdnDownloaded=t.byteLength||0,this.bi.cdnDuration=e-this.Km;var n=this.Mi.ps.p2pMediaDownloaded-this.Wm;this.Mi.Ts.concurrentP2pDownloaded+=n,this.Mi.Ts.cdnEstimationCount++,0!==n&&this.Mi.Ts.concurrentP2pDownloadCount++;var i=this.bi.cdnDownloaded+this.bi.p2pDownloaded,r=this.bi.cdnDownloaded/i;if(r>=this.Mi.Xi.ABR_CDN_SPEED_UPDATE_RATIO_THRESHOLD&&this.bi.cdnDownloaded>=this.Mi.Xi.ABR_CDN_DL_THRESHOLD||i<this.Mi.Xi.ABR_CDN_DL_THRESHOLD&&r>=this.Mi.Xi.ABR_CDN_SMALL_SEGMENT_SPEED_UPDATE_RATIO_THRESHOLD){if(this.Mi.Xi.CDN_SPEED_ESTIMATE_CONSIDER_P2P){var o=Math.min(this.bi.cdnDownloaded+n,this.bi.cdnDownloaded*this.Mi.Xi.CDN_CONCURRENT_SCALING_CAP);this.Mi.Ts.Xf=8*o/this.bi.cdnDuration}else this.Mi.Ts.Xf=8*this.bi.cdnDownloaded/this.bi.cdnDuration;this.Mi.Ts.zf=Date.now()}},t}();e.a=c},function(t,e,n){var s=function(t){function e(n,r,s){var a;return o(this,e),a=i(this,t.call(this,n,r,s)),n.ms.getSegmentFallback++,a}return r(e,t),e.prototype.Dn=function(){},e}(n(38).a);e.a=s},function(t,e,n){var s=n(86),a=n(87),u=n(0),c=n(1),f=function(t){function e(n,r,s,c){var f;return o(this,e),f=i(this,t.call(this,n,r,s)),f.qm=c,f.Nn=f.qm(),f.bi={cdnDownloaded:0,cdnDuration:0,p2pDownloaded:f.Nn.rs,p2pDuration:0===f.Nn.ns?0:Math.round(f.Nn.rs/f.Nn.ns*1e3)},n.Xi.ENABLE_LATENCY_FEEDBACK&&(f.bi.latency=Math.min(n.Ts.zm,Math.ceil(f.bi.p2pDuration*n.Xi.LATENCY_CAPPING_RATIO))),f.Xm=new a.a(n,f.Nn),f.Xm.xt(u.a.Dt.bt,f.Fi.bind(f)),f.Xm.xt(u.a.Dt.yt,f.Cn.bind(f)),s.onProgress(f.bi,r),f}return r(e,t),e.prototype.yi=function(){var t=this;this.Qm(function(e){e?t.Xm.Ln(null):t.Cn()})},e.prototype.Qm=function(t){var e=this;if(this.Nn.es())var i=0,r=n.t(c.a)(function(){if(e.Nn=e.qm(),!e.Nn.es())return r.clear(),void t(!0);(i+=e.Mi.Xi.LOCKED_RETRY_INTERVAL)>e.Mi.Xi.LOCKED_RETRY_TIMEOUT&&(r.clear(),t(!1))},this.Mi.Xi.LOCKED_RETRY_INTERVAL);else t(!0)},e.prototype.Fi=function(e){var i=this;n.t(c.b)(function(){t.prototype.Fi.call(i,e)},0)},e.prototype.Gi=function(){this.Xm.qt(),t.prototype.Gi.call(this)},e}(s.a);e.a=f},function(t,e,n){var s=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.Dn=function(){},e.prototype.yn=function(){},e}(n(38).a);e.a=s},function(t,e,n){var s=n(38),a=n(87),u=n(0),c=n(88),f=function(t){function e(n,r,s,c){var f;return o(this,e),f=i(this,t.call(this,n,r,s)),f.Nn=c,f.bi={cdnDownloaded:0,cdnDuration:0,p2pDownloaded:f.Nn.rs,p2pDuration:0===f.Nn.ns?0:Math.round(f.Nn.rs/f.Nn.ns*1e3)},f.Xm=new a.a(n,c),f.Xm.xt(u.a.Dt.bt,f.Fi.bind(f)),f.Xm.xt(u.a.Dt.yt,f.Cn.bind(f)),n.us.$t(u.a.k.B),f}return r(e,t),e.prototype.Pi=function(){var t=n.t(c.a)(this.ki);return this.Zm=this.Nn.Ji(t),this.Zm},e.prototype.Jm=function(t){if(!this.Zm)return!0;var e=void 0;if(void 0===this.Zm.end){if(0===this.Zm.start)return!0;if(!this.Nn.byteLength)return!0;e=this.Nn.byteLength-this.Zm.start}else e=Number(this.Zm.end)-this.Zm.start+1;return e===t.byteLength?(this.Mi.Qi.rangeRequestStatus.T_(),!0):(this.Mi.Qi.rangeRequestStatus.g_(),!1)},e.prototype.Ii=function(t){this.Mi.Xi.ENABLE_RANGE_REQUEST_DETECTION?this.Jm(t)?this.Xm.Ln(t):this.Cn(new Error("Mismatch in expected and received RR responce byteLength. Fallback to full CDN download.")):this.Xm.Ln(t)},e.prototype.Gi=function(){this.Xm.qt(),t.prototype.Gi.call(this)},e}(s.a);e.a=f},function(t,e,n){var s=n(38),a=(n(81),n(80)),u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.Pi=function(){return{start:0}},e.prototype.Ni=function(t){t.message===a.a.ui.Te&&this.Mi.Qi.rangeRequestStatus.m_(),this.Cn()},e.prototype.Ii=function(e){this.Mi.Qi.rangeRequestStatus.v_(),t.prototype.Ii.call(this,e)},e}(s.a);e.a=u},function(t,e,n){var i=n(2),r=n.n(i),o=n(210),s=n(208),a=n(209),u=n(211),c=n(212),f=n(214);e.a=function(t,e,i,h,l){function d(t){r.a.ln(t)}var p=n.t(f.a)(e,h,l);p.onFallback=function(t){t&&d(t),new s.a(e,i,p).getSegment()};try{if(null===l)return new o.a(e,i,p);if(e.Xi.ENABLE_RANGE_REQUEST_DETECTION&&e.Qi.rangeRequestStatus.__&&e.Ss.bufferedAmount>=e.Xi.RR_DETECTION_MIN_BUFFER_LEVEL)return new c.a(e,i,p);var v=function(){return t.getP2PData(l)},g=v();return g.ss()?new a.a(e,i,p,v):new u.a(e,i,p,g)}catch(t){return d(t),new s.a(e,i,p)}}},function(t,e,n){var i=n(2),r=n.n(i),o=n(0),s=n(155);e.a=function(t,e,i){return{onSuccess:function(i,a,u){if(n.t(s.a)(a,t.Ts,t.Xi),t.Xi.ENABLE_LATENCY_FEEDBACK){var c=a.latency||t.Ts.zm;a.latency=Math.min(c,Math.ceil((a.cdnDuration+a.p2pDuration)*t.Xi.LATENCY_CAPPING_RATIO))}t.ps.p2pConsumed+=a.p2pDownloaded,t.ps.cdnConsumed+=a.cdnDownloaded;var f=i.slice(0),h=function(){e.onSuccess(f,a,u)};if(t.Xi.ENABLE_FUNNEL_GETSEGMENT_CALLBACKS)try{h()}catch(t){r.a.ln(t)}else h();t.us.$t(o.a.k.U,a),t.us.$t(o.a.k.F)},onError:function(n,i){if(t.Xi.ENABLE_FUNNEL_GETSEGMENT_CALLBACKS)try{e.onError(n,i)}catch(t){r.a.ln(t)}else e.onError(n,i)},onProgress:function(n,i){if(t.Xi.ENABLE_FUNNEL_GETSEGMENT_CALLBACKS)try{e.onProgress(n,i)}catch(t){r.a.ln(t)}else e.onProgress(n,i)},onFallback:function(){throw new Error("Cannot call abstract method")}}}},function(t,e,n){var i=function(){function t(){o(this,t)}return t.prototype.getBufferLevelMax=function(){return 0},t.prototype.isLive=function(){return!1},t.prototype.setBufferMarginLive=function(t){},t.prototype.addEventListener=function(t,e){},t.prototype.removeEventListener=function(t,e){},t}();e.a=i},function(t,e,n){var i=function(){function t(){o(this,t)}return t.prototype.viewToString=function(){return""},t.prototype.isEqual=function(t){return!1},t}();e.a=i},function(t,e){},function(t,e,n){n.d(e,"f",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return u}),n.d(e,"b",function(){return c});var i=function t(){o(this,t)};i.pm="b",i.vm="c",i.mm="d",i._m="e";var r=function t(){o(this,t)};r.pm="requestHasSegment",r.vm="hasSegment",r.mm="requestChunks",r._m="heartbeat";var s=function(){function t(){o(this,t),this.type=r.pm,this.segmentCoord=""}return t.prototype.encode=function(){return{a:i.pm,b:this.segmentCoord}},t.decode=function(e){var n=new t;return n.segmentCoord=e.b,n},t}(),a=function(){function t(){o(this,t),this.type=r.vm,this.$E="",this.wE=""}return t.prototype.encode=function(){return{a:i.vm,b:this.$E,c:this.wE}},t.decode=function(e){var n=new t;return n.$E=e.b,n.wE=e.c,n},t}(),u=function(){function t(){o(this,t),this.type=r.mm,this.segmentCoord="",this.YE="",this.qE=""}return t.prototype.encode=function(){return{a:i.mm,b:this.segmentCoord,c:this.YE,d:this.qE}},t.decode=function(e){var n=new t;return n.segmentCoord=e.b,n.YE=e.c,n.qE=e.d,n},t}(),c=function(){function t(){o(this,t),this.type=r._m,this.WE=""}return t.prototype.encode=function(){return{a:i._m,b:this.WE}},t.decode=function(e){var n=new t;return n.WE=e.b,n},t}()},function(t,e,n){var s=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.ir=function(){var t=[],e=this.Bn.audio;e&&(t=this.jn(e,"audio"),this.Mi.Xi.ENABLE_P2P_SCHEDULER_OPTIM&&(t=t.slice(0,this.Mi.Xi.NB_SEGMENT_P2P_PREBUFFER)));var n=[],i=this.Bn.video;return i&&(n=this.jn(i,"video"),this.Mi.Xi.ENABLE_P2P_SCHEDULER_OPTIM&&(n=n.slice(0,this.Mi.Xi.NB_SEGMENT_P2P_PREBUFFER))),this.Un=t.concat(n).sort(function(t,e){return t.getId()-e.getId()}).slice(0,this.Mi.Xi.NB_SEGMENT_P2P_PREBUFFER),this.Un},e.prototype.er=function(t){var e=this.tg(t);"audio"===e?this.xn.update({audio:t,video:null}):"video"===e&&this.xn.update({audio:null,video:t})},e.prototype.tg=function(t){var e=this.Bn.video;if(e&&t.isInTrack(e))return"video";var n=this.Bn.audio;return n&&t.isInTrack(n)?"audio":void 0},e}(n(89).a);e.a=s},function(t,e,n){var s=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.ir=function(){var t=[],e=this.Bn.video;return e&&(t=this.jn(e,"video")),this.Un=t.sort(function(t,e){return t.getId()-e.getId()}).slice(0,this.Mi.Xi.NB_SEGMENT_P2P_PREBUFFER),this.Un},e.prototype.er=function(t){this.Bn.video&&t.isInTrack(this.Bn.video)&&this.xn.update({video:t,audio:null})},e}(n(89).a);e.a=s},function(t,e,n){e.a=function(t,e,n,s){return s.Qi.zn===o.b.HLS?new i.a(t,e,n,s):new r.a(t,e,n,s)};var i=n(220),r=n(219),o=n(25)},function(t,e,n){var i=n(11),r=(n.n(i),n(0)),s=n(24),a=n(96),u=n(97),c=function(){function t(e){var n=this;o(this,t),this.ig=[],this.sg=new u.a(10),this.Xf=null,this.zf=null,this.ns=0,this.Wf=0,this.p2pUsefulEstimate=1,this.concurrentP2pDownloaded=0,this.concurrentP2pDownloadCount=0,this.cdnEstimationCount=0,this.zeroP2pSpeedWindowsCount=0,this.p2pSpeedWindowsCount=0,this.feebackCount=0,this.zeroDurationFeedbackCount=0,this.trackSwitchWithPeers=0,this.eg=function(t){n.feebackCount++;var e=t.p2pDuration+t.cdnDuration;if(0!==e){var i=t.p2pDownloaded+t.cdnDownloaded/e;n.ng?n.ng.update(i):n.ng=new s.a(i,.1),n.ig.push(n.ng.value),null!=t.latency&&t.cdnDownloaded>0&&n.sg.Nr(t.latency)}else n.zeroDurationFeedbackCount++},this.Be=e,this.Be.Yt(r.a.k.U,this.eg)}return t.prototype.mu=function(){this.ig=[]},t.prototype.dispose=function(){this.mu()},f(t,[{key:"bandwidthEstimateCV",get:function(){var t=a.a.br(this.ig),e=a.a.Dr(this.ig);return t&&e&&0!==e?t/e:0}},{key:"zm",get:function(){return 0===this.sg.length?50:Math.round(this.sg.Dr)}}]),t}();e.a=c},function(t,e,n){var i=n(0),r=n(85),s=n(58),a=function(){function t(e){o(this,t),this.rg=!0,this.og=0,this._u=0,this.bufferedAmount=0,this.lowerBufferTargetNetChangePerRebound=0,this.sampledHighLowBufferTargetGap=0,this.hg=new s.a,this.cg=new s.a,this.ag=new s.a,this.ug=new s.a,this.pu=new s.a,this.fg=e,this.fg.Yt(i.a.L.P,this.ap.bind(this)),this.fg.Yt(i.a.$.Y,this.lg.bind(this)),this.fg.Yt(i.a.$.q,this.dg.bind(this)),this.fg.Yt(i.a.$.X,this.Eg.bind(this))}return t.prototype.ap=function(t){var e=t?1:0;this.hg.Qs(e)},t.prototype.Eg=function(t,e){switch(t){case r.a.Tn:this.cg.Qs(0);break;case r.a.An:this.ag.Qs(0);break;case r.a.Rn:this.ug.Qs(0)}switch(e){case r.a.Tn:this.cg.Qs(1),t!==r.a.IDLE&&(this.rg=!1);break;case r.a.An:this.ag.Qs(1);break;case r.a.Rn:this.ug.Qs(1),this.rg=!1;break;case r.a.Sn:this.rg=!1}this.bufferState=e},t.prototype.lg=function(t){this.og=t},t.prototype.dg=function(t){this._u+=t-this.og},t.prototype.wg=function(){this.rg=this.bufferState===r.a.An},t.prototype.lu=function(){return this.hg.qs()},t.prototype.du=function(){return this.cg.qs()},t.prototype.Eu=function(){return this.ug.qs()},t.prototype.wu=function(){return this.ag.zs()},f(t,[{key:"alwaysDynamicBuffer",get:function(){var t=void 0;return t=this.bufferState!==r.a.Tn&&this.rg,this.wg(),t}}]),t}();e.a=a},function(t,e,n){var i=function(){function t(){o(this,t),this._g=0,this.Ku=0,this.Wu=0,this.$u=0,this.Yu=0,this.pg=0,this.zu=0,this.Xu=0,this.Qu=0,this.Zu=0,this.checkHeartbeatFailed=0,this.getSegmentSuccess=0,this.getSegmentFallback=0,this.signalingMessagesCount=0,this.sentOfferSdpVolume=0,this.sentAnswerSdpVolume=0,this.sentIceCandidatesVolume=0,this.sentDistributorRootCount=0,this.sentTrackerInitCount=0,this.sentTrackerPeersCount=0,this.sentTrackerTracksCount=0}return t.prototype.qu=function(){var t=this._g;return this._g=0,t},t.prototype.cm=function(t){0===this._g&&(this._g=t)},t}();e.a=i},function(t,e,n){e.a=function t(){o(this,t),this.Ou=0,this.Lu=0,this.Pu=0,this.Mu=0,this.ku=0,this.Uu=0,this.Bu=0,this.Fu=0,this.Gu=0}},function(t,e,n){var i=n(5),r=n.n(i),s=n(53),a=function(){function t(e,n,i){o(this,t),this.abortFragmentCount=0,this.Hu=0,this.maxBitrate=0,this.minBitrate=0,this.playbackErrorCount=0,this.mediaElementSet=0,this.mediaElementChanged=0,this.xe=e,this.$f=n,this.jd=i}return t.prototype.dispose=function(){this.jd=new s.a},f(t,[{key:"duration",get:function(){return!this.xe.isLive()&&this.$f.mediaElement?this.$f.mediaElement.duration:0}},{key:"videoTrackCount",get:function(){var t=this.jd.getTrackList(),e=0,n=!0,i=!1,o=void 0;try{for(var s,a=r()(t);!(n=(s=a.next()).done);n=!0){var u=s.value;if((!u.type||"video"===u.type)&&(e++,u.bitrate)){var c=u.bitrate;this.maxBitrate=Math.max(this.maxBitrate,c),this.minBitrate=0===this.minBitrate?c:Math.min(this.minBitrate,c)}}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e}}]),t}();e.a=a},function(t,e,i){var r=i(58),s=i(90),a=(i(91),i(97)),u=i(246),c=function(){function t(e){o(this,t),this.match=0,this.excessMatch=0,this.offer=0,this.openedMatch=0,this.openedOffer=0,this.unansweredOffer=0,this.active=0,this.transfer=0,this.denied=0,this.droppedSameTrack=0,this.droppedOtherTrack=0,this.offerTimeout=0,this.answerTimeout=0,this.timeoutNewConnection=0,this.timeoutCheckingConnection=0,this.timeoutFailedConnection=0,this.timeoutNewIce=0,this.timeoutGatheringIce=0,this.timeoutCompleteIce=0,this.disconnected=0,this.lateMessage=0,this.exclusionSize=0,this.timeoutLocalSdp=0,this.timeoutRemoteSdp=0,this.timeoutLocalSdpWithStun=0,this.timeoutRemoteSdpWithStun=0,this.timeoutWithLocalStunIce=0,this.timeoutWithRemoteStunIce=0,this.Kw=0,this.vg=e,this.peerPoolUploadCapacity=new r.a,this.locked=new r.a,this.loosers=new r.a,this.successPeerConnectionAttemptDuration=new a.a(20),this.failedPeerConnectionAttemptDuration=new a.a(20),this.ou=new u.a(10),this.Vw=new a.a(10),this.hu=new u.a(20)}return t.prototype.dm=function(t,e,n,i){switch(n?this.offerTimeout++:this.answerTimeout++,i.Zv&&this.timeoutLocalSdp++,i.Jv&&this.timeoutRemoteSdp++,i.tm&&this.timeoutLocalSdpWithStun++,i.im&&this.timeoutRemoteSdpWithStun++,i.sm&&this.timeoutWithLocalStunIce++,i.em&&this.timeoutWithRemoteStunIce++,t){case"new":this.timeoutNewConnection++;break;case"checking":this.timeoutCheckingConnection++;break;case"failed":this.timeoutFailedConnection++}switch(e){case"new":this.timeoutNewIce++;break;case"gathering":this.timeoutGatheringIce++;break;case"complete":this.timeoutCompleteIce++}},f(t,[{key:"sampledPUC",get:function(){return this.vg.lr(s.a.rr.or)}},{key:"sampledP2pMeanRtt",get:function(){var t=this.vg.lr(s.a.rr.hr),e=[].concat(n(this.Vw.Or),n(t));return e.length>0?e[Math.floor(Math.random()*e.length)]:0}},{key:"totalConnectionDuration",get:function(){var t=this.vg.lr(s.a.rr.cr)+this.Kw;return this.Kw=0,t}}]),t}();e.a=c},function(t,e,n){var i=function(){function t(){o(this,t),this._c=0,this.cdnDownloaded=0,this.p2pConsumed=0,this.cdnConsumed=0,this.p2pMediaDownloaded=0,this.p2pHeadersDownloaded=0,this.p2pMessagesDownloaded=0,this.p2pMessagesCount=0,this.p2pUploaded=0,this.Ru=0,this.Cu=0,this.Du=0,this.bu=0,this.yu=0,this.Nu=0,this.Iu=0}return f(t,[{key:"p2pUseful",get:function(){return this._c},set:function(t){if(t<this._c)throw new TypeError("p2pUseful increment is not a positive number");this._c=t}}]),t}();e.a=i},function(t,e,n){var i=n(102),r=n.n(i),s=n(21),a=n.n(s),u=n(0),c=function(){function t(e){o(this,t),this.audio=void 0,this.video=void 0,this.fg=e,this.mg=a.a,r()(this)}return t.prototype.update=function(t){var e=t.audio,n=t.video;if(!e&&!n)throw new Error("There must be at least one updated track");!e||this.audio&&this.audio.viewToString()===e.viewToString()||(this.audio=e,this.fg.$t(u.a.N.I,{sl:!1})),!n||this.video&&this.video.viewToString()===n.viewToString()||(this.video=n||this.video,this.mg=Date.now(),this.fg.$t(u.a.N.I,{sl:!0}))},f(t,[{key:"GE",get:function(){return this.mg}}]),t}();e.a=c},function(t,e,n){var i=n(42),r=n.n(i),s=n(158),a=n(179),u=n(40),c=n(217),h=(n.n(c),n(54)),l=function(){function t(e,i,c,f,l){o(this,t),n.t(u.a)(h.a,e),this.segmentCoord=e,this.Jn=new s.a(e,i,c,f,l),this._l=new a.a(l.Xi),r()(this)}return t.prototype.dispose=function(){this.Jn.dispose(),this._l.clear()},f(t,[{key:"ml",get:function(){return this.Jn.ml}}]),t}();e.a=l},function(t,e,n){var i=n(102),r=n.n(i),s=n(2),a=n.n(s),u=function(){function t(e,n){o(this,t),this.audio=void 0,this.video=void 0,this.Hn=e,this.Fe=n.Qi,r()(this)}return t.prototype.update=function(t){var e=t.audio,n=t.video;if(void 0===e&&void 0===n)throw new Error("There must be at least one updated track edge");if(e&&(this.audio=e,this.Fe.lE=e),n){this.video=n;var i=this.Hn.getSegmentTime(n);this.Fe.fE=n,null!==i?this.Fe.en=i:a.a.ln(new Error("Unexpected getSegmentTime error: track edge timestamp is not supposed to be unreliable"))}},t}();e.a=u},function(t,e,n){var i=n(0);e.a=function(t,e){var n=t;e.us.Yt(i.a.nt.rt,function(t,e){var i=n.Qn(e.segmentCoord),r=i?i.Jn:null;r&&r.Gl(e.Ne,function(n){n?t.gg(e,n):t.Tg()})})}},function(t,e,n){var i=n(26),r=function(){function t(e){o(this,t),this.Sg=[],this.Ag=[],this.Mi=e}return t.prototype.push=function(t){this.Mi.Xi.SPLIT_UPLOAD_QUEUE&&t.Ie!==i.a.Ei?this.Ag.push(t):this.Sg.push(t)},t.prototype.shift=function(){return this.Sg.length?this.Sg.shift():this.Ag.shift()},t.prototype.dispose=function(){this.Sg=[],this.Ag=[]},f(t,[{key:"length",get:function(){return this.Sg.length+this.Ag.length}}]),t}();e.a=r},function(t,e,n){var i=n(26),r=function(){function t(){o(this,t)}return t.prototype.vl=function(t){switch(t){case i.a.Ei:return this.qE;case i.a.wi:return this.fw;default:return 0}},t.prototype.Tl=function(t,e){switch(t){case i.a.Ei:this.qE=e;break;case i.a.wi:this.fw=e}},t}();e.a=r},function(t,e,n){var s=function(t){function e(n,r,s,a){var u;return o(this,e),u=i(this,t.call(this,n,r,a)),u.Mi=s,u}return r(e,t),f(e,[{key:"Rg",get:function(){var t=this.Mi.Qi.isLive()?this.Mi.Xi.LIVE.CHUNK_UP_TIMEOUT:this.Mi.Xi.CHUNK_UP_TIMEOUT;return Date.now()-this.ye>t}}]),e}(n(82).a);e.a=s},function(t,e,n){var s=n(233),a=n(95),u=n(0),c=function(t){function e(n,r){var a;o(this,e);var u=new s.a(r);return a=i(this,t.call(this,u)),a.Cg=0,a.Dg=function(){},a.bg=null,a.yg=0,a.Ng=n,a.Mi=r,a.Ng.cv=a.Ig.bind(a),a.Og=u,a}return r(e,t),e.prototype.gr=function(t){return!t.Rg},e.prototype.vr=function(t){this.Mi.vs.Lu++,this.Mi.us.$t(u.a.nt.rt,this,t)},e.prototype.gg=function(t,e){var n=e.byteLength;this.bg&&(this.yg+=n),this.Ng.hv(e,t)&&(this.Cg+=n,this.Mi.ps.p2pUploaded+=n,this.Dg())},e.prototype.Tg=function(){this.Mi.vs.Pu++,this.Mi.Xi.ENABLE_UPLOAD_DEQUEUE_ALL||this.Tr()},e.prototype.pr=function(){var t=this.Ng.ah()<=this.Mi.Xi.UP_MAX_BUFFERED_AMOUNT;return t||(this.bg=Date.now(),this.yg=this.Ng.ah()),t},e.prototype.Ig=function(){if(this.bg){var t=Date.now()-this.bg;t>0&&this.Mi._s.ou.Nr({time:t,uu:this.yg}),this.bg=null}this.Mi.Xi.ENABLE_UPLOAD_DEQUEUE_ALL?this.Rr():this.Tr()},e.prototype.dispose=function(){this.Dg=function(){},this.Ng.cv=function(){},this.Og.dispose()},f(e,[{key:"FE",get:function(){return this.Cg}},{key:"jw",set:function(t){this.Dg=t}}]),e}(a.a);e.a=c},function(t,e,n){var i=void 0;i=n(239).default;var r=function(){function t(){o(this,t),this.Lg=!1}return t.prototype.fd=function(t,e){var n=this;return i(t,function(){n.Lg||e.apply(void 0,arguments)})},t.prototype.dispose=function(){this.Lg=!0},t}();e.a=r},function(t,e,n){e.a=function(){var t={Pg:function(t,e){var n=65535&e;return((e-n)*t|0)+(n*t|0)|0},Mg:function(t,e,n){for(var i=n,r=-4&e,o=0;o<r;o+=4){var s=255&t[o]|(255&t[o+1])<<8|(255&t[o+2])<<16|(255&t[o+3])<<24;s=(131071&(s=this.Pg(s,3432918353)))<<15|s>>>17,i=5*(i=(524287&(i^=s=this.Pg(s,461845907)))<<13|i>>>19)+3864292196|0}switch(s=0,e%4){case 3:s=(255&t[r+2])<<16;case 2:s|=(255&t[r+1])<<8;case 1:s|=255&t[r],s=(131071&(s=this.Pg(s,3432918353)))<<15|s>>>17,i^=s=this.Pg(s,461845907)}return i^=e,i^=i>>>16,i=this.Pg(i,2246822507),i^=i>>>13,i=this.Pg(i,3266489909),i^=i>>>16}};self.onmessage=function(e){var n=new Uint8Array(e.data.kg),i=t.Mg(n,n.length,0).toString();self.postMessage({kg:e.data.kg,Ug:e.data.Ug,hash:i},[e.data.kg])}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(238),r=[],o=function(){try{var t=URL.createObjectURL(new Blob(["("+i.a.toString()+")()"],{type:"application/javascript"})),e=new Worker(t);return URL.revokeObjectURL(t),e}catch(t){return{onerror:null,onmessage:null,postMessage:function(){},terminate:function(){}}}}();o.onmessage=function(t){var e=t.data,n=e.Ug,i=e.kg,o=e.hash,s=r[n];delete r[n],s(i,o)},e.default=function(t,e){var n=r.push(e)-1;o.postMessage({kg:t,Ug:n},[t])}},function(t,e,n){function i(t,e){var i=e.Ne,r=e.segmentCoord.toArrayBuffer(),s=n.t(o.c)(i),a=t.byteLength,u=n.t(o.d)(a),c=new Uint8Array(s.byteLength+u.byteLength+a+r.byteLength);return c.set(s,0),c.set(u,4),c.set(new Uint8Array(t),6),c.set(new Uint8Array(r),6+a),c.buffer}function r(t,e){var n=t.slice(0,4),i=t.slice(4,6),r=new Uint16Array(i)[0],o=t.slice(6,6+r),s=t.slice(6+r),a=new Uint32Array(n)[0];return{segmentCoord:e(s),Ne:a,data:o}}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var o=n(55)},function(t,e,n){function i(t,e){if("string"!=typeof t||!t.length)throw new TypeError(e)}function r(t){var e=t.as,n=t.contentId;if(null!==n&&void 0!==n)return i(n,"Unvalid p2pConfig property: contentId needs to be a non-empty string"),n;i(e,"Unvalid PeerAgent constructor argument: contentUrl needs to be a non-empty string");var r=new s.a(e);return r.host+r.pathname}n.d(e,"a",function(){return r});var o=n(338),s=n.n(o)},function(t,e,n){var i=function(){function t(){o(this,t),this.Bg=0,this.Fg=0}return t.prototype.Nr=function(t){this.Fg++,this.Bg+=(t-this.Bg)/this.Fg},f(t,[{key:"Dr",get:function(){return this.Bg}},{key:"count",get:function(){return this.Fg}}]),t}();e.a=i},function(t,e,n){e.a={ah:function(t){if(null===t.mediaElement)return 0;for(var e=t.mediaElement.buffered,n=t.mediaElement.currentTime,i=n,r=0;r<e.length;r++)e.start(r)<i+.3&&e.end(r)>i&&(i=e.end(r));return i-n}}},function(t,e,n){var i=n(43),r=n.n(i),o=n(27),s=n(94);e.a={Sh:function(t){window.Streamroot=window.Streamroot||{},window.Streamroot.Downloader=window.Streamroot.Downloader||t,window.Streamroot.peerAgents=window.Streamroot.peerAgents||{},window.Streamroot.uaHelper=o.a,Object.defineProperty(window.Streamroot,"p2pAvailable",{get:function(){var t=r()(window.Streamroot.peerAgents);return t.length?window.Streamroot.peerAgents[t[0]].isP2PEnabled:n.t(s.b)()}})},Th:function(t,e){window.Streamroot.peerAgents&&(window.Streamroot.peerAgents[t]=e.PublicAPI)},gh:function(t){window.Streamroot.peerAgents[t]&&delete window.Streamroot.peerAgents[t]}}},function(t,e,n){e.a={get:function(t){return{version:t.version,get isP2PEnabled(){return t.isP2PEnabled},get stats(){return t.stats},get p2pDownloadOn(){return t.p2pDownloadOn},set p2pDownloadOn(e){t.p2pDownloadOn=e},get p2pUploadOn(){return t.p2pUploadOn},set p2pUploadOn(e){t.p2pUploadOn=e}}}}},function(t,e,n){var i=function(){function t(e){o(this,t),this.yr=e,this._r=[]}return t.prototype.Nr=function(t){this._r.length>=this.yr&&this._r.shift(),this._r.push(t)},t.prototype.Ir=function(){if(this._r.length>0){var t=Math.floor(Math.random()*this._r.length);return this._r.splice(t,1)[0]}},t}();e.a=i},function(t,e,n){var i=function(){function t(){o(this,t),this.reset()}return t.prototype.reset=function(){this.Gg=null,this.Hg=0},t.prototype.jE=function(){this.xg||(this.Gg=Date.now())},t.prototype.VE=function(){this.xg&&(this.Hg+=Date.now()-this.Gg,this.Gg=null)},f(t,[{key:"KE",get:function(){var t=this.xg?Date.now()-this.Gg:0;return this.Hg+t}},{key:"xg",get:function(){return null!==this.Gg}}]),t}();e.a=i},function(t,e,n){var i=n(21),r=n.n(i),s=n(5),a=n.n(s),u=n(10),h=n.n(u),l=n(249),d=function(){function t(){o(this,t),this.jg=null,this.Vg=new h.a}return t.prototype.Kg=function(){var t=!0,e=!1,n=void 0;try{for(var i,r=a()(this.Vg.entries());!(t=(i=r.next()).done);t=!0){var o=c(i.value,2),s=o[0];o[1].active||(this.Vg.delete(s),s===this.jg&&(this.jg=null))}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}},t.prototype.Wg=function(){var t=null,e=r.a,n=!0,i=!1,o=void 0;try{for(var s,u=a()(this.Vg.entries());!(n=(s=u.next()).done);n=!0){var f=c(s.value,2),h=f[0],l=f[1];l.$g>e&&(t=h,e=l.$g)}}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}this.jg=t},t.prototype.x_=function(t,e){this.Kg();var n=this.Yg(e);n?n.extend(t):(n=new l.a(t),this.Vg.set(e,n)),(!this.qg||n.$g>this.qg.$g)&&(this.jg=e)},t.prototype.j_=function(t){return this.Kg(),!!this.Vg.delete(t)&&(t===this.jg&&this.Wg(),!0)},t.prototype.zg=function(){this.jg=null,this.Vg.clear()},t.prototype.Yg=function(t){return this.Vg.get(t)},f(t,[{key:"Ds",get:function(){return!!this.qg&&this.qg.active}},{key:"qg",get:function(){return this.jg?this.Yg(this.jg):null}}]),t}();e.a=d},function(t,e,n){var i=n(21),r=n.n(i),s=function(){function t(e){o(this,t),this.Xg=r.a,this.extend(e)}return t.prototype.extend=function(t){var e=Date.now()+t;e>this.Xg&&(this.Xg=e)},f(t,[{key:"active",get:function(){return Date.now()<this.Xg}},{key:"$g",get:function(){return this.Xg}},{key:"Qg",get:function(){var t=this.Xg-Date.now();return t>0?t:0}}]),t}();e.a=s},function(t,e,n){function i(t,e,n){if(void 0!==e.backendUrl&&(t.DISTRIBUTOR.URL=e.backendUrl,t.DISTRIBUTOR.OVERRIDDEN=!0),e.cacheSize&&(t.P2P_CACHE_MAX_SIZE=1024*e.cacheSize*1024,t.LIVE.P2P_CACHE_MAX_SIZE=t.P2P_CACHE_MAX_SIZE),void 0!==e.activateP2P&&(t.ALLOW_P2P=!!e.activateP2P),void 0!==e.debug&&(t.DEBUG=!!e.debug),e.signalingUrl&&(t.SIGNALING_URL=e.signalingUrl),e.trackerUrl&&(t.TRACKER_URL=e.trackerUrl),e.analyticsUrl&&(t.ANALYTICS.KLARA_URL=e.analyticsUrl),e.deviceInfo&&(t.DEVICE_INFO=e.deviceInfo),void 0!==e.rangeRequestEnabled&&(t.RANGE_REQUEST_DETECTION=!!e.rangeRequestEnabled),void 0!==e.enableStunServers&&(t.ENABLE_STUN=!!e.enableStunServers),!e.streamrootKey)throw new Error("There must be a streamrootKey in the P2PConfig object");t.ID_CLIENT=e.streamrootKey,t.ENABLE_MOBILE_BROWSER=!!e.mobileBrowserEnabled,t.ENABLE_SAFARI=!!e.safariEnabled,t.P2P_PROTOCOL_VERSION+="-"+n}function r(t,e,n){if(v.has(n))p.a.hi("Attempt to inject non-injectable "+n+".");else{var i=function(t){return t.substr(t.lastIndexOf(".")+1)}(n);t[i]=e[i]}}function o(t,e,n){/^MOBILE.*/.test(n)||p.a.hi("Conf-injecting key "+n+" not exist in default conf.")}function s(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";c()(e).forEach(function(o){var a=""===r?o:r+"."+o;void 0!==t[o]?"object"!=h(e[o])||Array.isArray(e[o])?n(t,e,a):s(t[o],e[o],n,i,a):i(t,e,a)})}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0!==e.CONF_LABEL?(s(t,e,r,o),n&&(t.P2P_PROTOCOL_VERSION+="-"+t.CONF_LABEL),void 0!==e.CHUNK_SIZE&&(t.P2P_PROTOCOL_VERSION+="-cz"+e.CHUNK_SIZE)):p.a.hi("Received config from distributor, but no CONF_LABEL was present")}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a});var u=n(43),c=n.n(u),f=n(60),l=n.n(f),d=n(2),p=n.n(d),v=new l.a(["TRACKER_URL","SIGNALING_URL","FALLBACK_URLS.KLARA_URL","DISTRIBUTOR.URL","DISTRIBUTOR.OVERRIDDEN","DISTRIBUTOR.TIMEOUT_DELAY","DISTRIBUTOR.MAX_RETRY","SIGNALING_DELAY_STEP","SIGNALING_DELAY_MAX","SIGNALING_DELAY_MAX_INITIAL","TRACKER_DELAY_MAX","TRACKER_DELAY_INIT","SEND_TRACKS_INTERVAL","ANALYTICS.KLARA_URL","ANALYTICS.RETRY_NUMBER","ANALYTICS.RETRY_DELAY","ANALYTICS.TIMEOUT_DELAY","ANALYTICS.TRAFFIC_INTERVAL_ARRAY","ANALYTICS.STATS_INTERVAL","ANALYTICS.CONTROL_INTERVAL","QOS_P2P_DISABLED","ERRORS.API_KEY","ERRORS.HANDLER","ERRORS.STAGES","PEER_CONNECTION_TIMEOUT","SEND_HEARTBEAT_INTERVAL","CHECK_HEARTBEAT_INTERVAL","CLIENT_TRACKER_PROTOCOL_VERSION","P2P_PROTOCOL_VERSION","MAX_DISTRIBUTED_SEGMENT_LIST_LENGTH","GETSEGMENTTIME_CACHE_MAX_SIZE","BUFFER_CHECK_INTERVAL","SPEED_MONITOR_INTERVAL","MEAN_SPEED_CALCULATION_INTERVAL","PEER_COMPUTE_RTT_INTERVAL","BITRATE_ESTIMATION_WINDOW","LATENCY_CAPPING_RATIO","LOCKED_RETRY_INTERVAL","LOCKED_RETRY_TIMEOUT","TIMEOUT_GET_FULL_SEGMENT","RETURN_COPY_SEGMENT","ALLOW_P2P","DEVICE_INFO","ID_CLIENT","ENABLE_MOBILE_BROWSER","ENABLE_SAFARI","CONTENT_ACTIVATED","RAMP_UP_ACTIVATED","DEBUG","ANALYTICS.ENABLE_STATS_SENDER","ANALYTICS.ENABLE_CONTROL_SENDER"])},function(t,e,n){var i=n(27);e.a={get:function(){var t=i.a.vi();return t.Er?-1!==t.Er.indexOf("CrKey")?"chromecast":(t.gi,t.Ti,i.a.mi()?function(t){if(/Android.* Chrome\/[0-9.]+ /.test(t)){if(-1!==t.indexOf("wv"))return!0;if(/ Version\/[0-9]+\.[0.9]+ /.test(t))return!0}return!1}(t.Er)?"android-webview":"web-mobile":"web-desktop"):"unknown"}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),a=n.n(s),u=n(253),c=n(99),f=n(39),h=null,l={},d={},p=function(t){function e(n,r,s){var a;return o(this,e),(a=i(this,t.call(this,n,r,s))).eh(),a}return r(e,t),e.prototype.eh=function(){var t=this;if(h){var e=this.Wr?"setInterval":"setTimeout";h.postMessage({command:e,id:this.Hr,time:this.Vr}),l[this.Hr]=this.jr}else if(this.Wr){var n=function e(){d[t.Hr]=setTimeout(e,t.Vr),t.jr()};d[this.Hr]=setTimeout(n,this.Vr)}else d[this.Hr]=setTimeout(function(){t.jr(),t.jr=f.a},this.Vr)},e.prototype.clear=function(){h?(delete l[this.Hr],h.postMessage({command:"clear",id:this.Hr})):(clearTimeout(d[this.Hr]),delete d[this.Hr]),this.jr=f.a},e}(c.b);try{window.Worker&&((h=new window.Worker(URL.createObjectURL(new Blob(["("+u.a.toString()+")()"],{type:"text/javascript"})))).onmessage=function(t){var e=t.data,n=e.id,i=e.command;l[n]&&(l[n](),"triggerTimeout"===i&&delete l[n])},h.onerror=function(t){a.a.hi("Error in TimerWorker",t.message)})}catch(t){}e.default=p},function(t,e,n){e.a=function(){function t(n,i){return function(){self.postMessage({id:n,command:"triggerInterval"}),e[n]=setTimeout(t(n,i),i)}}var e={};self.onmessage=function(n){var i=n.data,r=i.command,o=i.id,s=i.time;switch(r){case"setTimeout":e[o]=setTimeout(function(t){return function(){self.postMessage({id:t,command:"triggerTimeout"}),delete e[t]}}(o),s);break;case"setInterval":e[o]=setTimeout(t(o,s),s);break;case"clear":clearTimeout(e[o]),delete e[o]}}}},function(t,e,n){e.a=function(t){return t.endsWith("/")?t:t+"/"},String.prototype.endsWith||(String.prototype.endsWith=function(t){var e=this.toString();return e.lastIndexOf(t)===e.length-1})},function(t,e,n){t.exports={default:n(266),_:!0}},function(t,e,n){t.exports={default:n(271),_:!0}},function(t,e,n){t.exports={default:n(274),_:!0}},function(t,e,n){t.exports={default:n(275),_:!0}},function(t,e,n){t.exports={default:n(276),_:!0}},function(t,e,n){t.exports={default:n(279),_:!0}},function(t,e,n){function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,n){for(var i,o=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(r(i));return o.join("")}e.byteLength=function(t){return 3*t.length/4-i(t)},e.Ps=function(t){var e,n,r,o,s,c=t.length;o=i(t),s=new u(3*c/4-o),n=o>0?c-4:c;var f=0;for(e=0;e<n;e+=4)r=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],s[f++]=r>>16&255,s[f++]=r>>8&255,s[f++]=255&r;return 2===o?(r=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,s[f++]=255&r):1===o&&(r=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,s[f++]=r>>8&255,s[f++]=255&r),s},e.Ls=function(t){for(var e,n=t.length,i=n%3,r="",a=[],u=0,c=n-i;u<c;u+=16383)a.push(o(t,u,u+16383>c?c:u+16383));return 1===i?(e=t[n-1],r+=s[e>>2],r+=s[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=s[e>>10],r+=s[e>>4&63],r+=s[e<<2&63],r+="="),a.push(r),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=c.length;f<h;++f)s[f]=c[f],a[c.charCodeAt(f)]=f;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,e,n){n(36),n(308),t.exports=n(3).Array.from},function(t,e,n){n(49),n(36),t.exports=n(307)},function(t,e,n){var i=n(3),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){n(75),n(36),n(49),n(310),n(328),n(327),n(326),t.exports=n(3).Map},function(t,e,n){n(311),t.exports=n(3).Number.isInteger},function(t,e,n){n(312),t.exports=9007199254740991},function(t,e,n){n(313),t.exports=-9007199254740991},function(t,e,n){n(314),t.exports=parseInt},function(t,e,n){n(315),t.exports=n(3).Object.assign},function(t,e,n){n(316);var i=n(3).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},function(t,e,n){n(317),t.exports=n(3).Object.freeze},function(t,e,n){n(318);var i=n(3).Object;t.exports=function(t){return i.getOwnPropertyNames(t)}},function(t,e,n){n(319),t.exports=n(3).Object.getPrototypeOf},function(t,e,n){n(320),t.exports=n(3).Object.isFrozen},function(t,e,n){n(321),t.exports=n(3).Object.is},function(t,e,n){n(322),t.exports=n(3).Object.keys},function(t,e,n){n(323),t.exports=n(3).Object.seal},function(t,e,n){n(329),t.exports=n(3).Object.values},function(t,e,n){n(75),n(36),n(49),n(324),n(330),n(331),t.exports=n(3).Promise},function(t,e,n){n(75),n(36),n(49),n(325),n(334),n(333),n(332),t.exports=n(3).Set},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(32);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(35),r=n(48),o=n(305);t.exports=function(t){return function(e,n,s){var a,u=i(e),c=r(u.length),f=o(s,c);if(t&&n!=n){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var i=n(14),r=n(65),o=n(23),s=n(48),a=n(287);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,f=4==t,h=6==t,l=5==t||h,d=e||a;return function(e,a,p){for(var v,g,y=o(e),m=r(y),E=i(a,p,3),_=s(m.length),T=0,b=n?d(e,_):u?d(e,0):void 0;_>T;T++)if((l||T in m)&&(v=m[T],g=E(v,T,y),t))if(n)b[T]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return T;case 2:b.push(v)}else if(f)return!1;return h?-1:c||f?f:b}}},function(t,e,n){var i=n(8),r=n(291),o=n(9)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(286);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(16),r=n(68);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){t.exports=!n(15)&&!n(18)(function(){return 7!=Object.defineProperty(n(63)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(31);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(8),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(114),r=n(68),o=n(47),s={};n(19)(s,n(9)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(7),r=n(127).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==n(31)(s);t.exports=function(){var t,e,n,c=function(){var i,r;for(u&&(i=s.domain)&&i.Zg();t;){r=t.Ht,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.Jg()};if(u)n=function(){s.eo(c)};else if(o){var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}else if(a&&a.resolve){var l=a.resolve();n=function(){l.then(c)}}else n=function(){r.call(i,c)};return function(i){var r={Ht:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(46),r=n(298),o=n(118),s=n(23),a=n(65),u=Object.assign;t.exports=!u||n(18)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,c=1,f=r.f,h=o.f;u>c;)for(var l,d=a(arguments[c++]),p=f?i(d).concat(f(d)):i(d),v=p.length,g=0;v>g;)h.call(d,l=p[g++])&&(n[l]=d[l]);return n}:u},function(t,e,n){var i=n(35),r=n(297).f,o={}.toString,s="object"==("undefined"==typeof window?"undefined":h(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(i(t))}},function(t,e,n){var i=n(117),r=n(64).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(46),r=n(35),o=n(118).f;t.exports=function(t){return function(e){for(var n,s=r(e),a=i(s),u=a.length,c=0,f=[];u>c;)o.call(s,n=a[c++])&&f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var i=n(7).parseInt,r=n(304).trim,o=n(126),s=/^[-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(s.test(n)?16:10))}:i},function(t,e,n){t.exports=n(19)},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(71),r=n(44);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){var i=n(4),r=n(44),o=n(18),s=n(126),a="["+s+"]",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),f=function(t,e,n){var r={},a=o(function(){return!!s[t]()||"Ã¢â‚¬â€¹Ã‚â€¦"!="Ã¢â‚¬â€¹Ã‚â€¦"[t]()}),u=r[t]=a?e(h):s[t];n&&(r[n]=u),i(i.Pt+i.It*a,"String",r)},h=f.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=f},function(t,e,n){var i=n(71),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(8);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(13),r=n(74);t.exports=n(3).tT=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){var i=n(14),r=n(4),o=n(23),s=n(110),a=n(109),u=n(48),c=n(288),f=n(74);r(r.Lt+r.It*!n(111)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,h,l=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=0,m=f(l);if(g&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==m||d==Array&&a(m))for(n=new d(e=u(l.length));e>y;y++)c(n,y,g?v(l[y],y):l[y]);else for(h=m.call(l),n=new d;!(r=h.next()).done;y++)c(n,y,g?s(h,v,[r.value,y],!0):r.value);return n.length=y,n}})},function(t,e,n){var i=n(282),r=n(112),o=n(34),s=n(35);t.exports=n(66)(Array,"Array",function(t,e){this.Ri=s(t),this.Ci=0,this.to=e},function(){var t=this.Ri,e=this.to,n=this.Ci++;return!t||n>=t.length?(this.Ri=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.iT=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(105),r=n(73);t.exports=n(107)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.Zr(r(this,"Map"),t);return e&&e.Xr},set:function(t,e){return i.Qr(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(4);i(i.Lt,"Number",{isInteger:n(292)})},function(t,e,n){var i=n(4);i(i.Lt,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(4);i(i.Lt,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(4),r=n(300);i(i.Lt+i.It*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,n){var i=n(4);i(i.Lt+i.It,"Object",{assign:n(295)})},function(t,e,n){var i=n(4);i(i.Lt+i.It*!n(15),"Object",{defineProperties:n(115)})},function(t,e,n){var i=n(8),r=n(45).qi;n(22)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){n(22)("getOwnPropertyNames",function(){return n(296).f})},function(t,e,n){var i=n(23),r=n(116);n(22)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(8);n(22)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(4);i(i.Lt,"Object",{is:n(302)})},function(t,e,n){var i=n(23),r=n(46);n(22)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(8),r=n(45).qi;n(22)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i,r,o,s,a=n(113),u=n(7),c=n(14),f=n(62),h=n(4),l=n(8),d=n(30),p=n(61),v=n(32),g=n(125),y=n(127).set,m=n(294)(),E=n(67),_=n(119),T=n(120),b="Promise",w=u.TypeError,S=u.process,A=u[b],R="process"==f(S),L=function(){},O=r=E.f,I=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(9)("species")]=function(t){t(L,L)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e}catch(t){}}(),C=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t.sT){t.sT=!0;var n=t.io;m(function(){for(var i=t.eT,r=1==t.nT,o=0;n.length>o;)!function(e){var n,o,s=r?e.ok:e.rT,a=e.resolve,u=e.reject,c=e.domain;try{s?(r||(2==t.oT&&N(t),t.oT=1),!0===s?n=i:(c&&c.Jg(),n=s(i),c&&c.Zg()),n===e.Js?u(w("Promise-chain cycle")):(o=C(n))?o.call(n,a,u):a(n)):u(i)}catch(t){u(t)}}(n[o++]);t.io=[],t.sT=!1,e&&!t.oT&&P(t)})}},P=function(t){y.call(u,function(){var e,n,i,r=t.eT,o=M(t);if(o&&(e=_(function(){R?S.$t("unhandledRejection",r,t):(n=u.hT)?n({Js:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t.oT=R||M(t)?2:1),t.cT=void 0,o&&e.e)throw e.Xr})},M=function t(e){if(1==e.oT)return!1;for(var n,i=e.cT||e.io,r=0;i.length>r;)if((n=i[r++]).rT||!t(n.Js))return!1;return!0},N=function(t){y.call(u,function(){var e;R?S.$t("rejectionHandled",t):(e=u.aT)&&e({Js:t,reason:t.eT})})},x=function(t){var e=this;e.uT||(e.uT=!0,(e=e.fT||e).eT=t,e.nT=2,e.cT||(e.cT=e.io.slice()),D(e,!0))},k=function t(e){var n,i=this;if(!i.uT){i.uT=!0,i=i.fT||i;try{if(i===e)throw w("Promise can't be resolved itself");(n=C(e))?m(function(){var r={fT:i,uT:!1};try{n.call(e,c(t,r,1),c(x,r,1))}catch(t){x.call(r,t)}}):(i.eT=e,i.nT=1,D(i,!1))}catch(e){x.call({fT:i,uT:!1},e)}}};I||(A=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){p(this,A,b,"_h"),d(t),i.call(this);try{t(c(k,this,1),c(x,this,1))}catch(t){x.call(this,t)}}),(i=function(t){this.io=[],this.cT=void 0,this.nT=0,this.uT=!1,this.eT=void 0,this.oT=0,this.sT=!1}).prototype=n(69)(A.prototype,{then:function(t,e){var n=O(g(this,A));return n.ok="function"!=typeof t||t,n.rT="function"==typeof e&&e,n.domain=R?S.domain:void 0,this.io.push(n),this.cT&&this.cT.push(n),this.nT&&D(this,!1),n.Js},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.Js=t,this.resolve=c(k,t,1),this.reject=c(x,t,1)},E.f=O=function(t){return t===A||t===s?new o(t):r(t)}),h(h.Ot+h.kt+h.It*!I,{Promise:A}),n(47)(A,b),n(123)(b),s=n(3)[b],h(h.Lt+h.It*!I,b,{reject:function(t){var e=O(this);return(0,e.reject)(t),e.Js}}),h(h.Lt+h.It*(a||!I),b,{resolve:function(t){return T(a&&this===s?A:this,t)}}),h(h.Lt+h.It*!(I&&n(111)(function(t){A.all(t).catch(L)})),b,{all:function(t){var e=this,n=O(e),i=n.resolve,r=n.reject,o=_(function(){var n=[],o=0,s=1;v(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o.e&&r(o.Xr),n.Js},race:function(t){var e=this,n=O(e),i=n.reject,r=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.Xr),n.Js}})},function(t,e,n){var i=n(105),r=n(73);t.exports=n(107)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.Qr(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){n(121)("Map")},function(t,e,n){n(122)("Map")},function(t,e,n){var i=n(4);i(i.Pt+i.Bt,"Map",{toJSON:n(106)("Map")})},function(t,e,n){var i=n(4),r=n(299)(!1);i(i.Lt,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(4),r=n(3),o=n(7),s=n(125),a=n(120);i(i.Pt+i.Bt,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){var i=n(4),r=n(67),o=n(119);i(i.Lt,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.Xr),e.Js}})},function(t,e,n){n(121)("Set")},function(t,e,n){n(122)("Set")},function(t,e,n){var i=n(4);i(i.Pt+i.Bt,"Set",{toJSON:n(106)("Set")})},function(t,e,n){function i(t){return decodeURIComponent(t.replace(/\+/g," "))}var r=Object.prototype.hasOwnProperty;e.stringify=function(t,e){var n=[];"string"!=typeof(e=e||"")&&(e="?");for(var i in t)r.call(t,i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n.length?e+n.join("&"):""},e.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);r[i(e[1])]=i(e[2]));return r}},function(t,e,n){t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){var i;!function(r,o){var s="model",a="name",u="type",c="vendor",f="version",l="architecture",d="console",p="mobile",v="tablet",g="smarttv",y=function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},m=function(t){return t.toLowerCase()},E=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},_={lT:function(t,e){for(var n,i,r,s,a,u,c=0;c<e.length&&!a;){var f=e[c],l=e[c+1];for(n=i=0;n<f.length&&!a;)if(a=f[n++].exec(t))for(r=0;r<l.length;r++)u=a[++i],"object"==h(s=l[r])&&s.length>0?2==s.length?"function"==typeof s[1]?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3==s.length?"function"!=typeof s[1]||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4==s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;c+=2}},dT:function(t,e){for(var n in e)if("object"==h(e[n])&&e[n].length>0){for(var i=0;i<e[n].length;i++)if(y(e[n][i],t))return"?"===n?o:n}else if(y(e[n],t))return"?"===n?o:n;return t}},T={_T:{"Fire Phone":["SD","KF"]}},b={_T:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}},w={version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}},S={wr:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,f],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[a,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[a,f],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[a,"Puffin"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],f],[/(QQ)\/([\d\.]+)/i],[a,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[a,f],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[a,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[a,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[a,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,f],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[a,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,a],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[a,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[f,_.dT,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,f]],mT:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[l,"amd64"]],[/(ia32(?=;))/i],[[l,m]],[/((?:i[346]|x)86)[;\)]/i],[[l,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[l,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[l,/ower/,"",m]],[/(sun4\w)[;\)]/i],[[l,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[l,m]]],gi:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,c,[u,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[c,"Apple"],[u,v]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,s,[u,v]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[s,[c,"Amazon"],[u,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[s,_.dT,T._T],[c,"Amazon"],[u,p]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,c,[u,p]],[/\((ip[honed|\s\w*]+);/i],[s,[c,"Apple"],[u,p]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,s,[u,p]],[/\(bb10;\s(\w+)/i],[s,[c,"BlackBerry"],[u,p]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[c,"Asus"],[u,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[s,"Xperia Tablet"],[u,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[s,[c,"Sony"],[u,p]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,s,[u,d]],[/android.+;\s(shield)\sbuild/i],[s,[c,"Nvidia"],[u,d]],[/(playstation\s[34portablevi]+)/i],[s,[c,"Sony"],[u,d]],[/(sprint\s(\w+))/i],[[c,_.dT,b.vendor],[s,_.dT,b._T],[u,p]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,s,[u,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[c,[s,/_/g," "],[u,p]],[/(nexus\s9)/i],[s,[c,"HTC"],[u,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[s,[c,"Huawei"],[u,p]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,s,[u,p]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[c,"Microsoft"],[u,d]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[c,"Microsoft"],[u,p]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[c,"Motorola"],[u,p]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[c,"Motorola"],[u,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,E],[s,E],[u,g]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[c,"Samsung"],[u,g]],[/\(dtv[\);].+(aquos)/i],[s,[c,"Sharp"],[u,g]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],s,[u,v]],[/smart-tv.+(samsung)/i],[c,[u,g],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[c,"Samsung"],s,[u,p]],[/sie-(\w+)*/i],[s,[c,"Siemens"],[u,p]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[c,"Nokia"],s,[u,p]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[c,"Acer"],[u,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[c,"LG"],[u,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],s,[u,v]],[/(lg) netcast\.tv/i],[c,s,[u,g]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[c,"LG"],[u,p]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[c,"Lenovo"],[u,v]],[/linux;.+((jolla));/i],[c,s,[u,p]],[/((pebble))app\/[\d\.]+\s/i],[c,s,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,s,[u,p]],[/crkey/i],[[s,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[s,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[s,[c,"Google"],[u,v]],[/android.+;\s(pixel xl|pixel)\s/i],[s,[c,"Google"],[u,p]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[s,/_/g," "],[c,"Xiaomi"],[u,p]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[s,/_/g," "],[c,"Xiaomi"],[u,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[c,"Meizu"],[u,v]],[/android.+a000(1)\s+build/i],[s,[c,"OnePlus"],[u,p]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[c,"RCA"],[u,v]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[s,[c,"Dell"],[u,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[c,"Verizon"],[u,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],s,[u,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[c,"NuVision"],[u,v]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[c,"ZTE"],s,[u,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[c,"Swiss"],[u,p]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[c,"Swiss"],[u,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[c,"Zeki"],[u,v]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[c,"Dragon Touch"],s,[u,v]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[s,[c,"Insignia"],[u,v]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[s,[c,"NextBook"],[u,v]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],s,[u,p]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[c,"LvTel"],s,[u,p]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[c,"Envizen"],[u,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[c,s,[u,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[c,"MachSpeed"],[u,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,s,[u,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[c,"Rotor"],[u,v]],[/android.+(KS(.+))\s+build/i],[s,[c,"Amazon"],[u,v]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[c,s,[u,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,m],c,s],[/(android.+)[;\/].+build/i],[s,[c,"Generic"]]],gT:[[/windows.+\sedge\/([\w\.]+)/i],[f,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,f],[/rv\:([\w\.]+).*(gecko)/i],[f,a]],Ti:[[/microsoft\s(windows)\s(vista|xp)/i],[a,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[f,_.dT,w.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[f,_.dT,w.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[a,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],f],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,f],[/(haiku)\s(\w+)/i],[a,f],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[a,f]]},A=function t(e,n){if("object"==(void 0===e?"undefined":h(e))&&(n=e,e=o),!(this instanceof t))return new t(e,n)._i();var i=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),s=n?function(t,e){var n={};for(var i in t)e[i]&&e[i].length%2==0?n[i]=e[i].concat(t[i]):n[i]=t[i];return n}(S,n):S;return this.TT=function(){var t={name:o,version:o};return _.lT.call(t,i,s.wr),t.Vv=function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:o}(t.version),t},this.ST=function(){var t={AT:o};return _.lT.call(t,i,s.mT),t},this.CT=function(){var t={vendor:o,_T:o,type:o};return _.lT.call(t,i,s.gi),t},this.DT=function(){var t={name:o,version:o};return _.lT.call(t,i,s.gT),t},this.bT=function(){var t={name:o,version:o};return _.lT.call(t,i,s.Ti),t},this._i=function(){return{Er:this.yT(),wr:this.TT(),gT:this.DT(),Ti:this.bT(),gi:this.CT(),mT:this.ST()}},this.yT=function(){return i},this.pi=function(t){return i=t,this},this};A.VERSION="0.7.17",A.NT={IT:a,OT:"major",VERSION:f},A.LT={PT:l},A.MT={kT:s,VENDOR:c,UT:u,BT:d,FT:p,GT:g,HT:v,xT:"wearable",jT:"embedded"},A.VT={IT:a,VERSION:f},A.KT={IT:a,VERSION:f},void 0!==e?(void 0!==t&&t.exports&&(e=t.exports=A),e.WT=A):n(341)?(i=function(){return A}.call(e,n,e,t))!==o&&(t.exports=i):r&&(r.WT=A);var R=r&&(r.$T||r.YT);if(void 0!==R){var L=new A;R.Er=L._i(),R.Er.get=function(){return L.yT()},R.Er.set=function(t){L.pi(t);var e=L._i();for(var n in e)R.Er[n]=e[n]}}}("object"==("undefined"==typeof window?"undefined":h(window))?window:this)},function(t,e,n){(function(e){function i(t){var n,i={},r=h(t=t||e.location||{});if("blob:"===t.protocol)i=new o(unescape(t.pathname),{});else if("string"===r){i=new o(t,{});for(n in l)delete i[n]}else if("object"===r){for(n in t)n in l||(i[n]=t[n]);void 0===i.qT&&(i.qT=c.test(t.href))}return i}function r(t){var e=u.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",qT:!!e[2],zT:e[3]}}function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);var u,c,l,d,p,v,g=f.slice(),y=void 0===e?"undefined":h(e),m=this,E=0;for("object"!==y&&"string"!==y&&(n=e,e=null),n&&"function"!=typeof n&&(n=a.parse),e=i(e),u=!(c=r(t||"")).protocol&&!c.qT,m.qT=c.qT||u&&e.qT,m.protocol=c.protocol||e.protocol||"",t=c.zT,c.qT||(g[2]=[/(.*)/,"pathname"]);E<g.length;E++)l=(d=g[E])[0],v=d[1],l!=l?m[v]=t:"string"==typeof l?~(p=t.indexOf(l))&&("number"==typeof d[2]?(m[v]=t.slice(0,p),t=t.slice(p+d[2])):(m[v]=t.slice(p),t=t.slice(0,p))):(p=l.exec(t))&&(m[v]=p[1],t=t.slice(0,p.index)),m[v]=m[v]||(u&&d[3]?e[v]||"":""),d[4]&&(m[v]=m[v].toLowerCase());n&&(m.XT=n(m.XT)),u&&e.qT&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==e.pathname)&&(m.pathname=function(t,n){for(var i=(e.pathname||"/").split("/").slice(0,-1).concat(t.split("/")),r=i.length,o=i[r-1],s=!1,a=0;r--;)"."===i[r]?i.splice(r,1):".."===i[r]?(i.splice(r,1),a++):a&&(0===r&&(s=!0),i.splice(r,1),a--);return s&&i.unshift(""),"."!==o&&".."!==o||i.push(""),i.join("/")}(m.pathname)),s(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.QT&&(d=m.QT.split(":"),m.username=d[0]||"",m.password=d[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}var s=n(336),a=n(335),u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,f=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,XT:1};o.prototype={set:function(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||a.parse)(e)),i[t]=e;break;case"port":i[t]=e,s(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.qT=!n;break;case"pathname":case"hash":if(e){var r="pathname"===t?"/":"#";i[t]=e.charAt(0)!==r?r+e:e}else i[t]=e;break;default:i[t]=e}for(var o=0;o<f.length;o++){var u=f[o];u[4]&&(i[u[1]]=i[u[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=a.stringify);var e,n=this.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(this.qT?"//":"");return this.username&&(i+=this.username,this.password&&(i+=":"+this.password),i+="@"),i+=this.host+this.pathname,(e="object"==h(this.XT)?t(this.XT):this.XT)&&(i+="?"!==e.charAt(0)?"?"+e:e),this.hash&&(i+=this.hash),i}},o.ZT=r,o.location=i,o.JT=a,t.exports=o}).call(e,n(76))},function(t,e,n){var i=n(131),r=n(130),o=i(),s=[1|o[0],o[1],o[2],o[3],o[4],o[5]],a=16383&(o[6]<<8|o[7]),u=0,c=0;t.exports=function(t,e,n){var i=e&&n||0,o=e||[],f=void 0!==(t=t||{}).tS?t.tS:a,h=void 0!==t.iS?t.iS:(new Date).getTime(),l=void 0!==t.sS?t.sS:c+1,d=h-u+(l-c)/1e4;if(d<0&&void 0===t.tS&&(f=f+1&16383),(d<0||h>u)&&void 0===t.sS&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,c=l,a=f;var p=(1e4*(268435455&(h+=122192928e5))+l)%4294967296;o[i++]=p>>>24&255,o[i++]=p>>>16&255,o[i++]=p>>>8&255,o[i++]=255&p;var v=h/4294967296*1e4&268435455;o[i++]=v>>>8&255,o[i++]=255&v,o[i++]=v>>>24&15|16,o[i++]=v>>>16&255,o[i++]=f>>>8|128,o[i++]=255&f;for(var g=t.eS||s,y=0;y<6;++y)o[i+y]=g[y];return e||r(o)}},function(t,e,n){var i=n(131),r=n(130);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.nS||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||r(s)}},function(t,e){(function(e){t.exports=e}).call(e,{})}])})}).call(e,n(91)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(e){function i(t){t=t||e.location||{};var n,i={},r=typeof t;if("blob:"===t.protocol)i=new s(unescape(t.pathname),{});else if("string"===r){i=new s(t,{});for(n in p)delete i[n]}else if("object"===r){for(n in t)n in p||(i[n]=t[n]);void 0===i.slashes&&(i.slashes=l.test(t.href))}return i}function r(t){var e=h.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function o(t,e){for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),i=n.length,r=n[i-1],o=!1,s=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),s++):s&&(0===i&&(o=!0),n.splice(i,1),s--);return o&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}function s(t,e,n){if(!(this instanceof s))return new s(t,e,n);var a,u,h,l,p,v,g=d.slice(),y=typeof e,m=this,E=0;for("object"!==y&&"string"!==y&&(n=e,e=null),n&&"function"!=typeof n&&(n=f.parse),e=i(e),u=r(t||""),a=!u.protocol&&!u.slashes,m.slashes=u.slashes||a&&e.slashes,m.protocol=u.protocol||e.protocol||"",t=u.rest,u.slashes||(g[2]=[/(.*)/,"pathname"]);E<g.length;E++)l=g[E],h=l[0],v=l[1],h!==h?m[v]=t:"string"==typeof h?~(p=t.indexOf(h))&&("number"==typeof l[2]?(m[v]=t.slice(0,p),t=t.slice(p+l[2])):(m[v]=t.slice(p),t=t.slice(0,p))):(p=h.exec(t))&&(m[v]=p[1],t=t.slice(0,p.index)),m[v]=m[v]||(a&&l[3]?e[v]||"":""),l[4]&&(m[v]=m[v].toLowerCase());n&&(m.query=n(m.query)),a&&e.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==e.pathname)&&(m.pathname=o(m.pathname,e.pathname)),c(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(l=m.auth.split(":"),m.username=l[0]||"",m.password=l[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}function a(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||f.parse)(e)),i[t]=e;break;case"port":i[t]=e,c(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var r="pathname"===t?"/":"#";i[t]=e.charAt(0)!==r?r+e:e}else i[t]=e;break;default:i[t]=e}for(var o=0;o<d.length;o++){var s=d[o];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function u(t){t&&"function"==typeof t||(t=f.stringify);var e,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var r=i+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,e="object"==typeof n.query?t(n.query):n.query,e&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r}var c=n(93),f=n(94),h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,l=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,d=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};s.prototype={set:a,toString:u},s.extractProtocol=r,s.location=i,s.qs=f,t.exports=s}).call(e,n(47))},function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){"use strict";function i(t){return decodeURIComponent(t.replace(/\+/g," "))}function r(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);r[i(e[1])]=i(e[2]));return r}function o(t,e){e=e||"";var n=[];"string"!=typeof e&&(e="?");for(var i in t)s.call(t,i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n.length?e+n.join("&"):""}var s=Object.prototype.hasOwnProperty;e.stringify=o,e.parse=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=(0,r.default)({DASH:"dash",HLS:"hls",SMOOTH:"smooth"}),t.exports=e.default},function(t,e,n){n(97),t.exports=n(0).Object.freeze},function(t,e,n){var i=n(8),r=n(48).onFreeze;n(18)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.assertContentAndResponseType=void 0;var r=n(99),o=i(r),s=n(49),a=i(s),u=n(50),c=i(u),f=function(t){var e=t.contentType,n=t.responseType;if(-1===(0,o.default)(a.default).indexOf(e))throw new TypeError("Invalid FetchConfig: '"+e+"' is not a valid ContentType");if(-1===(0,o.default)(c.default).indexOf(n))throw new TypeError("Invalid FetchConfig: '"+n+"' is not a valid ResponseType");switch(e){case a.default.MEDIA_SEGMENT:case a.default.INIT_SEGMENT:if(n!==c.default.ARRAY_BUFFER)throw new TypeError("Invalid FetchConfig: ContentTypes MEDIA_SEGMENT and INIT_SEGMENT are only compatible with ResponseType ARRAY_BUFFER");break;case a.default.MANIFEST:if(n!==c.default.TEXT)throw new TypeError("Invalid FetchConfig: ContentType MANIFEST is only compatible with ResponseType TEXT")}};e.assertContentAndResponseType=f},function(t,e,n){t.exports={default:n(100),__esModule:!0}},function(t,e,n){n(101),t.exports=n(0).Object.values},function(t,e,n){var i=n(4),r=n(102)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(16),r=n(12),o=n(20).f;t.exports=function(t){return function(e){for(var n,s=r(e),a=i(s),u=a.length,c=0,f=[];u>c;)o.call(s,n=a[c++])&&f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var i=n(12),r=n(30),o=n(104);t.exports=function(t){return function(e,n,s){var a,u=i(e),c=r(u.length),f=o(s,c);if(t&&n!=n){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var i=n(31),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=(0,r.default)({EMERGENCY_TRACK_SWITCH:"onEmergencyTrackSwitch",PLAYBACK_ERROR:"onPlaybackError",TRACK_SWITCH:"onTrackSwitch",EMERGENCY_FRAG_LOAD_ABORT:"onEmergencyFragLoadAborted",TRACK_CHANGE_EVENT:"onTrackChange"}),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=(0,r.default)({ERR_INVALID_STREAM:"errorInvalidStream",ERR_INVALID_STREAMROOT_KEY:"errorInvalidStreamrootKey",ERR_NOT_SUPPORTED_STREAM:"errorNotSupportedStream"}),t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(5),a=i(s),u=n(46),c=i(u),f=n(53),h=i(f),l=(n(169),n(43)),d=n(42),p=function(){function t(){(0,o.default)(this,t),this._parserAdapter=new c.default,this._parserAdapter.onMediaMapCreated=this._onMediaMapCreated.bind(this),this.onMediaMapCreated=l.noop}return(0,a.default)(t,[{key:"fetchManifest",value:function(t,e){var n=this,i={onSuccess:function(i,r,o){(0,d.createTimeout)(function(){e.onSuccess(i,r,o)},0),n._parserAdapter.updateManifest(r,t.url)},onError:e.onError||void 0,onProgress:e.onProgress||void 0};return new h.default(t).fetch(i)}},{key:"_onMediaMapCreated",value:function(t){this.onMediaMapCreated(t)}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){t.exports={default:n(109),__esModule:!0}},function(t,e,n){n(35),n(113),t.exports=n(0).Array.from},function(t,e,n){var i=n(31),r=n(29);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var i=n(36),r=n(17),o=n(26),s={};n(10)(s,n(3)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(6),r=n(7),o=n(16);t.exports=n(9)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}},function(t,e,n){"use strict";var i=n(13),r=n(4),o=n(22),s=n(59),a=n(60),u=n(30),c=n(114),f=n(61);r(r.S+r.F*!n(63)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,h,l=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=0,m=f(l);if(g&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==m||d==Array&&a(m))for(e=u(l.length),n=new d(e);e>y;y++)c(n,y,g?v(l[y],y):l[y]);else for(h=m.call(l),n=new d;!(r=h.next()).done;y++)c(n,y,g?s(h,v,[r.value,y],!0):r.value);return n.length=y,n}})},function(t,e,n){"use strict";var i=n(6),r=n(17);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){"use strict";t.exports=n(116)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(64),o=i(r),s=n(71),a=i(s),u=n(72),c=i(u),f=n(1),h=i(f),l=n(5),d=i(l),p=n(73),v=i(p),g=n(77),y=i(g),m=n(150),E=i(m),_=n(42),T=n(44),b=i(T),w=n(82),S=i(w),A=function(t){function e(t,n,i){(0,h.default)(this,e);var r=(0,v.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t,n,i));return r._init(),r}return(0,y.default)(e,t),(0,d.default)(e,[{key:"_init",value:function(){this._xhr=new XMLHttpRequest,this._xhr.open(this._method,this._url,!0),this._xhr.responseType=this._options.responseType,this._xhr.withCredentials=this._options.withCredentials;for(var t=(0,a.default)(this._options.headers),e=0,n=t.length;e<n;e++){var i=t[e];this._xhr.setRequestHeader(i,this._options.headers[i])}this._aborted=!1}},{key:"abort",value:function(){this._aborted=!0,this._xhr.abort()}},{key:"_send",value:function(t){var n=this;return new o.default(function(i,r){n._aborted?r(new b.default(e.Errors.REQUEST_ABORTED)):n._options.timeout&&(n._retryTimer=(0,_.createTimeout)(function(){n.abort(),r(new b.default(e.Errors.REQUEST_TIMEOUT))},n._options.timeout)),n._xhr.onloadend=function(){n._aborted?r(new b.default(e.Errors.REQUEST_ABORTED)):n._xhr.readyState===e.ReadyStates.DONE?n._options.validStatusCodes.indexOf(n._xhr.status)>-1?i(n._xhr.response):r(new b.default(e.Errors.INVALID_STATUS,n._xhr.status)):r(new b.default(e.Errors.REQUEST_ERROR))},n._xhr.onprogress=function(t){var e=new S.default(t.lengthComputable,t.loaded,t.total);n._options.events.onprogress(e)},n._xhr.onerror=function(){r(new b.default(e.Errors.REQUEST_ERROR))},n._xhr.send(t)})}}]),e}(E.default);e.default=A,t.exports=e.default},function(t,e,n){n(65),n(35),n(66),n(121),n(128),n(129),t.exports=n(0).Promise},function(t,e,n){"use strict";var i=n(119),r=n(120),o=n(21),s=n(12);t.exports=n(55)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i,r,o,s,a=n(25),u=n(2),c=n(13),f=n(62),h=n(4),l=n(8),d=n(23),p=n(122),v=n(123),g=n(67),y=n(68).set,m=n(125)(),E=n(37),_=n(69),T=n(70),b=u.TypeError,w=u.process,S=u.Promise,A="process"==f(w),R=function(){},L=r=E.f,O=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(3)("species")]=function(t){t(R,R)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e}catch(t){}}(),I=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},C=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var i=t._v,r=1==t._s,o=0;n.length>o;)!function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,u=e.reject,c=e.domain;try{s?(r||(2==t._h&&M(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&c.exit()),n===e.promise?u(b("Promise-chain cycle")):(o=I(n))?o.call(n,a,u):a(n)):u(i)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){y.call(u,function(){var e,n,i,r=t._v,o=P(t);if(o&&(e=_(function(){A?w.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=A||P(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},P=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!P(e.promise))return!1;return!0},M=function(t){y.call(u,function(){var e;A?w.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},x=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw b("Promise can't be resolved itself");(e=I(t))?m(function(){var i={_w:n,_d:!1};try{e.call(t,c(x,i,1),c(N,i,1))}catch(t){N.call(i,t)}}):(n._v=t,n._s=1,C(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};O||(S=function(t){p(this,S,"Promise","_h"),d(t),i.call(this);try{t(c(x,this,1),c(N,this,1))}catch(t){N.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(126)(S.prototype,{then:function(t,e){var n=L(g(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(x,t,1),this.reject=c(N,t,1)},E.f=L=function(t){return t===S||t===s?new o(t):r(t)}),h(h.G+h.W+h.F*!O,{Promise:S}),n(26)(S,"Promise"),n(127)("Promise"),s=n(0).Promise,h(h.S+h.F*!O,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!O),"Promise",{resolve:function(t){return T(a&&this===s?S:this,t)}}),h(h.S+h.F*!(O&&n(63)(function(t){S.all(t).catch(R)})),"Promise",{all:function(t){var e=this,n=L(e),i=n.resolve,r=n.reject,o=_(function(){var n=[],o=0,s=1;v(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=L(e),i=n.reject,r=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(13),r=n(59),o=n(60),s=n(7),a=n(30),u=n(61),c={},f={},e=t.exports=function(t,e,n,h,l){var d,p,v,g,y=l?function(){return t}:u(t),m=i(n,h,e?2:1),E=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=a(t.length);d>E;E++)if((g=e?m(s(p=t[E])[0],p[1]):m(t[E]))===c||g===f)return g}else for(v=y.call(t);!(p=v.next()).done;)if((g=r(v,m,p.value,e))===c||g===f)return g};e.BREAK=c,e.RETURN=f},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(2),r=n(68).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==n(19)(s);t.exports=function(){var t,e,n,c=function(){var i,r;for(u&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){s.nextTick(c)};else if(o){var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}else if(a&&a.resolve){var l=a.resolve();n=function(){l.then(c)}}else n=function(){r.call(i,c)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(10);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(6),s=n(9),a=n(3)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(4),r=n(0),o=n(2),s=n(67),a=n(70);i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(4),r=n(37),o=n(69);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(131),t.exports=n(0).Object.keys},function(t,e,n){var i=n(22),r=n(16);n(18)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){n(133),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var i=n(22),r=n(58);n(18)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){t.exports={default:n(135),__esModule:!0}},function(t,e,n){n(35),n(66),t.exports=n(39).f("iterator")},function(t,e,n){t.exports={default:n(137),__esModule:!0}},function(t,e,n){n(138),n(65),n(141),n(142),t.exports=n(0).Symbol},function(t,e,n){"use strict";var i=n(2),r=n(11),o=n(9),s=n(4),a=n(56),u=n(48).KEY,c=n(14),f=n(33),h=n(26),l=n(24),d=n(3),p=n(39),v=n(40),g=n(139),y=n(140),m=n(7),E=n(12),_=n(28),T=n(17),b=n(36),w=n(74),S=n(76),A=n(6),R=n(16),L=S.f,O=A.f,I=w.f,C=i.Symbol,D=i.JSON,P=D&&D.stringify,M=d("_hidden"),N=d("toPrimitive"),x={}.propertyIsEnumerable,k=f("symbol-registry"),U=f("symbols"),F=f("op-symbols"),B=Object.prototype,G="function"==typeof C,j=i.QObject,H=!j||!j.prototype||!j.prototype.findChild,V=o&&c(function(){return 7!=b(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=L(B,e);i&&delete B[e],O(t,e,n),i&&t!==B&&O(B,e,i)}:O,X=function(t){var e=U[t]=b(C.prototype);return e._k=t,e},K=G&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},W=function(t,e,n){return t===B&&W(F,e,n),m(t),e=_(e,!0),m(n),r(U,e)?(n.enumerable?(r(t,M)&&t[M][e]&&(t[M][e]=!1),n=b(n,{enumerable:T(0,!1)})):(r(t,M)||O(t,M,T(1,{})),t[M][e]=!0),V(t,e,n)):O(t,e,n)},Y=function(t,e){m(t);for(var n,i=g(e=E(e)),r=0,o=i.length;o>r;)W(t,n=i[r++],e[n]);return t},q=function(t,e){return void 0===e?b(t):Y(b(t),e)},z=function(t){var e=x.call(this,t=_(t,!0));return!(this===B&&r(U,t)&&!r(F,t))&&(!(e||!r(this,t)||!r(U,t)||r(this,M)&&this[M][t])||e)},Q=function(t,e){if(t=E(t),e=_(e,!0),t!==B||!r(U,e)||r(F,e)){var n=L(t,e);return!n||!r(U,e)||r(t,M)&&t[M][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=I(E(t)),i=[],o=0;n.length>o;)r(U,e=n[o++])||e==M||e==u||i.push(e);return i},Z=function(t){for(var e,n=t===B,i=I(n?F:E(t)),o=[],s=0;i.length>s;)!r(U,e=i[s++])||n&&!r(B,e)||o.push(U[e]);return o};G||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=l(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(F,n),r(this,M)&&r(this[M],t)&&(this[M][t]=!1),V(this,t,T(1,n))};return o&&H&&V(B,t,{configurable:!0,set:e}),X(t)},a(C.prototype,"toString",function(){return this._k}),S.f=Q,A.f=W,n(75).f=w.f=$,n(20).f=z,n(41).f=Z,o&&!n(25)&&a(B,"propertyIsEnumerable",z,!0),p.f=function(t){return X(d(t))}),s(s.G+s.W+s.F*!G,{Symbol:C});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;J.length>tt;)d(J[tt++]);for(var et=R(d.store),nt=0;et.length>nt;)v(et[nt++]);s(s.S+s.F*!G,"Symbol",{for:function(t){return r(k,t+="")?k[t]:k[t]=C(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in k)if(k[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!G,"Object",{create:q,defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:Z}),D&&s(s.S+s.F*(!G||c(function(){var t=C();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!K(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!K(e))return e}),i[1]=e,P.apply(D,i)}}}),C.prototype[N]||n(10)(C.prototype,N,C.prototype.valueOf),h(C,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,n){var i=n(16),r=n(41),o=n(20);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},function(t,e,n){var i=n(19);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){n(40)("asyncIterator")},function(t,e,n){n(40)("observable")},function(t,e,n){t.exports={default:n(144),__esModule:!0}},function(t,e,n){n(145),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var i=n(4);i(i.S,"Object",{setPrototypeOf:n(146).set})},function(t,e,n){var i=n(8),r=n(7),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(13)(Function.call,n(76).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(148),__esModule:!0}},function(t,e,n){n(149);var i=n(0).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){var i=n(4);i(i.S,"Object",{create:n(36)})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(64),o=i(r),s=n(54),a=i(s),u=n(1),c=i(u),f=n(5),h=i(f),l=n(42),d=n(81),p=n(156),v=i(p),g=n(43),y={GET:"GET",POST:"POST"},m={JSON:"json",ARRAY_BUFFER:"arraybuffer"},E={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},_={INVALID_STATUS:"Response status is not part of valid status codes",REQUEST_ABORTED:"Request has been aborted",REQUEST_ERROR:"An error occured while sending the request",REQUEST_TIMEOUT:"Request timeout"},T=function(){function t(e,n,i){(0,c.default)(this,t),this._method=e,this._url=n,this._retryCount=0,this._aborted=!1,this._options=v.default.merge({responseType:t.ResponseTypes.JSON,validStatusCodes:[].concat((0,a.default)((0,d.range)(200,206)),[304]),timeout:0,retry:0,retryDelay:0,withCredentials:!1,headers:{},events:{onprogress:g.noop}},i)}return(0,h.default)(t,[{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new o.default(function(n,i){function r(){var t=this;this._send(e).then(function(t){n(t)}).catch(function(e){if(t._retryCount===t._options.retry)return void i(e);t._retryCount++,(0,l.createTimeout)(function(){t._init(),r.call(t)},t._options.retryDelay)})}r.call(t)})}},{key:"abort",value:function(){throw new TypeError("Cannot call abstract method")}},{key:"_send",value:function(t){throw new TypeError("Cannot call abstract method")}},{key:"_init",value:function(){throw new TypeError("Cannot call abstract method")}},{key:"isStreamroot",set:function(t){this._isStreamrootEndpoint=t}}]),t}();T.Methods=y,T.ResponseTypes=m,T.ReadyStates=E,T.Errors=_,e.default=T,t.exports=e.default},function(t,e,n){var i=n(152),r=n(153),o=r;o.v1=i,o.v4=r,t.exports=o},function(t,e,n){function i(t,e,n){var i=e&&n||0,r=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:u,h=void 0!==t.msecs?t.msecs:(new Date).getTime(),l=void 0!==t.nsecs?t.nsecs:f+1,d=h-c+(l-f)/1e4;if(d<0&&void 0===t.clockseq&&(s=s+1&16383),(d<0||h>c)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,f=l,u=s,h+=122192928e5;var p=(1e4*(268435455&h)+l)%4294967296;r[i++]=p>>>24&255,r[i++]=p>>>16&255,r[i++]=p>>>8&255,r[i++]=255&p;var v=h/4294967296*1e4&268435455;r[i++]=v>>>8&255,r[i++]=255&v,r[i++]=v>>>24&15|16,r[i++]=v>>>16&255,r[i++]=s>>>8|128,r[i++]=255&s;for(var g=t.node||a,y=0;y<6;++y)r[i+y]=g[y];return e||o(r)}var r=n(79),o=n(80),s=r(),a=[1|s[0],s[1],s[2],s[3],s[4],s[5]],u=16383&(s[6]<<8|s[7]),c=0,f=0;t.exports=i},function(t,e,n){function i(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[i+a]=s[a];return e||o(s)}var r=n(79),o=n(80);t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(72),o=i(r),s=n(1),a=i(s),u=n(5),c=i(u),f=n(73),h=i(f),l=n(77),d=i(l),p=n(155),v=i(p),g=n(78),y=n(43),m=null,E={},_={},T=function(t){function e(t,n,i){(0,a.default)(this,e);var r=(0,h.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,n,i));return r._createTimer(),r}return(0,d.default)(e,t),(0,c.default)(e,[{key:"_createTimer",value:function(){var t=this;if(m){var e=this._isRepeatable?"setInterval":"setTimeout";m.postMessage({command:e,id:this._id,time:this._time}),E[this._id]=this._callback}else if(this._isRepeatable){var n=function e(){_[t._id]=setTimeout(e,t._time),t._callback()};_[this._id]=setTimeout(n,this._time)}else{var i=function(){t._callback(),t._callback=y.noop};_[this._id]=setTimeout(i,this._time)}}},{key:"clear",value:function(){m?(delete E[this._id],m.postMessage({command:"clear",id:this._id})):(clearTimeout(_[this._id]),delete _[this._id]),this._callback=y.noop}}]),e}(g.AbstractTimer);try{window.Worker&&(m=new window.Worker(URL.createObjectURL(new Blob(["("+v.default.toString()+")()"],{type:"text/javascript"}))),m.onmessage=function(t){var e=t.data,n=e.id,i=e.command;E[n]&&(E[n](),"triggerTimeout"===i&&delete E[n])},m.onerror=function(t){})}catch(t){}t.exports=T},function(t,e,n){"use strict";function i(){function t(t){return function(){self.postMessage({id:t,command:"triggerTimeout"}),delete n[t]}}function e(t,i){return function(){self.postMessage({id:t,command:"triggerInterval"}),n[t]=setTimeout(e(t,i),i)}}var n={};self.onmessage=function(i){var r=i.data,o=r.command,s=r.id,a=r.time;switch(o){case"setTimeout":n[s]=setTimeout(t(s),a);break;case"setInterval":n[s]=setTimeout(e(s,a),a);break;case"clear":clearTimeout(n[s]),delete n[s]}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(0,T.default)(t,e)}function o(t){(0,E.default)(t);for(var e=(0,y.default)(t),n=0;n<e.length;n++){var i=e[n],r=t[i];null===r||"object"!==(void 0===r?"undefined":(0,v.default)(r))||(0,d.default)(r)||o(r)}}function s(t,e){for(var n={},i=(0,h.default)(t),r=0;r<i.length;r++){var o=i[r];e!==o&&(n[o]=t[o])}return n}function a(t){return JSON.parse((0,c.default)(t))}Object.defineProperty(e,"__esModule",{value:!0});var u=n(157),c=i(u),f=n(71),h=i(f),l=n(159),d=i(l),p=n(38),v=i(p),g=n(162),y=i(g),m=n(15),E=i(m),_=n(165),T=i(_);e.default={merge:r,deepFreeze:o,omit:s,deepCopy:a},t.exports=e.default},function(t,e,n){t.exports={default:n(158),__esModule:!0}},function(t,e,n){var i=n(0),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){t.exports={default:n(160),__esModule:!0}},function(t,e,n){n(161),t.exports=n(0).Object.isFrozen},function(t,e,n){var i=n(8);n(18)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){t.exports={default:n(163),__esModule:!0}},function(t,e,n){n(164);var i=n(0).Object;t.exports=function(t){return i.getOwnPropertyNames(t)}},function(t,e,n){n(18)("getOwnPropertyNames",function(){return n(74).f})},function(t,e,n){t.exports={default:n(166),__esModule:!0}},function(t,e,n){n(167),t.exports=n(0).Object.assign},function(t,e,n){var i=n(4);i(i.S+i.F,"Object",{assign:n(168)})},function(t,e,n){"use strict";var i=n(16),r=n(41),o=n(20),s=n(22),a=n(52),u=Object.assign;t.exports=!u||n(14)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,c=1,f=r.f,h=o.f;u>c;)for(var l,d=a(arguments[c++]),p=f?i(d).concat(f(d)):i(d),v=p.length,g=0;v>g;)h.call(d,l=p[g++])&&(n[l]=d[l]);return n}:u},function(t,e,n){"use strict"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(83),a=(i(s),n(84)),u=(i(a),function t(e,n,i,r){(0,o.default)(this,t),this.streamrootKey=e,this.contentId=n,null!==i.backendUrl&&(this.backendUrl=i.backendUrl),r&&(void 0!==r.rangeRequestDisabled&&(this.rangeRequestEnabled=!r.rangeRequestDisabled),this.activateP2P=r.activateP2P,this.mobileBrowserEnabled=r.mobileBrowserEnabled)});e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(5),a=i(s),u=function(){function t(e,n){(0,o.default)(this,t),this._wrappedPlayerInterface=e,this._mediaMap=n}return(0,a.default)(t,[{key:"getBufferLevelMax",value:function(){return this._wrappedPlayerInterface.getBufferTarget()}},{key:"isLive",value:function(){return this._mediaMap.isLive()}},{key:"setBufferMarginLive",value:function(t){this._wrappedPlayerInterface.setBufferTarget(t)}},{key:"addEventListener",value:function(t,e){this._wrappedPlayerInterface.on(t,e)}},{key:"removeEventListener",value:function(t,e){this._wrappedPlayerInterface.removeListener(t,e)}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(44),a=(i(s),function t(e,n){(0,o.default)(this,t),this.onSuccess=function(t,i,r){var o={timeElapsed:i.cdnDuration+i.p2pDuration,latency:i.latency||0,lengthComputable:!0,loaded:t.byteLength,total:t.byteLength};n.onSuccess(e,t,o)},this.onError=function(t,i){var r={status:t.status,message:t.message};n.onError&&n.onError(e,r)},this.onProgress=function(t,i){var r={timeElapsed:t.cdnDuration+t.p2pDuration,latency:t.latency||0,lengthComputable:t.lengthComputable||!1,loaded:t.cdnDownloaded+t.p2pDownloaded,total:t.total||0};n.onProgress&&n.onProgress(e,r)}});e.default=a,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.abrInterfaceGenerator=void 0;var r=n(1),o=i(r),s=n(5),a=i(s),u=n(174),c=i(u),f=void 0,h=function(t){return f=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,[{key:"nextSegmentPrebuffered",get:function(){return t.peerAgent?t.peerAgent.nextSegmentPrebuffered:new c.default}}]),e}()};e.abrInterfaceGenerator=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function t(){(0,r.default)(this,t),this.video=!1,this.audio=!1};e.default=o,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function t(e,n,i){(0,r.default)(this,t);var o=e.getMediaEngineName()+" "+e.getMediaEngineVersion();this.mediaEngineTag=o.substring(0,30),this.wrapperVersion=n.wrapperVersion,this.streamrooterVersion="0.1.0",this.peerAgentCounter=i};e.default=o,t.exports=e.default}])})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),o=i(r),s=n(1),a=i(s),u=n(2),c=i(u),f=n(20),h=i(f),l=n(21),d=i(l),p=n(110),v=i(p),g=n(54),y=function(t,e){return function(e){function n(){return(0,a.default)(this,n),(0,h.default)(this,(n.__proto__||(0,o.default)(n)).apply(this,arguments))}return(0,d.default)(n,e),(0,c.default)(n,[{key:"destroy",value:function(){this.abort()}},{key:"abort",value:function(){this.fetchRequest&&(this.stats.aborted=!0,this.fetchRequest.abort()),clearTimeout(this.requestTimeout),this.requestTimeout=null,clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"loadInternal",value:function(){this.stats.tfirst=0,this.stats.loaded=0;var e=this._contentType,n="arraybuffer"===this.context.responseType?t.constructor.ResponseTypes.ARRAY_BUFFER:t.constructor.ResponseTypes.TEXT,i=(0,g.extractInfoFromXhrSetup)(this.config.xhrSetup,this.context.url),r=i.headers,o=i.withCredentials,s=i.url;this.context.rangeEnd&&(r.Range="bytes="+this.context.rangeStart+"-"+(this.context.rangeEnd-1));var a={headers:r,withCredentials:o,url:s,contentType:e,responseType:n},u={onSuccess:this._loadSuccess.bind(this),onError:this._loadError.bind(this),onProgress:this._loadProgress.bind(this)};this.requestTimeout=setTimeout(this._loadTimeout.bind(this),this.config.timeout),this.fetchRequest=t.fetch(a,u)}},{key:"_loadSuccess",value:function(t,e,n){if(!this.stats.aborted){clearTimeout(this.requestTimeout),this.stats.tload=Math.max(this.stats.tfirst,performance.now()),this.stats.loaded=this.stats.total=n.total,this._modifyRequestTiming(n);var i=t.url,r={url:i,data:e};this.callbacks.onSuccess(r,this.stats,this.context)}}},{key:"_loadError",value:function(t,e){if(!this.stats.aborted)if(clearTimeout(this.requestTimeout),this.stats.retry>=this.config.maxRetry||e.status>=400&&e.status<499){var n={code:e.status,text:e.message};this.callbacks.onError(n,this.context)}else this.destroy(),this.retryTimeout=setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,this.config.maxRetryDelay),this.stats.retry++}},{key:"_loadProgress",value:function(t,e){if(!this.stats.aborted){0===this.stats.tfirst&&(this.stats.tfirst=Math.max(performance.now(),this.stats.trequest),clearTimeout(this.requestTimeout),this.requestTimeout=setTimeout(this._loadTimeout.bind(this),this.config.timeout)),this.stats.loaded=e.loaded,e.lengthComputable&&(this.stats.total=e.total);var n=this.callbacks.onProgress;n&&n(this.stats,this.context)}}},{key:"_loadTimeout",value:function(){this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"_modifyRequestTiming",value:function(t){}},{key:"_contentType",get:function(){throw new Error("Cannot call getter _contentType from abstract class")}}]),n}(v.default)};e.default=y,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=!0,i=!1,r=void 0;try{for(var o,s=(0,c.default)((0,a.default)(e));!(n=(o=s.next()).done);n=!0){var u=o.value;-1===["prototype","name","length","caller","arguments","isSupported"].indexOf(u)&&function(n){(0,h.default)(t,n,{get:function(){return e[n]},set:void 0})}(u)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}function o(t,e,n){var i=n||{},r=e,o=new l.BaseXHR({setRequestHeader:function(t,e){i[t]=e},withCredentials:!1,open:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("GET"!==t)throw new Error("xhrSetup is calling open with a method other than GET, which is not supported at the moment. Please contact Streamroot support");if(!0!==n)throw new Error("xhrSetup is trying to open a synchronous request, which is not supported at the moment. Please contact Streamroot support");r=e}});try{t&&t(o,e)}catch(t){throw new Error("xhrSetup is trying to acces a forbidden property/method of XHR mock. Please contact Streamroot support. Internal mock error: "+t.message)}return{headers:i,withCredentials:o.withCredentials,url:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.extractInfoFromXhrSetup=e.inheritStaticPropertiesReadOnly=void 0;var s=n(111),a=i(s),u=n(114),c=i(u),f=n(38),h=i(f),l=n(119);e.inheritStaticPropertiesReadOnly=r,e.extractInfoFromXhrSetup=o},function(t,e,n){"use strict";var i=n(37),r=function(t){var e={},n=t||{};return i.mirrorRwProp(e,n,"responseType"),i.mirrorRwProp(e,n,"timeout"),i.mirrorRwProp(e,n,"withCredentials"),i.mirrorReadOnlyProp(e,n,"readyState"),i.mirrorReadOnlyProp(e,n,"response"),i.mirrorReadOnlyProp(e,n,"responseText"),i.mirrorReadOnlyProp(e,n,"responseURL"),i.mirrorReadOnlyProp(e,n,"responseXML"),i.mirrorReadOnlyProp(e,n,"status"),i.mirrorReadOnlyProp(e,n,"statusText"),i.mirrorReadOnlyProp(e,n,"upload"),i.mirrorFunc(e,n,"abort"),i.mirrorFunc(e,n,"open"),i.mirrorFunc(e,n,"send"),i.mirrorFunc(e,n,"setRequestHeader"),i.mirrorFunc(e,n,"getResponseHeader"),i.mirrorFunc(e,n,"overrideMimeType"),i.mirrorFunc(e,n,"getAllResponseHeaders"),i.mirrorFunc(e,n,"addRemoveEventListener"),i.mirrorFunc(e,n,"removeRemoveEventListener"),i.mirrorRwProp(e,n,"onload"),i.mirrorRwProp(e,n,"onloadstart"),i.mirrorRwProp(e,n,"onloadend"),i.mirrorRwProp(e,n,"onabort"),i.mirrorRwProp(e,n,"onerror"),i.mirrorRwProp(e,n,"onprogress"),i.mirrorRwProp(e,n,"ontimeout"),i.mirrorRwProp(e,n,"onreadystatechange"),e};t.exports=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(2),a=i(s),u=n(60),c=i(u),f=n(61),h=i(f),l=n(63),d=i(l),p=n(64),v=i(p),g=n(65),y=i(g),m=n(54),E=(new h.default).getResult(),_=function(){function t(e,n){(0,o.default)(this,t);var i=this._recommendedHlsjsConfig;void 0!==e.liveSyncDurationCount&&delete i.liveSyncDuration;var r=new c.default((0,v.default)(e,i));return new y.default(n,r),r}return(0,a.default)(t,[{key:"_recommendedHlsjsConfig",get:function(){return{maxBufferSize:0,maxBufferLength:30,liveSyncDuration:30}}}]),t}();(0,d.default)(_,c.default),(0,m.inheritStaticPropertiesReadOnly)(_,c.default),_.isSupported=function(){var t="Safari"===E.browser.name;return c.default.isSupported()&&!t},_.getBrowserName=function(){return E.browser.name},e.default=_,t.exports=e.default},function(t,e,n){n(58);var i=n(0).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){var i=n(6);i(i.S+i.F*!n(8),"Object",{defineProperty:n(7).f})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=7)}([function(t,e,n){"use strict";function i(){}function r(t,e){return e="["+t+"] > "+e}function o(t){var e=self.console[t];return e?function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i[0]&&(i[0]=r(t,i[0])),e.apply(self.console,i)}:i}function s(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach(function(e){c[e]=t[e]?t[e].bind(t):o(e)})}n.d(e,"a",function(){return f}),n.d(e,"b",function(){return h});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u={trace:i,debug:i,log:i,warn:i,info:i,error:i},c=u,f=function(t){if(!0===t||"object"===(void 0===t?"undefined":a(t))){s(t,"debug","log","info","warn","error");try{c.log()}catch(t){c=u}}else c=u},h=c},function(t,e,n){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var i=n,r=0;t.isHeader(e,n);){r+=10;r+=t._readSize(e,n+6),t.isFooter(e,n+10)&&(r+=10),n+=r}if(r>0)return e.subarray(i,i+r)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),i=0;i<n.length;i++){var r=n[i];if(t.isTimeStampFrame(r))return t._readTimeStamp(r)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),i=t._readSize(e,4);return{type:n,size:i,data:e.subarray(10,10+i)}},t.getID3Frames=function(e){for(var n=0,i=[];t.isHeader(e,n);){var r=t._readSize(e,n+6);n+=10;for(var o=n+r;n+8<o;){var s=t._getFrameData(e.subarray(n)),a=t._decodeFrame(s);a&&i.push(a),n+=s.size+10}t.isFooter(e,n)&&(n+=10)}return i},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data),i=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:i.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,i=t._utf8ArrayToStr(e.data.subarray(n));n+=i.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:i,data:r}}var o=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:o}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,i=t._utf8ArrayToStr(e.data.subarray(n));n+=i.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:i,data:r}}var o=t._utf8ArrayToStr(e.data);return{key:e.type,data:o}},t._utf8ArrayToStr=function(t){for(var e=void 0,n=void 0,i="",r=0,o=t.length;r<o;){var s=t[r++];switch(s>>4){case 0:return i;case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(s);break;case 12:case 13:e=t[r++],i+=String.fromCharCode((31&s)<<6|63&e);break;case 14:e=t[r++],n=t[r++],i+=String.fromCharCode((15&s)<<12|(63&e)<<6|(63&n)<<0)}}return i},t}();e.a=r},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){!function(e){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=this.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):e;var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=i.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var f=a.path,h=f.substring(0,f.lastIndexOf("/")+1)+o.path;c.path=s.normalizePath(h)}else c.path=a.path,o.params||(c.params=a.params,o.query||(c.query=a.query));return null===c.path&&(c.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(c)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=s}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n,i){var r,o,s,a,u,c=navigator.userAgent.toLowerCase(),f=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=1+((192&e[n+2])>>>6),(o=(60&e[n+2])>>>2)>h.length-1?void t.trigger(Event.ERROR,{type:I.b.MEDIA_ERROR,details:I.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(a=(1&e[n+2])<<2,a|=(192&e[n+3])>>>6,k.b.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+o+"["+h[o]+"Hz],channelConfig:"+a),/firefox/i.test(c)?o>=6?(r=5,u=new Array(4),s=o-3):(r=2,u=new Array(2),s=o):-1!==c.indexOf("android")?(r=2,u=new Array(2),s=o):(r=5,u=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&o>=6?s=o-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(o>=6&&1===a||/vivaldi/i.test(c))||!i&&1===a)&&(r=2,u=new Array(2)),s=o)),u[0]=r<<3,u[0]|=(14&o)>>1,u[1]|=(1&o)<<7,u[1]|=a<<3,5===r&&(u[1]|=(14&s)>>1,u[2]=(1&s)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:h[o],channelCount:a,codec:"mp4a.40."+r,manifestCodec:f})}function u(t,e){return 255===t[e]&&240==(246&t[e+1])}function c(t,e){return 1&t[e+1]?7:9}function f(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function h(t,e){return!!(e+1<t.length&&u(t,e))}function l(t,e){if(e+1<t.length&&u(t,e)){var n=c(t,e),i=n;e+5<t.length&&(i=f(t,e));var r=e+i;if(r===t.length||r+1<t.length&&u(t,r))return!0}return!1}function d(t,e,n,i,r){if(!t.samplerate){var o=a(e,n,i,r);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,k.b.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function p(t){return 9216e4/t}function v(t,e,n,i,r){var o,s,a,u=t.length;if(o=c(t,e),s=f(t,e),(s-=o)>0&&e+o+s<=u)return a=n+i*r,{headerLength:o,frameLength:s,stamp:a}}function g(t,e,n,i,r){var o=p(t.samplerate),s=v(e,n,i,r,o);if(s){var a=s.stamp,u=s.headerLength,c=s.frameLength,f={unit:e.subarray(n+u,n+u+c),pts:a,dts:a};return t.samples.push(f),t.len+=c,{sample:f,length:c+u}}}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var O=n(1),I=n(2),C=function(){function t(e,n){i(this,t),this.subtle=e,this.aesIV=n}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),D=C,P=function(){function t(e,n){r(this,t),this.subtle=e,this.key=n}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),M=P,N=function(){function t(){o(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),i=0;i<4;i++)n[i]=e.getUint32(4*i);return n},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,i=n[0],r=n[1],o=n[2],s=n[3],a=this.invSubMix,u=a[0],c=a[1],f=a[2],h=a[3],l=new Uint32Array(256),d=0,p=0,v=0;for(v=0;v<256;v++)l[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[d]=g,e[g]=d;var y=l[d],m=l[y],E=l[m],_=257*l[g]^16843008*g;i[d]=_<<24|_>>>8,r[d]=_<<16|_>>>16,o[d]=_<<8|_>>>24,s[d]=_,_=16843009*E^65537*m^257*y^16843008*d,u[g]=_<<24|_>>>8,c[g]=_<<16|_>>>16,f[g]=_<<8|_>>>24,h[g]=_,d?(d=y^l[l[l[E^y]]],p^=l[l[p]]):d=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,i=0;i<e.length&&n;)n=e[i]===this.key[i],i++;if(!n){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),s=void 0,a=void 0,u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),f=this.sBox,h=this.rcon,l=this.invSubMix,d=l[0],p=l[1],v=l[2],g=l[3],y=void 0,m=void 0;for(s=0;s<o;s++)s<r?y=u[s]=e[s]:(m=y,s%r==0?(m=m<<8|m>>>24,m=f[m>>>24]<<24|f[m>>>16&255]<<16|f[m>>>8&255]<<8|f[255&m],m^=h[s/r|0]<<24):r>6&&s%r==4&&(m=f[m>>>24]<<24|f[m>>>16&255]<<16|f[m>>>8&255]<<8|f[255&m]),u[s]=y=(u[s-r]^m)>>>0);for(a=0;a<o;a++)s=o-a,m=3&a?u[s]:u[s-4],c[a]=a<4||s<=4?m:d[f[m>>>24]]^p[f[m>>>16&255]]^v[f[m>>>8&255]]^g[f[255&m]],c[a]=c[a]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,n){for(var i,r,o=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,u=this.invSubMix,c=u[0],f=u[1],h=u[2],l=u[3],d=this.uint8ArrayToUint32Array_(n),p=d[0],v=d[1],g=d[2],y=d[3],m=new Int32Array(t),E=new Int32Array(m.length),_=void 0,T=void 0,b=void 0,w=void 0,S=void 0,A=void 0,R=void 0,L=void 0,O=void 0,I=void 0,C=void 0,D=void 0,P=this.networkToHostOrderSwap;e<m.length;){for(O=P(m[e]),I=P(m[e+1]),C=P(m[e+2]),D=P(m[e+3]),S=O^s[0],A=D^s[1],R=C^s[2],L=I^s[3],i=4,r=1;r<o;r++)_=c[S>>>24]^f[A>>16&255]^h[R>>8&255]^l[255&L]^s[i],T=c[A>>>24]^f[R>>16&255]^h[L>>8&255]^l[255&S]^s[i+1],b=c[R>>>24]^f[L>>16&255]^h[S>>8&255]^l[255&A]^s[i+2],w=c[L>>>24]^f[S>>16&255]^h[A>>8&255]^l[255&R]^s[i+3],S=_,A=T,R=b,L=w,i+=4;_=a[S>>>24]<<24^a[A>>16&255]<<16^a[R>>8&255]<<8^a[255&L]^s[i],T=a[A>>>24]<<24^a[R>>16&255]<<16^a[L>>8&255]<<8^a[255&S]^s[i+1],b=a[R>>>24]<<24^a[L>>16&255]<<16^a[S>>8&255]<<8^a[255&A]^s[i+2],w=a[L>>>24]<<24^a[S>>16&255]<<16^a[A>>8&255]<<8^a[255&R]^s[i+3],i+=3,E[e]=P(_^p),E[e+1]=P(w^v),E[e+2]=P(b^g),E[e+3]=P(T^y),p=O,v=I,g=C,y=D,e+=4}return E.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),x=N,k=n(0),U=function(){function t(e,n){s(this,t),this.observer=e,this.config=n,this.logEnabled=!0;try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,n,i){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(k.b.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new x),o.expandKey(e),i(o.decrypt(t,0,n))}else{this.logEnabled&&(k.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var s=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new M(s,e)),this.fastAesKey.expandKey().then(function(o){new D(s,n).decrypt(t,o).catch(function(o){r.onWebCryptoError(o,t,e,n,i)}).then(function(t){i(t)})}).catch(function(o){r.onWebCryptoError(o,t,e,n,i)})}},t.prototype.onWebCryptoError=function(t,e,n,i,r){this.config.enableSoftwareAES?(k.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,i,r)):(k.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:I.b.MEDIA_ERROR,details:I.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}(),F=U,B=n(3),G=function(){function t(e,n,i){y(this,t),this.observer=e,this.config=i,this.remuxer=n}return t.prototype.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,n,i=B.a.getID3Data(t,0);if(i&&void 0!==B.a.getTimeStamp(i))for(e=i.length,n=Math.min(t.length-1,e+100);e<n;e++)if(l(t,e))return k.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,n,i){for(var r=this._audioTrack,o=B.a.getID3Data(t,0),s=90*B.a.getTimeStamp(o),a=0,u=s,c=t.length,f=o.length,l=[{pts:u,dts:u,data:o}];f<c-1;)if(h(t,f)&&f+5<c){d(r,this.observer,t,f,r.manifestCodec);var p=g(r,t,f,s,a);if(!p){k.b.log("Unable to parse AAC frame");break}f+=p.length,u=p.sample.pts,a++}else B.a.isHeader(t,f)?(o=B.a.getID3Data(t,f),l.push({pts:u,dts:u,data:o}),f+=o.length):f++;this.remuxer.remux(r,{samples:[]},{samples:l,inputTimeScale:9e4},{samples:[]},e,n,i)},t.prototype.destroy=function(){},t}(),j=G,H=Math.pow(2,32)-1,V=function(){function t(e,n){m(this,t),this.observer=e,this.remuxer=n}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,n,i,r){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e),s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:r?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:r?e:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:r?e:null})),this.observer.trigger(O.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},t.probe=function(e){if(e.length>=8){return["moof","ftyp","styp"].indexOf(t.bin2str(e.subarray(4,8)))>=0}return!1},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var i,r,o,s,a,u,c,f=[];if(e.data?(u=e.start,s=e.end,e=e.data):(u=0,s=e.byteLength),!n.length)return null;for(i=u;i<s;)r=t.readUint32(e,i),o=t.bin2str(e.subarray(i+4,i+8)),c=r>1?i+r:s,o===n[0]&&(1===n.length?f.push({data:e,start:i+8,end:c}):(a=t.findBox({data:e,start:i+8,end:c},n.slice(1)),a.length&&(f=f.concat(a)))),i=c;return f},t.parseInitSegment=function(e){var n=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var r=i.data[i.start],o=0===r?12:20,s=t.readUint32(i,o),a=t.findBox(e,["mdia","mdhd"])[0];if(a){r=a.data[a.start],o=0===r?12:20;var u=t.readUint32(a,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var f=t.bin2str(c.data.subarray(c.start+8,c.start+12)),h={soun:"audio",vide:"video"}[f];h&&(n[s]={timescale:u,type:h},n[h]={timescale:u,id:s})}}}}),n},t.getStartDTS=function(e,n){var i,r,o;return i=t.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map(function(n){return t.findBox(n,["tfhd"]).map(function(i){var r,o;return r=t.readUint32(i,4),o=e[r].timescale||9e4,t.findBox(n,["tfdt"]).map(function(e){var n,i;return n=e.data[e.start],i=t.readUint32(e,4),1===n&&(i*=Math.pow(2,32),i+=t.readUint32(e,8)),i})[0]/o})})),o=Math.min.apply(null,r),isFinite(o)?o:0},t.offsetStartDTS=function(e,n,i){t.findBox(n,["moof","traf"]).map(function(n){return t.findBox(n,["tfhd"]).map(function(r){var o=t.readUint32(r,4),s=e[o].timescale||9e4;t.findBox(n,["tfdt"]).map(function(e){var n=e.data[e.start],r=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,r-i*s);else{r*=Math.pow(2,32),r+=t.readUint32(e,8),r-=i*s;var o=Math.floor(r/(H+1)),a=Math.floor(r%(H+1));t.writeUint32(e,4,o),t.writeUint32(e,8,a)}})})})},t.prototype.append=function(e,n,i,r){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),o=this.initData);var s=void 0,a=this.initPTS;if(void 0===a){var u=t.getStartDTS(o,e);this.initPTS=a=u-n,this.observer.trigger(O.a.INIT_PTS_FOUND,{initPTS:a})}t.offsetStartDTS(o,e,a),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,i,r,e)},t.prototype.destroy=function(){},t}(),X=V,K={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(t,e,n,i,r){if(!(n+24>e.length)){var o=this.parseHeader(e,n);if(o&&n+o.frameLength<=e.length){var s=10368e4/o.sampleRate,a=i+r*s,u={unit:e.subarray(n,n+o.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(u),t.len+=o.frameLength,{sample:u,length:o.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,i=t[e+1]>>1&3,r=t[e+2]>>4&15,o=t[e+2]>>2&3,s=!!(2&t[e+2]);if(1!==n&&0!==r&&15!==r&&3!==o){var a=3===n?3-i:3===i?3:4,u=1e3*K.BitratesMap[14*a+r-1],c=3===n?0:2===n?1:2,f=K.SamplingRateMap[3*c+o],h=s?1:0;return{sampleRate:f,channelCount:t[e+3]>>6==3?1:2,frameLength:3===i?(3===n?12:6)*u/f+h<<2:(3===n?144:72)*u/f+h|0}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),i=4;n&&n.frameLength&&(i=n.frameLength);var r=e+i;if(r===t.length||r+1<t.length&&this.isHeaderPattern(t,r))return!0}return!1}},W=K,Y=function(){function t(e){E(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,i=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");i.set(t.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&k.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?n<<e|this.readBits(e):n},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,n,i=8,r=8;for(e=0;e<t;e++)0!==r&&(n=this.readEG(),r=(i+n+256)%256),i=0===r?i:r},t.prototype.readSPS=function(){var t,e,n,i,r,o,s,a=0,u=0,c=0,f=0,h=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(h(),t=h(),l(5),v(3),h(),y(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var E=d();if(3===E&&v(1),y(),y(),v(1),p())for(o=3!==E?8:12,s=0;s<o;s++)p()&&m(s<6?16:64)}y();var _=d();if(0===_)d();else if(1===_)for(v(1),g(),g(),e=d(),s=0;s<e;s++)g();y(),v(1),n=d(),i=d(),r=l(1),0===r&&v(1),v(1),p()&&(a=d(),u=d(),c=d(),f=d());var T=[1,1];if(p()&&p()){switch(h()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[h()<<8|h(),h()<<8|h()]}}return{width:Math.ceil(16*(n+1)-2*a-2*u),height:(2-r)*(i+1)*16-(r?2:4)*(c+f),pixelRatio:T}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),q=Y,z=function(){function t(e,n,i,r){_(this,t),this.decryptdata=i,this.discardEPB=r,this.decrypter=new F(e,n)}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,n,i){var r=t[e].unit,o=r.subarray(16,r.length-r.length%16),s=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),a=this;this.decryptBuffer(s,function(o){o=new Uint8Array(o),r.set(o,16),i||a.decryptAacSamples(t,e+1,n)})},t.prototype.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,i),!i)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),i=0,r=32;r<=t.length-16;r+=160,i+=16)n.set(t.subarray(r,r+16),i);return n},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,i=32;i<=t.length-16;i+=160,n+=16)t.set(e.subarray(n,n+16),i);return t},t.prototype.decryptAvcSample=function(t,e,n,i,r,o){var s=this.discardEPB(r.data),a=this.getAvcEncryptedData(s),u=this;this.decryptBuffer(a.buffer,function(a){r.data=u.getAvcDecryptedUnit(s,a),o||u.decryptAvcSamples(t,e,n+1,i)})},t.prototype.decryptAvcSamples=function(t,e,n,i){for(;;e++,n=0){if(e>=t.length)return void i();for(var r=t[e].units;!(n>=r.length);n++){var o=r[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,i,o,s),!s)return}}}},t}(),Q=z,$=function(){function t(e,n,i,r){T(this,t),this.observer=e,this.config=i,this.typeSupported=r,this.remuxer=n,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new Q(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(t){return t.length>=564&&71===t[0]&&71===t[188]&&71===t[376]},t.prototype.resetInitSegment=function(t,e,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:i,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=n,this._duration=i},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(t,e,n,i){var r,o,s,a,u,c=t.length,f=!1;this.contiguous=n;var h=this.pmtParsed,l=this._avcTrack,d=this._audioTrack,p=this._id3Track,v=l.id,g=d.id,y=p.id,m=this._pmtId,E=l.pesData,_=d.pesData,T=p.pesData,b=this._parsePAT,w=this._parsePMT,S=this._parsePES,A=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),C=this._parseID3PES.bind(this);for(c-=c%188,r=0;r<c;r+=188)if(71===t[r]){if(o=!!(64&t[r+1]),s=((31&t[r+1])<<8)+t[r+2],(48&t[r+3])>>4>1){if((a=r+5+t[r+4])===r+188)continue}else a=r+4;switch(s){case v:o&&(E&&(u=S(E))&&A(u,!1),E={data:[],size:0}),E&&(E.data.push(t.subarray(a,r+188)),E.size+=r+188-a);break;case g:o&&(_&&(u=S(_))&&(d.isAAC?R(u):L(u)),_={data:[],size:0}),_&&(_.data.push(t.subarray(a,r+188)),_.size+=r+188-a);break;case y:o&&(T&&(u=S(T))&&C(u),T={data:[],size:0}),T&&(T.data.push(t.subarray(a,r+188)),T.size+=r+188-a);break;case 0:o&&(a+=t[a]+1),m=this._pmtId=b(t,a);break;case m:o&&(a+=t[a]+1);var D=w(t,a,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);v=D.avc,v>0&&(l.id=v),g=D.audio,g>0&&(d.id=g,d.isAAC=D.isAAC),y=D.id3,y>0&&(p.id=y),f&&!h&&(k.b.log("reparse from beginning"),f=!1,r=-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(O.a.ERROR,{type:I.b.MEDIA_ERROR,details:I.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});E&&(u=S(E))?(A(u,!0),l.pesData=null):l.pesData=E,_&&(u=S(_))?(d.isAAC?R(u):L(u),d.pesData=null):(_&&_.size&&k.b.log("last AAC PES packet truncated,might overlap between fragments"),d.pesData=_),T&&(u=S(T))?(C(u),p.pesData=null):p.pesData=T,null==this.sampleAes?this.remuxer.remux(d,l,p,this._txtTrack,e,n,i):this.decryptAndRemux(d,l,p,this._txtTrack,e,n,i)},t.prototype.decryptAndRemux=function(t,e,n,i,r,o,s){if(t.samples&&t.isAAC){var a=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){a.decryptAndRemuxAvc(t,e,n,i,r,o,s)})}else this.decryptAndRemuxAvc(t,e,n,i,r,o,s)},t.prototype.decryptAndRemuxAvc=function(t,e,n,i,r,o,s){if(e.samples){var a=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){a.remuxer.remux(t,e,n,i,r,o,s)})}else this.remuxer.remux(t,e,n,i,r,o,s)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,n,i){var r,o,s,a,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=(15&t[e+1])<<8|t[e+2],o=e+3+r-4,s=(15&t[e+10])<<8|t[e+11],e+=12+s;e<o;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){k.b.log("unkown stream type:"+t[e]);break}case 15:-1===u.audio&&(u.audio=a);break;case 21:-1===u.id3&&(u.id3=a);break;case 219:if(!i){k.b.log("unkown stream type:"+t[e]);break}case 27:-1===u.avc&&(u.avc=a);break;case 3:case 4:n?-1===u.audio&&(u.audio=a,u.isAAC=!1):k.b.log("MPEG audio found, not supported in this browser for now");break;case 36:k.b.warn("HEVC stream type found, not supported for now");break;default:k.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return u},t.prototype._parsePES=function(t){var e,n,i,r,o,s,a,u,c=0,f=t.data;if(!t||0===t.size)return null;for(;f[0].length<19&&f.length>1;){var h=new Uint8Array(f[0].length+f[1].length);h.set(f[0]),h.set(f[1],f[0].length),f[0]=h,f.splice(1,1)}if(e=f[0],1===(e[0]<<16)+(e[1]<<8)+e[2]){if((i=(e[4]<<8)+e[5])&&i>t.size-6)return null;n=e[7],192&n&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,s>4294967295&&(s-=8589934592),64&n?(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,a>4294967295&&(a-=8589934592),s-a>54e5&&(k.b.warn(Math.round((s-a)/9e4)+"s delta between PTS and DTS, align them"),s=a)):a=s),r=e[8],u=r+9,t.size-=u,o=new Uint8Array(t.size);for(var l=0,d=f.length;l<d;l++){e=f[l];var p=e.byteLength;if(u){if(u>p){u-=p;continue}e=e.subarray(u),p-=u,u=0}o.set(e,c),c+=p}return i&&(i-=r+3),{data:o,pts:s,dts:a,len:i}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,n.push(t)):e.dropped++}t.debug.length&&k.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var n,i,r,o=this,s=this._avcTrack,a=this._parseAVCNALu(t.data),u=this.avcSample,c=!1,f=this.pushAccesUnit.bind(this),h=function(t,e,n,i){return{key:t,pts:e,dts:n,units:[],debug:i}};t.data=null,u&&a.length&&!s.audFound&&(f(u,s),u=this.avcSample=h(!1,t.pts,t.dts,"")),a.forEach(function(e){switch(e.type){case 1:i=!0,u||(u=o.avcSample=h(!0,t.pts,t.dts,"")),u.frame=!0;var a=e.data;if(c&&a.length>4){var l=new q(a).readSliceType();2!==l&&4!==l&&7!==l&&9!==l||(u.key=!0)}break;case 5:i=!0,u||(u=o.avcSample=h(!0,t.pts,t.dts,"")),u.key=!0,u.frame=!0;break;case 6:i=!0,n=new q(o.discardEPB(e.data)),n.readUByte();for(var d=0,p=0,v=!1,g=0;!v&&n.bytesAvailable>1;){d=0;do{g=n.readUByte(),d+=g}while(255===g);p=0;do{g=n.readUByte(),p+=g}while(255===g);if(4===d&&0!==n.bytesAvailable){v=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var y=n.readUByte(),m=n.readUByte(),E=31&y,_=[y,m];for(r=0;r<E;r++)_.push(n.readUByte()),_.push(n.readUByte()),_.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:t.pts,bytes:_})}}}}}else if(p<n.bytesAvailable)for(r=0;r<p;r++)n.readUByte()}break;case 7:if(i=!0,c=!0,!s.sps){n=new q(e.data);var T=n.readSPS();s.width=T.width,s.height=T.height,s.pixelRatio=T.pixelRatio,s.sps=[e.data],s.duration=o._duration;var b=e.data.subarray(1,4),w="avc1.";for(r=0;r<3;r++){var S=b[r].toString(16);S.length<2&&(S="0"+S),w+=S}s.codec=w}break;case 8:i=!0,s.pps||(s.pps=[e.data]);break;case 9:i=!1,s.audFound=!0,u&&f(u,s),u=o.avcSample=h(!1,t.pts,t.dts,"");break;case 12:i=!1;break;default:i=!1,u&&(u.debug+="unknown NAL "+e.type+" ")}if(u&&i){u.units.push(e)}}),e&&u&&(f(u,s),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var i=n-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var n=this._avcTrack,i=n.samples;t=i[i.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e,n,i,r,o,s=0,a=t.byteLength,u=this._avcTrack,c=u.naluState||0,f=c,h=[],l=-1;for(-1===c&&(l=0,o=31&t[0],c=0,s=1);s<a;)if(e=t[s++],c)if(1!==c)if(e)if(1===e){if(l>=0)i={data:t.subarray(l,s-c-1),type:o},h.push(i);else{var d=this._getLastNalUnit();if(d&&(f&&s<=4-f&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-f)),(n=s-c-1)>0)){var p=new Uint8Array(d.data.byteLength+n);p.set(d.data,0),p.set(t.subarray(0,n),d.data.byteLength),d.data=p}}s<a?(r=31&t[s],l=s,o=r,c=0):c=-1}else c=0;else c=3;else c=e?0:2;else c=e?0:1;if(l>=0&&c>=0&&(i={data:t.subarray(l,a),type:o,state:c},h.push(i)),0===h.length){var v=this._getLastNalUnit();if(v){var g=new Uint8Array(v.data.byteLength+t.byteLength);g.set(v.data,0),g.set(t,v.data.byteLength),v.data=g}}return u.naluState=c,h},t.prototype.discardEPB=function(t){for(var e,n,i=t.byteLength,r=[],o=1;o<i-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var s=0;for(o=0;o<e;s++,o++)s===r[0]&&(s++,r.shift()),n[o]=t[s];return n},t.prototype._parseAACPES=function(t){var e,n,i,r,o,s=this._audioTrack,a=t.data,u=t.pts,c=this.aacOverFlow,f=this.aacLastPTS;if(c){var l=new Uint8Array(c.byteLength+a.byteLength);l.set(c,0),l.set(a,c.byteLength),a=l}for(i=0,o=a.length;i<o-1&&!h(a,i);i++);if(i){var v,y;if(i<o-1?(v="AAC PES did not start with ADTS header,offset:"+i,y=!1):(v="no ADTS header found in AAC PES",y=!0),k.b.warn("parsing error:"+v),this.observer.trigger(O.a.ERROR,{type:I.b.MEDIA_ERROR,details:I.a.FRAG_PARSING_ERROR,fatal:y,reason:v}),y)return}if(d(s,this.observer,a,i,this.audioCodec),n=0,e=p(s.samplerate),c&&f){var m=f+e;Math.abs(m-u)>1&&(k.b.log("AAC: align PTS for overlapping frames by "+Math.round((m-u)/90)),u=m)}for(;i<o;)if(h(a,i)&&i+5<o){var E=g(s,a,i,u,n);if(!E)break;i+=E.length,r=E.sample.pts,n++}else i++;c=i<o?a.subarray(i,o):null,this.aacOverFlow=c,this.aacLastPTS=r},t.prototype._parseMPEGPES=function(t){for(var e=t.data,n=e.length,i=0,r=0,o=t.pts;r<n;)if(W.isHeader(e,r)){var s=W.appendFrame(this._audioTrack,e,r,o,i);if(!s)break;r+=s.length,i++}else r++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),Z=$,J=function(){function t(e,n,i){b(this,t),this.observer=e,this.config=i,this.remuxer=n}return t.prototype.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,n,i=B.a.getID3Data(t,0);if(i&&void 0!==B.a.getTimeStamp(i))for(e=i.length,n=Math.min(t.length-1,e+100);e<n;e++)if(W.probe(t,e))return k.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,n,i){for(var r=B.a.getID3Data(t,0),o=90*B.a.getTimeStamp(r),s=r.length,a=t.length,u=0,c=0,f=this._audioTrack,h=[{pts:o,dts:o,data:r}];s<a;)if(W.isHeader(t,s)){var l=W.appendFrame(f,t,s,o,u);if(!l)break;s+=l.length,c=l.sample.pts,u++}else B.a.isHeader(t,s)?(r=B.a.getID3Data(t,s),h.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(f,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,n,i)},t.prototype.destroy=function(){},t}(),tt=J,et=function(){function t(){w(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),nt=et,it=Math.pow(2,32)-1,rt=function(){function t(){S(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,u,s,a),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,r))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,o=r;r--;)i+=n[r].byteLength;for(e=new Uint8Array(i),e[0]=i>>24&255,e[1]=i>>16&255,e[2]=i>>8&255,e[3]=255&i,e.set(t,4),r=0,i=8;r<o;r++)e.set(n[r],i),i+=n[r].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var i=Math.floor(n/(it+1)),r=Math.floor(n%(it+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,n))},t.moov=function(e){for(var n=e.length,i=[];n--;)i[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,i=[];n--;)i[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,n){n*=e;var i=Math.floor(n/(it+1)),r=Math.floor(n%(it+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var n,i,r=e.samples||[],o=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,o[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,o)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,i,r,o=[],s=[];for(n=0;n<e.sps.length;n++)i=e.sps[n],r=i.byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));for(n=0;n<e.pps.length;n++)i=e.pps[n],r=i.byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(i));var a=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(s))),u=e.width,c=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,255&f,h>>24,h>>16&255,h>>8&255,255&h])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,i=e.duration*e.timescale,r=e.width,o=e.height,s=Math.floor(i/(it+1)),a=Math.floor(i%(it+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,n){var i=t.sdtp(e),r=e.id,o=Math.floor(n/(it+1)),s=Math.floor(n%(it+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var i,r,o,s,a,u,c=e.samples||[],f=c.length,h=12+16*f,l=new Uint8Array(h);for(n+=8+h,l.set([0,0,15,1,f>>>24&255,f>>>16&255,f>>>8&255,255&f,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<f;i++)r=c[i],o=r.duration,s=r.size,a=r.flags,u=r.cts,l.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*i);return t.box(t.types.trun,l)},t.initSegment=function(e){t.types||t.init();var n,i=t.moov(e);return n=new Uint8Array(t.FTYP.byteLength+i.byteLength),n.set(t.FTYP),n.set(i,t.FTYP.byteLength),n},t}(),ot=rt,st=function(){function t(e,n,i,r){A(this,t),this.observer=e,this.config=n,this.typeSupported=i;var o=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,n,i,r,o,s){if(this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated)if(t.samples.length){t.timescale||(k.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r));var a=this.remuxAudio(t,r,o,s);if(e.samples.length){var u=void 0;a&&(u=a.endPTS-a.startPTS),e.timescale||(k.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,r,o,u,s)}}else{var c=void 0;e.samples.length&&(c=this.remuxVideo(e,r,o,s)),c&&t.codec&&this.remuxEmptyAudio(t,r,o,c)}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(O.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,n){var i,r,o=this.observer,s=t.samples,a=e.samples,u=this.typeSupported,c="audio/mp4",f={},h={tracks:f},l=void 0===this._initPTS;if(l&&(i=r=1/0),t.config&&s.length&&(t.timescale=t.samplerate,k.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(c="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),f.audio={container:c,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:ot.initSegment([t]),metadata:{channelCount:t.channelCount}},l&&(i=r=s[0].pts-t.inputTimeScale*n)),e.sps&&e.pps&&a.length){var d=e.inputTimeScale;e.timescale=d,f.video={container:"video/mp4",codec:e.codec,initSegment:ot.initSegment([e]),metadata:{width:e.width,height:e.height}},l&&(i=Math.min(i,a[0].pts-d*n),r=Math.min(r,a[0].dts-d*n),this.observer.trigger(O.a.INIT_PTS_FOUND,{initPTS:i}))}Object.keys(f).length?(o.trigger(O.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,l&&(this._initPTS=i,this._initDTS=r)):o.trigger(O.a.ERROR,{type:I.b.MEDIA_ERROR,details:I.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,n,i,r){var o,s,a,u,c,f,h,l=8,d=t.timescale,p=t.samples,v=[],g=p.length,y=this._PTSNormalize,m=this._initDTS,E=this.nextAvcDts,_=this.isSafari;_&&(n|=p.length&&E&&(r&&Math.abs(e-E/d)<.1||Math.abs(p[0].pts-E-m)<d/5)),n||(E=e*d),p.forEach(function(t){t.pts=y(t.pts-m,E),t.dts=y(t.dts-m,E)}),p.sort(function(t,e){var n=t.dts-e.dts,i=t.pts-e.pts;return n||(i||t.id-e.id)});var T=p.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(T<0){k.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var b=0;b<p.length;b++)p[b].dts+=T}var w=p[0];c=Math.max(w.dts,0),u=Math.max(w.pts,0);var S=Math.round((c-E)/90);n&&S&&(S>1?k.b.log("AVC:"+S+" ms hole between fragments detected,filling it"):S<-1&&k.b.log("AVC:"+-S+" ms overlapping between fragments detected"),c=E,p[0].dts=c,u=Math.max(u-S,E),p[0].pts=u,k.b.log("Video/PTS/DTS adjusted: "+Math.round(u/90)+"/"+Math.round(c/90)+",delta:"+S+" ms")),w=p[p.length-1],h=Math.max(w.dts,0),f=Math.max(w.pts,0,h),_&&(o=Math.round((h-c)/(p.length-1)));for(var A=0,R=0,L=0;L<g;L++){for(var C=p[L],D=C.units,P=D.length,M=0,N=0;N<P;N++)M+=D[N].data.length;R+=M,A+=P,C.length=M,C.dts=_?c+L*o:Math.max(C.dts,c),C.pts=Math.max(C.pts,C.dts)}var x=R+4*A+8;try{s=new Uint8Array(x)}catch(t){return void this.observer.trigger(O.a.ERROR,{type:I.b.MUX_ERROR,details:I.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating video mdat "+x})}var U=new DataView(s.buffer);U.setUint32(0,x),s.set(ot.types.mdat,4);for(var F=0;F<g;F++){for(var B=p[F],G=B.units,j=0,H=void 0,V=0,X=G.length;V<X;V++){var K=G[V],W=K.data,Y=K.data.byteLength;U.setUint32(l,Y),l+=4,s.set(W,l),l+=Y,j+=4+Y}if(_)H=Math.max(0,o*Math.round((B.pts-B.dts)/o));else{if(F<g-1)o=p[F+1].dts-B.dts;else{var q=this.config,z=B.dts-p[F>0?F-1:F].dts;if(q.stretchShortVideoTrack){var Q=q.maxBufferHole,$=q.maxSeekHole,Z=Math.floor(Math.min(Q,$)*d),J=(i?u+i*d:this.nextAudioPts)-B.pts;J>Z?(o=J-z,o<0&&(o=z),k.b.log("It is approximately "+J/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=z}else o=z}H=Math.round(B.pts-B.dts)}v.push({size:j,duration:o,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=h+o;var tt=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,v.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var et=v[0].flags;et.dependsOn=2,et.isNonSync=0}t.samples=v,a=ot.moof(t.sequenceNumber++,c,t),t.samples=[];var nt={data1:a,data2:s,startPTS:u/d,endPTS:(f+o)/d,startDTS:c/d,endDTS:this.nextAvcDts/d,type:"video",nb:v.length,dropped:tt};return this.observer.trigger(O.a.FRAG_PARSING_DATA,nt),nt},t.prototype.remuxAudio=function(t,e,n,i){var r,o,s,a,u,c,f,h=t.inputTimeScale,l=t.timescale,d=h/l,p=t.isAAC?1024:1152,v=p*d,g=this._PTSNormalize,y=this._initDTS,m=!t.isAAC&&this.typeSupported.mpeg,E=t.samples,_=[],T=this.nextAudioPts;if(n|=E.length&&T&&(i&&Math.abs(e-T/h)<.1||Math.abs(E[0].pts-T-y)<20*v),n||(T=e*h),E.forEach(function(t){t.pts=t.dts=g(t.pts-y,T)}),E.sort(function(t,e){return t.pts-e.pts}),i&&t.isAAC)for(var b=0,w=T;b<E.length;){var S,A=E[b],R=A.pts;S=R-w;var L=Math.abs(1e3*S/h);if(S<=-v)k.b.warn("Dropping 1 audio frame @ "+(w/h).toFixed(3)+"s due to "+L+" ms overlap."),E.splice(b,1),t.len-=A.unit.length;else if(S>=v&&L<1e4&&w){var C=Math.round(S/v);k.b.warn("Injecting "+C+" audio frame @ "+(w/h).toFixed(3)+"s due to "+Math.round(1e3*S/h)+" ms gap.");for(var D=0;D<C;D++){var P=Math.max(w,0);s=nt.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),s||(k.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),s=A.unit.subarray()),E.splice(b,0,{unit:s,pts:P,dts:P}),t.len+=s.length,w+=v,b++}A.pts=A.dts=w,w+=v,b++}else Math.abs(S),A.pts=A.dts=w,w+=v,b++}for(var M=0,N=E.length;M<N;M++){var x=E[M],U=x.unit,F=x.pts;if(void 0!==f)o.duration=Math.round((F-f)/d);else{var B=Math.round(1e3*(F-T)/h),G=0;if(n&&t.isAAC&&B){if(B>0&&B<1e4)G=Math.round((F-T)/v),k.b.log(B+" ms hole between AAC samples detected,filling it"),G>0&&(s=nt.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),s||(s=U.subarray()),t.len+=G*s.length);else if(B<-12){k.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/h).toFixed(3)+"s/"+(F/h).toFixed(3)+"s/"+-B+"ms"),t.len-=U.byteLength;continue}F=T}if(c=Math.max(0,F),!(t.len>0))return;var j=m?t.len:t.len+8;r=m?0:8;try{a=new Uint8Array(j)}catch(t){return void this.observer.trigger(O.a.ERROR,{type:I.b.MUX_ERROR,details:I.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}if(!m){new DataView(a.buffer).setUint32(0,j),a.set(ot.types.mdat,4)}for(var H=0;H<G;H++)s=nt.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),s||(k.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),s=U.subarray()),a.set(s,r),r+=s.byteLength,o={size:s.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o)}a.set(U,r);var V=U.byteLength;r+=V,o={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o),f=F}var X=0,K=_.length;if(K>=2&&(X=_[K-2].duration,o.duration=X),K){this.nextAudioPts=T=f+d*X,t.len=0,t.samples=_,u=m?new Uint8Array:ot.moof(t.sequenceNumber++,c/d,t),t.samples=[];var W=c/h,Y=T/h,q={data1:u,data2:a,startPTS:W,endPTS:Y,startDTS:W,endDTS:Y,type:"audio",nb:K};return this.observer.trigger(O.a.FRAG_PARSING_DATA,q),q}return null},t.prototype.remuxEmptyAudio=function(t,e,n,i){var r=t.inputTimeScale,o=t.samplerate?t.samplerate:r,s=r/o,a=this.nextAudioPts,u=(void 0!==a?a:i.startDTS*r)+this._initDTS,c=i.endDTS*r+this._initDTS,f=1024*s,h=Math.ceil((c-u)/f),l=nt.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(k.b.warn("remux empty Audio"),!l)return void k.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var d=[],p=0;p<h;p++){var v=u+p*f;d.push({unit:l,pts:v,dts:v}),t.len+=l.length}t.samples=d,this.remuxAudio(t,e,n)},t.prototype.remuxID3=function(t,e){var n,i=t.samples.length,r=t.inputTimeScale,o=this._initPTS,s=this._initDTS;if(i){for(var a=0;a<i;a++)n=t.samples[a],n.pts=(n.pts-o)/r,n.dts=(n.dts-s)/r;this.observer.trigger(O.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var n,i=t.samples.length,r=t.inputTimeScale,o=this._initPTS;if(i){for(var s=0;s<i;s++)n=t.samples[s],n.pts=(n.pts-o)/r;this.observer.trigger(O.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t},t}(),at=st,ut=function(){function t(e){R(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,n,i,r,o,s,a){var u=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),u.trigger(O.a.FRAG_PARSING_DATA,{data1:a,startPTS:r,startDTS:r,type:c,nb:1,dropped:0}),u.trigger(O.a.FRAG_PARSED)},t}(),ct=ut,ft=function(){function t(e,n,i,r){L(this,t),this.observer=e,this.typeSupported=n,this.config=i,this.vendor=r}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,n,i,r,o,s,a,u,c,f,h){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var l=this.decrypter;null==l&&(l=this.decrypter=new F(this.observer,this.config));var d,p=this;try{d=performance.now()}catch(t){d=Date.now()}l.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var l;try{l=performance.now()}catch(t){l=Date.now()}p.observer.trigger(O.a.FRAG_DECRYPTED,{stats:{tstart:d,tdecrypt:l}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,r,o,s,a,u,c,f,h)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,r,o,s,a,u,c,f,h)},t.prototype.pushDecrypted=function(t,e,n,i,r,o,s,a,u,c,f,h){var l=this.demuxer;if(!l||s&&!this.probe(t)){for(var d=this.observer,p=this.typeSupported,v=this.config,g=[{demux:j,remux:at},{demux:tt,remux:at},{demux:Z,remux:at},{demux:X,remux:ct}],y=0,m=g.length;y<m;y++){var E=g[y],_=E.demux.probe;if(_(t)){var T=this.remuxer=new E.remux(d,v,p,this.vendor);l=new E.demux(d,T,v,p),this.probe=_;break}}if(!l)return void d.trigger(O.a.ERROR,{type:I.b.MEDIA_ERROR,details:I.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=l}var b=this.remuxer;(s||a)&&(l.resetInitSegment(n,i,r,c),b.resetInitSegment()),s&&(l.resetTimeStamp(h),b.resetTimeStamp(h)),"function"==typeof l.setDecryptData&&l.setDecryptData(e),l.append(t,o,u,f)},t}();e.a=ft},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=Ut[e];return!!n&&!0===n[t.slice(0,4)]}function s(t){return MediaSource.isTypeSupported('video/mp4;codecs="'+t+'"')}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e,n){var i=t[e],r=t[n],o=r.startPTS;isNaN(o)?r.start=n>e?i.start+i.duration:Math.max(i.start-r.duration,0):n>e?(i.duration=o-i.start,i.duration<0&&It.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-o,r.duration<0&&It.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function m(t,e,n,i,r,o){if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-n);isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),n=Math.min(n,e.startPTS),i=Math.max(i,e.endPTS),r=Math.min(r,e.startDTS),o=Math.max(o,e.endDTS)}var a=n-e.start;e.start=e.startPTS=n,e.endPTS=i,e.startDTS=r,e.endDTS=o,e.duration=i-n;var u=e.sn;if(!t||u<t.startSN||u>t.endSN)return 0;var c,f,h;for(c=u-t.startSN,f=t.fragments,f[c]=e,h=c;h>0;h--)y(f,h,h-1);for(h=c;h<f.length-1;h++)y(f,h,h+1);return t.PTSKnown=!0,a}function E(t,e){var n,i=Math.max(t.startSN,e.startSN)-e.startSN,r=Math.min(t.endSN,e.endSN)-e.startSN,o=e.startSN-t.startSN,s=t.fragments,a=e.fragments,u=0;if(r<i)return void(e.PTSKnown=!1);for(var c=i;c<=r;c++){var f=s[o+c],h=a[c];h&&f&&(u=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,h.backtracked=f.backtracked,h.dropped=f.dropped,n=h))}if(u)for(It.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<a.length;c++)a[c].cc+=u;if(n)m(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(o>=0&&o<s.length){var l=s[o].start;for(c=0;c<a.length;c++)a[c].start+=l}e.PTSKnown=t.PTSKnown}function _(t,e){for(var n=null,i=0;i<t.length;i+=1){var r=t[i];if(r&&r.cc===e){n=r;break}}return n}function T(t,e){return Zt.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function b(t,e,n){var i=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(i=!0),i}function w(t,e){var n=t.fragments,i=e.fragments;if(!i.length||!n.length)return void It.b.log("No fragments to align");var r=_(n,i[0].cc);return!r||r&&!r.startPTS?void It.b.log("No frag in previous level to align on"):r}function S(t,e){e.fragments.forEach(function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}),e.PTSKnown=!0}function A(t,e,n){if(b(t,e,n)){var i=w(e.details,n);i&&(It.b.log("Adjusting PTS using last level due to CC increase within current level"),S(i.start,n))}if(!1===n.PTSKnown&&e&&e.details){var r=e.details.programDateTime,o=n.programDateTime,s=(o-r)/1e3+e.details.fragments[0].start;isNaN(s)||(It.b.log("adjusting PTS using programDateTime delta, sliding:"+s.toFixed(3)),S(s,n))}}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function D(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function B(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function H(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function K(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function nt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Xe,this.regionList=[]}function it(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function rt(){this.values=Object.create(null)}function ot(t,e,n,i){var r=i?t.split(i):[t];for(var o in r)if("string"==typeof r[o]){var s=r[o].split(n);if(2===s.length){var a=s[0],u=s[1];e(a,u)}}}function st(t,e,n){function i(){var e=it(t);if(null===e)throw new Error("Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}var o=t;if(r(),e.startTime=i(),r(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);t=t.substr(3),r(),e.endTime=i(),r(),function(t,e){var i=new rt;ot(t,function(t,e){switch(t){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===e){i.set(t,n[r].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var o=e.split(","),s=o[0];i.integer(t,s),i.percent(t,s)&&i.set("snapToLines",!1),i.alt(t,s,["auto"]),2===o.length&&i.alt("lineAlign",o[1],["start",We,"end"]);break;case"position":o=e.split(","),i.percent(t,o[0]),2===o.length&&i.alt("positionAlign",o[1],["start",We,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",We,"end","left","right"])}},/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===Ke.line&&(r=-1),e.line=r,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",We);var o=i.get("position","auto");"auto"===o&&50===Ke.position&&(o="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=o}(t,e)}function at(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function ut(t,e,n,i){for(var r,o,s,a,u,c=window.VTTCue||window.TextTrackCue,f=0;f<i.rows.length;f++)if(r=i.rows[f],s=!0,a=0,u="",!r.isEmpty()){for(var h=0;h<r.chars.length;h++)r.chars[h].uchar.match(/\s/)&&s?a++:(u+=r.chars[h].uchar,s=!1);r.cueStartTime=e,e===n&&(n+=1e-4),o=new c(e,n,at(u.trim())),a>=16?a--:a++,navigator.userAgent.match(/Firefox\//)?o.line=f+1:o.line=f>7?f-2:f+1,o.align="left",o.position=Math.max(0,Math.min(100,a/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function lt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function dt(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function pt(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function vt(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Et(t){for(var e=[],n=0;n<t.length;n++)"subtitles"===t[n].kind&&e.push(t[n]);return e}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var St={};n.d(St,"newCue",function(){return ut});var At=n(5),Rt=n.n(At),Lt=n(1),Ot=n(2),It=n(0),Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt=function(){function t(e){i(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.unregisterListeners()},t.prototype.isEventHandler=function(){return"object"===Ct(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){var n=function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)};try{n.call(this,t,e).call()}catch(e){It.b.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(Lt.a.ERROR,{type:Ot.b.OTHER_ERROR,details:Ot.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),Pt=Dt,Mt=/^(\d+)x(\d+)$/,Nt=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,xt=function(){function t(e){r(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)n[i]=parseInt(e.slice(2*i,2*i+2),16);return n}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=Mt.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(Nt.lastIndex=0;null!==(e=Nt.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[e[1]]=i}return n},t}(),kt=xt,Ut={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},Ft=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Bt=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,Gt=/#EXT-X-MEDIA:(.*)/g,jt=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Ht=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,Vt=function(){function t(){c(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return Ft(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Rt.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),Xt=function(){function t(){c(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var n=t;return t&&t.method&&t.uri&&!t.iv&&(n=new Vt,n.method=t.method,n.baseuri=t.baseuri,n.reluri=t.reluri,n.iv=this.createInitializationVector(e)),n},t.prototype.cloneObj=function(t){return JSON.parse(JSON.stringify(t))},Ft(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Rt.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var n=this.lastByteRangeEndOffset;t[0]=n||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),t}(),Kt=function(t){function e(n){c(this,e);var i=a(this,t.call(this,n,Lt.a.MANIFEST_LOADING,Lt.a.LEVEL_LOADING,Lt.a.AUDIO_TRACK_LOADING,Lt.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return u(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},Pt.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:"manifest"})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:"audioTrack",id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},e.prototype.load=function(t,e){var n=this.loaders[e.type];if(n){var i=n.context;if(i&&i.url===t)return void It.b.trace("playlist request ongoing");It.b.warn("abort previous loader for type:"+e.type),n.abort()}var r=this.hls.config,o=void 0,s=void 0,a=void 0,u=void 0;"manifest"===e.type?(o=r.manifestLoadingMaxRetry,s=r.manifestLoadingTimeOut,a=r.manifestLoadingRetryDelay,u=r.manifestLoadingMaxRetryTimeout):(o=r.levelLoadingMaxRetry,s=r.levelLoadingTimeOut,a=r.levelLoadingRetryDelay,u=r.levelLoadingMaxRetryTimeout,It.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),n=this.loaders[e.type]=e.loader=void 0!==r.pLoader?new r.pLoader(r):new r.loader(r),e.url=t,e.responseType="";var c=void 0,f=void 0;c={timeout:s,maxRetry:o,retryDelay:a,maxRetryDelay:u},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(e,c,f)},e.prototype.resolve=function(t,e){return Rt.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.prototype.parseMasterPlaylist=function(t,e){var n=[],i=void 0;for(Bt.lastIndex=0;null!=(i=Bt.exec(t));){var r={},s=r.attrs=new kt(i[1]);r.url=this.resolve(i[2],e);var a=s.decimalResolution("RESOLUTION");a&&(r.width=a.width,r.height=a.height),r.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),r.name=s.NAME,function(t,e){["video","audio"].forEach(function(n){var i=t.filter(function(t){return o(t,n)});if(i.length){var r=i.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[n+"Codec"]=r.length>0?r[0]:i[0],t=t.filter(function(t){return-1===i.indexOf(t)})}}),e.unknownCodecs=t}([].concat((s.CODECS||"").split(/[ ,]+/)),r),r.videoCodec&&-1!==r.videoCodec.indexOf("avc1")&&(r.videoCodec=this.avc1toavcoti(r.videoCodec)),n.push(r)}return n},e.prototype.parseMasterPlaylistMedia=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=void 0,o=[],s=0;for(Gt.lastIndex=0;null!=(r=Gt.exec(t));){var a={},u=new kt(r[1]);u.TYPE===n&&(a.groupId=u["GROUP-ID"],a.name=u.NAME,a.type=n,a.default="YES"===u.DEFAULT,a.autoselect="YES"===u.AUTOSELECT,a.forced="YES"===u.FORCED,u.URI&&(a.url=this.resolve(u.URI,e)),a.lang=u.LANGUAGE,a.name||(a.name=a.lang),i&&(a.audioCodec=i),a.id=s++,o.push(a))}return o},e.prototype.avc1toavcoti=function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},e.prototype.parseLevelPlaylist=function(t,e,n,i){var r,o,s=0,a=0,u={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},c=new Vt,f=0,h=null,l=new Xt;for(jt.lastIndex=0;null!==(r=jt.exec(t));){var d=r[1];if(d){l.duration=parseFloat(d);var p=(" "+r[2]).slice(1);l.title=p||null,l.tagList.push(p?["INF",d,p]:["INF",d])}else if(r[3]){if(!isNaN(l.duration)){var v=s++;l.type=i,l.start=a,l.levelkey=c,l.sn=v,l.level=n,l.cc=f,l.baseurl=e,l.relurl=(" "+r[3]).slice(1),u.fragments.push(l),h=l,a+=l.duration,l=new Xt}}else if(r[4]){if(l.rawByteRange=(" "+r[4]).slice(1),h){var g=h.byteRangeEndOffset;g&&(l.lastByteRangeEndOffset=g)}}else if(r[5])l.rawProgramDateTime=(" "+r[5]).slice(1),l.tagList.push(["PROGRAM-DATE-TIME",l.rawProgramDateTime]),void 0===u.programDateTime&&(u.programDateTime=new Date(new Date(Date.parse(r[5]))-1e3*a));else{for(r=r[0].match(Ht),o=1;o<r.length&&void 0===r[o];o++);var y=(" "+r[o+1]).slice(1),m=(" "+r[o+2]).slice(1);switch(r[o]){case"#":l.tagList.push(m?[y,m]:[y]);break;case"PLAYLIST-TYPE":u.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":s=u.startSN=parseInt(y);break;case"TARGETDURATION":u.targetduration=parseFloat(y);break;case"VERSION":u.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":f++,l.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(y);break;case"KEY":var E=y,_=new kt(E),T=_.enumeratedString("METHOD"),b=_.URI,w=_.hexadecimalInteger("IV");T&&(c=new Vt,b&&["AES-128","SAMPLE-AES"].indexOf(T)>=0&&(c.method=T,c.baseuri=e,c.reluri=b,c.key=null,c.iv=w));break;case"START":var S=y,A=new kt(S),R=A.decimalFloatingPoint("TIME-OFFSET");isNaN(R)||(u.startTimeOffset=R);break;case"MAP":var L=new kt(y);l.relurl=L.URI,l.rawByteRange=L.BYTERANGE,l.baseurl=e,l.level=n,l.type=i,l.sn="initSegment",u.initSegment=l,l=new Xt;break;default:It.b.warn("line parsed but not handled: "+r)}}}return l=h,l&&!l.relurl&&(u.fragments.pop(),a-=l.duration),u.totalduration=a,u.averagetargetduration=a/u.fragments.length,u.endSN=s-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=f,u},e.prototype.loadsuccess=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.data,o=t.url,s=n.type,a=n.id,u=n.level,c=this.hls;if(this.loaders[s]=void 0,void 0!==o&&0!==o.indexOf("data:")||(o=n.url),e.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var f="audioTrack"!==s&&"subtitleTrack"!==s,h=isNaN(u)?isNaN(a)?0:a:u,l=this.parseLevelPlaylist(r,o,h,"audioTrack"===s?"audio":"subtitleTrack"===s?"subtitle":"main");l.tload=e.tload,"manifest"===s&&c.trigger(Lt.a.MANIFEST_LOADED,{levels:[{url:o,details:l}],audioTracks:[],url:o,stats:e,networkDetails:i}),e.tparsed=performance.now(),l.targetduration?f?c.trigger(Lt.a.LEVEL_LOADED,{details:l,level:u||0,id:a||0,stats:e,networkDetails:i}):"audioTrack"===s?c.trigger(Lt.a.AUDIO_TRACK_LOADED,{details:l,id:a,stats:e,networkDetails:i}):"subtitleTrack"===s&&c.trigger(Lt.a.SUBTITLE_TRACK_LOADED,{details:l,id:a,stats:e,networkDetails:i}):c.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:Ot.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"invalid targetduration",networkDetails:i})}else{var d=this.parseMasterPlaylist(r,o);if(d.length){var p=this.parseMasterPlaylistMedia(r,o,"AUDIO",d[0].audioCodec),v=this.parseMasterPlaylistMedia(r,o,"SUBTITLES");if(p.length){var g=!1;p.forEach(function(t){t.url||(g=!0)}),!1===g&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(It.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}c.trigger(Lt.a.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:v,url:o,stats:e,networkDetails:i})}else c.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:Ot.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no level found in manifest",networkDetails:i})}else c.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:Ot.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no EXTM3U delimiter",networkDetails:i})},e.prototype.loaderror=function(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":n=Ot.a.MANIFEST_LOAD_ERROR,i=!0;break;case"level":n=Ot.a.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":n=Ot.a.AUDIO_TRACK_LOAD_ERROR,i=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:n,fatal:i,url:o.url,loader:o,response:t,context:e,networkDetails:r})},e.prototype.loadtimeout=function(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":n=Ot.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":n=Ot.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":n=Ot.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:n,fatal:i,url:o.url,loader:o,context:e,networkDetails:r})},e}(Pt),Wt=Kt,Yt=function(t){function e(n){f(this,e);var i=h(this,t.call(this,n,Lt.a.FRAG_LOADING));return i.loaders={},i}return l(e,t),e.prototype.destroy=function(){var t=this.loaders;for(var e in t){var n=t[e];n&&n.destroy()}this.loaders={},Pt.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,n=e.type,i=this.loaders[n],r=this.hls.config;e.loaded=0,i&&(It.b.warn("abort previous fragment loader for type:"+n),i.abort()),i=this.loaders[n]=e.loader=void 0!==r.fLoader?new r.fLoader(r):new r.loader(r);var o=void 0,s=void 0,a=void 0;o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var u=e.byteRangeStartOffset,c=e.byteRangeEndOffset;isNaN(u)||isNaN(c)||(o.rangeStart=u,o.rangeEnd=c),s={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(o,s,a)},e.prototype.loadsuccess=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.data,o=n.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(Lt.a.FRAG_LOADED,{payload:r,frag:o,stats:e,networkDetails:i})},e.prototype.loaderror=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:Ot.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},e.prototype.loadtimeout=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:Ot.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},e.prototype.loadprogress=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.frag;r.loaded=t.loaded,this.hls.trigger(Lt.a.FRAG_LOAD_PROGRESS,{frag:r,stats:t,networkDetails:i})},e}(Pt),qt=Yt,zt=function(t){function e(n){d(this,e);var i=p(this,t.call(this,n,Lt.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return v(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},Pt.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,n=e.type,i=this.loaders[n],r=e.decryptdata,o=r.uri;if(o!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;i&&(It.b.warn("abort previous key loader for type:"+n),i.abort()),e.loader=this.loaders[n]=new s.loader(s),this.decrypturl=o,this.decryptkey=null;var a=void 0,u=void 0,c=void 0;a={url:o,frag:e,responseType:"arraybuffer"},u={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(a,u,c)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(Lt.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(Lt.a.KEY_LOADED,{frag:i})},e.prototype.loaderror=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:Ot.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},e.prototype.loadtimeout=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Lt.a.ERROR,{type:Ot.b.NETWORK_ERROR,details:Ot.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}(Pt),Qt=zt,$t={search:function(t,e){for(var n=0,i=t.length-1,r=null,o=null;n<=i;){r=(n+i)/2|0,o=t[r];var s=e(o);if(s>0)n=r+1;else{if(!(s<0))return o;i=r-1}}return null}},Zt=$t,Jt={isBuffered:function(t,e){if(t)for(var n=t.buffered,i=0;i<n.length;i++)if(e>=n.start(i)&&e<=n.end(i))return!0;return!1},bufferInfo:function(t,e,n){if(t){var i,r=t.buffered,o=[];for(i=0;i<r.length;i++)o.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(o,e,n)}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,n){var i,r,o,s,a,u=[];for(t.sort(function(t,e){var n=t.start-e.start;return n||e.end-t.end}),a=0;a<t.length;a++){var c=u.length;if(c){var f=u[c-1].end;t[a].start-f<n?t[a].end>f&&(u[c-1].end=t[a].end):u.push(t[a])}else u.push(t[a])}for(a=0,i=0,r=o=e;a<u.length;a++){var h=u[a].start,l=u[a].end;if(e+n>=h&&e<l)r=h,o=l,i=o-e;else if(e+n<h){s=h;break}}return{len:i,start:r,end:o,nextStart:s}}},te=Jt,ee=n(6),ne=n(4),ie=n.n(ne),re=n(8),oe=n.n(re),se=function(){function t(e,n){g(this,t),this.hls=e,this.id=n;var i=this.observer=new ie.a,r=e.config;i.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i.emit.apply(i,[t,t].concat(n))},i.off=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[t].concat(n))};var o=function(t,n){n=n||{},n.frag=this.frag,n.id=this.id,e.trigger(t,n)}.bind(this);i.on(Lt.a.FRAG_DECRYPTED,o),i.on(Lt.a.FRAG_PARSING_INIT_SEGMENT,o),i.on(Lt.a.FRAG_PARSING_DATA,o),i.on(Lt.a.FRAG_PARSED,o),i.on(Lt.a.ERROR,o),i.on(Lt.a.FRAG_PARSING_METADATA,o),i.on(Lt.a.FRAG_PARSING_USERDATA,o),i.on(Lt.a.INIT_PTS_FOUND,o);var s={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},a=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){It.b.log("demuxing in webworker");var u=void 0;try{u=this.w=oe()(9),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(t){e.trigger(Lt.a.ERROR,{type:Ot.b.OTHER_ERROR,details:Ot.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:s,vendor:a,id:n,config:JSON.stringify(r)})}catch(t){It.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&URL.revokeObjectURL(u.objectURL),this.demuxer=new ee.a(i,s,r,a),this.w=void 0}}else this.demuxer=new ee.a(i,s,r,a)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,n,i,r,o,s,a){var u=this.w,c=isNaN(r.startDTS)?r.start:r.startDTS,f=r.decryptdata,h=this.frag,l=!(h&&r.cc===h.cc),d=!(h&&r.level===h.level),p=h&&r.sn===h.sn+1,v=!d&&p;if(l&&It.b.log(this.id+":discontinuity detected"),d&&It.b.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:e,audioCodec:n,videoCodec:i,timeOffset:c,discontinuity:l,trackSwitch:d,contiguous:v,duration:o,accurateTimeOffset:s,defaultInitPTS:a},[t]);else{var g=this.demuxer;g&&g.push(t,f,e,n,i,c,l,d,v,o,s,a)}},t.prototype.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case Lt.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}(),ae=se,ue={toString:function(t){for(var e="",n=t.length,i=0;i<n;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}},ce=ue,fe=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),he={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},le=function(t){function e(n){R(this,e);var i=L(this,t.call(this,n,Lt.a.MEDIA_ATTACHED,Lt.a.MEDIA_DETACHING,Lt.a.MANIFEST_LOADING,Lt.a.MANIFEST_PARSED,Lt.a.LEVEL_LOADED,Lt.a.KEY_LOADED,Lt.a.FRAG_LOADED,Lt.a.FRAG_LOAD_EMERGENCY_ABORTED,Lt.a.FRAG_PARSING_INIT_SEGMENT,Lt.a.FRAG_PARSING_DATA,Lt.a.FRAG_PARSED,Lt.a.ERROR,Lt.a.AUDIO_TRACK_SWITCHING,Lt.a.AUDIO_TRACK_SWITCHED,Lt.a.BUFFER_CREATED,Lt.a.BUFFER_APPENDED,Lt.a.BUFFER_FLUSHED));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state=he.STOPPED,i.ontick=i.tick.bind(i),i}return O(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Pt.prototype.destroy.call(this),this.state=he.STOPPED},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(It.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=he.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=he.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=he.STOPPED,this.forceStartLoad=!1},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){switch(this.state){case he.ERROR:break;case he.BUFFER_FLUSHING:this.fragLoadError=0;break;case he.IDLE:this._doTickIdle();break;case he.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=he.IDLE);break;case he.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(It.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=he.IDLE);break;case he.ERROR:case he.STOPPED:case he.FRAG_LOADING:case he.PARSING:case he.PARSED:case he.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0===this.levelLastLoaded||n||!this.startFragRequested&&e.startFragPrefetch){var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,o=this.levels[r];if(o){var s=o.bitrate,a=void 0;a=s?Math.max(8*e.maxBufferSize/s,e.maxBufferLength):e.maxBufferLength,a=Math.min(a,e.maxMaxBufferLength);var u=te.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,e.maxBufferHole),c=u.len;if(!(c>=a)){It.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+a.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var f=o.details;if(void 0===f||f.live&&this.levelLastLoaded!==r)return void(this.state=he.WAITING_LEVEL);var h=this.fragPrevious;if(!f.live&&h&&h.sn===f.endSN&&!u.nextStart){if(Math.min(n.duration,h.start+h.duration)-Math.max(u.end,h.start)<=Math.max(.2,h.duration)){var l={};return this.altAudio&&(l.type="video"),this.hls.trigger(Lt.a.BUFFER_EOS,l),void(this.state=he.ENDED)}}this._fetchPayloadOrEos(i,u,f)}}}},e.prototype._fetchPayloadOrEos=function(t,e,n){var i=this.fragPrevious,r=this.level,o=n.fragments,s=o.length;if(0!==s){var a=o[0].start,u=o[s-1].start+o[s-1].duration,c=e.end,f=void 0;if(n.initSegment&&!n.initSegment.data)f=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(s<h)return void It.b.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+h);if(null===(f=this._ensureFragmentAtLivePoint(n,c,a,u,i,o,s)))return}else c<a&&(f=o[0]);f||(f=this._findFragment(a,i,s,o,c,u,n)),f&&this._loadFragmentOrKey(f,r,n,t,c)}},e.prototype._ensureFragmentAtLivePoint=function(t,e,n,i,r,o,s){var a=this.hls.config,u=this.media,c=void 0,f=void 0!==a.liveMaxLatencyDuration?a.liveMaxLatencyDuration:a.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(n-a.maxFragLookUpTolerance,i-f)){var h=this.liveSyncPosition=this.computeLivePosition(n,t);It.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,u&&u.readyState&&u.duration>h&&(u.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>i&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(r){var l=r.sn+1;if(l>=t.startSN&&l<=t.endSN){var d=o[l-t.startSN];r.cc===d.cc&&(c=d,It.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=Zt.search(o,function(t){return r.cc-t.cc}))&&It.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=o[Math.min(s-1,Math.round(s/2))],It.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},e.prototype._findFragment=function(t,e,n,i,r,o,s){var a=this.hls.config,u=void 0,c=void 0,f=a.maxFragLookUpTolerance,h=e?i[e.sn-i[0].sn+1]:void 0,l=function(t){var e=Math.min(f,t.duration);return t.start+t.duration-e<=r?1:t.start-e>r&&t.start?-1:0};if(r<o?(r>o-f&&(f=0),c=h&&!l(h)?h:Zt.search(i,l)):c=i[n-1],c){u=c;var d=u.sn-s.startSN,p=e&&u.level===e.level,v=i[d-1],g=i[d+1];if(e&&u.sn===e.sn)if(p&&!u.backtracked)if(u.sn<s.endSN){var y=e.deltaPTS;y&&y>a.maxBufferHole&&e.dropped&&d?(u=v,It.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):(u=g,It.b.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(g&&g.backtracked?(It.b.warn("Already backtracked from fragment "+g.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+g.sn),u=g):(It.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,v?(v.loadCounter&&v.loadCounter--,u=v,u.backtracked=!0):d&&(u=null)))}return u},e.prototype._loadFragmentOrKey=function(t,e,n,i,r){var o=this.hls,s=o.config;if(!t.decryptdata||null==t.decryptdata.uri||null!=t.decryptdata.key){if(It.b.log("Loading "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var a=s.fragLoadingLoopThreshold;if(t.loadCounter>a&&Math.abs(this.fragLoadIdx-t.loadIdx)<a)return void o.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,t.autoLevel=o.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),o.trigger(Lt.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new ae(o,"main")),void(this.state=he.FRAG_LOADING)}It.b.log("Loading key for "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e),this.state=he.KEY_LOADING,o.trigger(Lt.a.KEY_LOADING,{frag:t})},e.prototype.getBufferedFrag=function(t){return Zt.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&!1===n.seeking&&(e=n.currentTime,e>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),te.isBuffered(n,e)?t=this.getBufferedFrag(e):te.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(Lt.a.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(Lt.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},e.prototype.immediateLevelSwitch=function(){if(It.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,te.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,n=void 0,i=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferedFrag(t.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var r=this.hls.nextLoadLevel,o=this.levels[r],s=this.fragLastKbps;e=s&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+e))&&(i=this.followingBufferedFrag(i))){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=he.BUFFER_FLUSHING;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(Lt.a.BUFFER_FLUSHING,n)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(It.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0,t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,n=this.config;isNaN(e)||It.b.log("media seeking to "+e.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:t,r=te.bufferInfo(i,e,this.config.maxBufferHole);if(this.state===he.FRAG_LOADING){var o=this.fragCurrent;if(0===r.len&&o){var s=n.maxFragLookUpTolerance,a=o.start-s,u=o.start+o.duration+s;e<a||e>u?(o.loader&&(It.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=he.IDLE):It.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===he.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=he.IDLE);t&&(this.lastCurrentTime=e),this.state!==he.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||It.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){It.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){It.b.log("trigger BUFFER_RESET"),this.hls.trigger(Lt.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e,n=!1,i=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(n=!0),-1!==e.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&It.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,n=t.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],o=e.totalduration,s=0;if(It.b.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var a=r.details;a&&e.fragments.length>0?(E(a,e),s=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,a),e.PTSKnown&&!isNaN(s)?It.b.log("live playlist sliding:"+s.toFixed(3)):(It.b.log("live playlist - outdated PTS, unknown sliding"),A(this.fragPrevious,i,e))):(It.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,A(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(r.details=e,this.levelLastLoaded=n,this.hls.trigger(Lt.a.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=e.startTimeOffset;isNaN(u)?e.live?(this.startPosition=this.computeLivePosition(s,e),It.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(u<0&&(It.b.log("negative start time offset "+u+", count from end of last fragment"),u=s+o+u),It.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===he.WAITING_LEVEL&&(this.state=he.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===he.KEY_LOADING&&(this.state=he.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===he.FRAG_LOADING&&e&&"main"===n.type&&n.level===e.level&&n.sn===e.sn){var i=t.stats,r=this.levels[e.level],o=r.details;if(It.b.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=i,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=he.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(Lt.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=he.IDLE,i.tparsed=i.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(Lt.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else{this.state=he.PARSING;var s=o.totalduration,a=e.level,u=e.sn,c=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(It.b.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,It.b.log("Parsing "+u+" of ["+o.startSN+" ,"+o.endSN+"],level "+a+", cc "+e.cc);var f=this.demuxer;f||(f=this.demuxer=new ae(this.hls,"main"));var h=this.media,l=h&&h.seeking,d=!l&&(o.PTSKnown||!o.live),p=o.initSegment?o.initSegment.data:[];f.push(t.payload,p,c,r.videoCodec,e,s,d,void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===he.PARSING){var i,r,o=t.tracks;if(o.audio&&this.altAudio&&delete o.audio,r=o.audio){var s=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(It.b.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===a.indexOf("firefox")&&(s="mp4a.40.5"),-1!==a.indexOf("android")&&"audio/mpeg"!==r.container&&(s="mp4a.40.2",It.b.log("Android: force audio codec to "+s)),r.levelCodec=s,r.id=t.id}r=o.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=t.id),this.hls.trigger(Lt.a.BUFFER_CODECS,o);for(i in o){r=o[i],It.b.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var u=r.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Lt.a.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===he.PARSING){var r=this.levels[this.level],o=n;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),It.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(o.dropped=t.dropped,o.dropped){if(!o.backtracked)return It.b.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=he.IDLE,this.fragPrevious=o,void this.tick();It.b.warn("Already backtracked on this fragment, appending with the gap")}else o.backtracked=!1;var s=m(r.details,o,t.startPTS,t.endPTS,t.startDTS,t.endDTS),a=this.hls;a.trigger(Lt.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(n){n&&n.length&&e.state===he.PARSING&&(e.appended=!0,e.pendingBuffering=!0,a.trigger(Lt.a.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===he.PARSING&&(this.stats.tparsed=performance.now(),this.state=he.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,n=t.id;if(!e){if(this.mediaBuffer!==this.media){It.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(It.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=he.IDLE}var r=this.hls;r.trigger(Lt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(Lt.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(It.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,n=void 0,i=void 0,r=!1;for(var o in e){var s=e[o];"main"===s.id?(i=o,n=s,"video"===o&&(this.videoBuffer=e[o].buffer)):r=!0}r&&n?(It.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==he.PARSING&&e!==he.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==he.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;It.b.log("main buffered : "+ce.toString(e.buffered));var n=this._bufferedFrags.filter(function(t){return te.isBuffered(e,(t.startPTS+t.endPTS)/2)});n.push(t),this._bufferedFrags=n.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(Lt.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.state=he.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&te.isBuffered(this.media,this.media.currentTime)&&te.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case Ot.a.FRAG_LOAD_ERROR:case Ot.a.FRAG_LOAD_TIMEOUT:case Ot.a.KEY_LOAD_ERROR:case Ot.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);e.loadCounter=0,It.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=he.FRAG_LOADING_WAITING_RETRY}else It.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=he.ERROR;break;case Ot.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(n?(this._reduceMaxBufferLength(e.duration),this.state=he.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=he.ERROR));break;case Ot.a.LEVEL_LOAD_ERROR:case Ot.a.LEVEL_LOAD_TIMEOUT:this.state!==he.ERROR&&(t.fatal?(this.state=he.ERROR,It.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==he.WAITING_LEVEL||(this.state=he.IDLE));break;case Ot.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==he.PARSING&&this.state!==he.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=he.IDLE):(It.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,It.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*e.fragLoadingLoopThreshold)},e.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var n=t.currentTime,i=this.mediaBuffer?this.mediaBuffer:t,r=i.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var o=t.seeking?n:this.startPosition,s=te.isBuffered(i,o),a=r.start(0);(n!==o||!s&&Math.abs(o-a)<e.maxSeekHole)&&(It.b.log("target start position:"+o),s||(o=a,It.b.log("target start position not buffered, seek to buffered.start(0) "+o)),It.b.log("adjust currentTime from "+n+" to "+o),t.currentTime=o)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var u=te.bufferInfo(t,n,0),c=!(t.paused||t.ended||0===t.buffered.length),f=n!==this.lastCurrentTime;if(f)this.stallReported&&(It.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(c){var h=performance.now(),l=this.hls;if(this.stalled){var d=h-this.stalled,p=u.len,v=this.nudgeRetry||0;if(p<=.5&&d>1e3*e.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,It.b.warn("playback stalling in low buffer @"+n),l.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:p}));var g=u.nextStart,y=g-n;if(g&&y<e.maxSeekHole&&y>0){this.nudgeRetry=++v;var m=v*e.nudgeOffset;It.b.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+g+" + nudge "+m),t.currentTime=g+m,this.stalled=void 0,l.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:g+m-n})}}else if(p>.5&&d>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,It.b.warn("playback stalling in high buffer @"+n),l.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:p})),this.stalled=void 0,this.nudgeRetry=++v,v<e.nudgeMaxRetry){var E=t.currentTime,_=E+v*e.nudgeOffset;It.b.log("adjust currentTime from "+E+" to "+_),t.currentTime=_,l.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else It.b.error("still stuck in high buffer @"+n+" after "+e.nudgeMaxRetry+", raise fatal error"),l.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=h,this.stallReported=!1}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=he.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return te.isBuffered(t,(e.startPTS+e.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=he.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},fe(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,It.b.log("main stream:"+e+"->"+t),this.hls.trigger(Lt.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(Pt),de=le,pe=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ve=function(t){function e(n){I(this,e);var i=C(this,t.call(this,n,Lt.a.MANIFEST_LOADED,Lt.a.LEVEL_LOADED,Lt.a.FRAG_LOADED,Lt.a.ERROR));return i.ontick=i.tick.bind(i),i._manualLevel=-1,i}return D(e,t),e.prototype.destroy=function(){this.cleanTimer(),this._manualLevel=-1},e.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){this.canload=!0;var t=this._levels;t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),this.timer&&this.tick()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e,n=[],i=[],r={},o=!1,a=!1,u=this.hls,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase());if(t.levels.forEach(function(t){t.videoCodec&&(o=!0),c&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(t.audioCodec||t.attrs&&t.attrs.AUDIO)&&(a=!0);var e=r[t.bitrate];void 0===e?(r[t.bitrate]=n.length,t.url=[t.url],t.urlId=0,n.push(t)):n[e].url.push(t.url)}),o&&a?n.forEach(function(t){t.videoCodec&&i.push(t)}):i=n,i=i.filter(function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||s(e))&&(!n||s(n))}),i.length){e=i[0].bitrate,i.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=i;for(var f=0;f<i.length;f++)if(i[f].bitrate===e){this._firstLevel=f,It.b.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+e);break}u.trigger(Lt.a.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:o,altAudio:t.audioTracks.length>0})}else u.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:u.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(t>=0&&t<e.length){if(this.cleanTimer(),this._level!==t){It.b.log("switching to level "+t),this._level=t;var i=e[t];i.level=t,n.trigger(Lt.a.LEVEL_SWITCH,i),n.trigger(Lt.a.LEVEL_SWITCHING,i)}var r=e[t],o=r.details;if(!o||!0===o.live){var s=r.urlId;n.trigger(Lt.a.LEVEL_LOADING,{url:r.url[s],level:t,id:s})}}else n.trigger(Lt.a.ERROR,{type:Ot.b.OTHER_ERROR,details:Ot.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(t.fatal)return void(t.type===Ot.b.NETWORK_ERROR&&this.cleanTimer());var e=t.details,n=this.hls,i=void 0,r=void 0,o=!1;switch(e){case Ot.a.FRAG_LOAD_ERROR:case Ot.a.FRAG_LOAD_TIMEOUT:case Ot.a.FRAG_LOOP_LOADING_ERROR:case Ot.a.KEY_LOAD_ERROR:case Ot.a.KEY_LOAD_TIMEOUT:i=t.frag.level;break;case Ot.a.LEVEL_LOAD_ERROR:case Ot.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,o=!0;break;case Ot.a.REMUX_ALLOC_ERROR:i=t.level}if(void 0!==i){r=this._levels[i],r.loadError?r.loadError++:r.loadError=1;var s=r.url.length;if(s>1&&r.loadError<s)r.urlId=(r.urlId+1)%s,r.details=void 0,It.b.warn("level controller,"+e+" for level "+i+": switching to redundant stream id "+r.urlId);else{if(-1===this._manualLevel&&i)It.b.warn("level controller,"+e+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,i-1);else if(r&&r.details&&r.details.live)It.b.warn("level controller,"+e+" on live stream, discard"),o&&(this._level=void 0);else if(e===Ot.a.LEVEL_LOAD_ERROR||e===Ot.a.LEVEL_LOAD_TIMEOUT){var a=n.media,u=a&&te.isBuffered(a,a.currentTime)&&te.isBuffered(a,a.currentTime+.5);if(u){var c=n.config.levelLoadingRetryDelay;It.b.warn("level controller,"+e+", but media buffered, retry in "+c+"ms"),this.timer=setTimeout(this.ontick,c),t.levelRetry=!0}else It.b.error("cannot recover "+e+" error"),this._level=void 0,this.cleanTimer(),t.fatal=!0}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if(e&&"main"===e.type){var n=this._levels[e.level];n&&(n.loadError=0)}},e.prototype.onLevelLoaded=function(t){var e=t.level;if(e===this._level){var n=this._levels[e];n.loadError=0;var i=t.details;if(i.live){var r=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),o=n.details;o&&i.endSN===o.endSN&&(r/=2,It.b.log("same live playlist, reload twice faster")),r-=performance.now()-t.stats.trequest,r=Math.max(1e3,Math.round(r)),It.b.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(this.ontick,r)}else this.timer=null}},e.prototype.tick=function(){var t=this._level;if(void 0!==t&&this.canload){var e=this._levels[t];if(e&&e.url){var n=e.urlId;this.hls.trigger(Lt.a.LEVEL_LOADING,{url:e.url[n],level:t,id:n})}}},pe(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(t){var e=this._levels;e&&e.length>t&&(this._level===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(t){this._manualLevel=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this._manualLevel&&(this.hls.nextAutoLevel=t)}}]),e}(Pt),ge=ve,ye=n(3),me=function(t){function e(n){P(this,e);var i=M(this,t.call(this,n,Lt.a.MEDIA_ATTACHED,Lt.a.MEDIA_DETACHING,Lt.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return N(e,t),e.prototype.destroy=function(){Pt.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){this.media=void 0},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var o=ye.a.getID3Frames(n[r].data);if(o){var s=n[r].pts,a=r<n.length-1?n[r+1].pts:e.endPTS;s===a&&(a+=1e-4);for(var u=0;u<o.length;u++){var c=o[u];if(!ye.a.isTimeStampFrame(c)){var f=new i(s,a,"");f.value=c,this.id3Track.addCue(f)}}}}},e}(Pt),Ee=me,_e=function(){function t(e){x(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Te=_e,be=function(){function t(e,n,i,r){k(this,t),this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Te(n),this.fast_=new Te(i)}return t.prototype.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var n=8e3*e/t,i=t/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),we=be,Se=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Ae=function(t){function e(n){U(this,e);var i=F(this,t.call(this,n,Lt.a.FRAG_LOADING,Lt.a.FRAG_LOADED,Lt.a.FRAG_BUFFERED,Lt.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=n,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return B(e,t),e.prototype.destroy=function(){this.clearTimer(),Pt.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=t.frag.level,r=n.levels[i].details.live,o=n.config,s=void 0,a=void 0;r?(s=o.abrEwmaFastLive,a=o.abrEwmaSlowLive):(s=o.abrEwmaFastVoD,a=o.abrEwmaSlowVoD),this._bwEstimator=new we(n,a,s,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent,i=n.loader,r=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return It.b.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var o=i.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var s=performance.now()-o.trequest,a=Math.abs(e.playbackRate);if(s>500*n.duration/a){var u=t.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/s),f=u[n.level],h=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,l=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*h/8)),d=e.currentTime,p=(l-o.loaded)/c,v=(te.bufferInfo(e,d,t.config.maxBufferHole).end-d)/a;if(v<2*n.duration/a&&p>v){var g=void 0,y=void 0;for(y=n.level-1;y>r;y--){var m=u[y].realBitrate?Math.max(u[y].realBitrate,u[y].bitrate):u[y].bitrate;if((g=n.duration*m/(6.4*c))<v)break}g<p&&(It.b.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+p.toFixed(1)+":"+v.toFixed(1)),t.nextLoadLevel=y,this._bwEstimator.sample(s,o.loaded),i.abort(),this.clearTimer(),t.trigger(Lt.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,r=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!(!0===e.aborted||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&e.tload!==e.tbuffered)){var i=e.tparsed-e.trequest;It.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case Ot.a.FRAG_LOAD_ERROR:case Ot.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,n,i,r,o,s,a,u){for(var c=r;c>=i;c--){var f=u[c],h=f.details,l=h?h.totalduration/h.fragments.length:e,d=!!h&&h.live,p=void 0;p=c<=t?s*n:a*n;var v=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,g=v*l/p;if(It.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+v+"/"+l+"/"+o+"/"+g),p>v&&(!g||d&&!this.bitrateTestDelay||g<o))return c}return-1},Se(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,i=t.config,r=t.minAutoLevel,o=t.media,s=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(te.bufferInfo(o,u,i.maxBufferHole).end-u)/c,l=this._findBestLevel(s,a,f,r,e,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(l>=0)return l;It.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var d=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,v=i.abrBandWidthUpFactor;if(0===h){var g=this.bitrateTestDelay;if(g){d=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-g,It.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*d)+" ms"),p=v=1}}return l=this._findBestLevel(s,a,f,r,e,h+d,p,v,n),Math.max(l,0)}}]),e}(Pt),Re=Ae,Le=function(t){function e(n){G(this,e);var i=j(this,t.call(this,n,Lt.a.MEDIA_ATTACHING,Lt.a.MEDIA_DETACHING,Lt.a.MANIFEST_PARSED,Lt.a.BUFFER_RESET,Lt.a.BUFFER_APPENDING,Lt.a.BUFFER_CODECS,Lt.a.BUFFER_EOS,Lt.a.BUFFER_FLUSHING,Lt.a.LEVEL_PTS_UPDATED,Lt.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return H(e,t),e.prototype.destroy=function(){Pt.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-t.start)>.1){var r=i.updating;try{i.abort()}catch(t){r=!0,It.b.warn("can not abort audio buffer: "+t)}r?this.audioTimestampOffset=t.start:(It.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,n=t.video||t.levels.length&&t.audio,i=0;t.altAudio&&(e||n)&&(i=(e?1:0)+(n?1:0),It.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(n)}},e.prototype.onMediaDetaching=function(){It.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){It.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(Lt.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){It.b.log("media source opened"),this.hls.trigger(Lt.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){It.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){It.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;It.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,n=this.segments.reduce(function(t,n){return n.parent===e?t+1:t},0);this.hls.trigger(Lt.a.BUFFER_APPENDED,{parent:e,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){It.b.error("sourceBuffer error:",t),this.hls.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;for(var i in t)if(!e[i]){var r=t[i],o=r.levelCodec||r.codec,s=r.container+";codecs="+o;It.b.log("creating sourceBuffer("+s+")");try{var a=e[i]=n.addSourceBuffer(s);a.addEventListener("updateend",this.onsbue),a.addEventListener("error",this.onsbe),this.tracks[i]={codec:o,container:r.container},r.buffer=a}catch(t){It.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:s})}}this.hls.trigger(Lt.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){It.b.error("sourceBuffer error:",t.event),this.hls.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,n=t.type;for(var i in e)n&&i!==n||e[i].ended||(e[i].ended=!0,It.b.log(i+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var n in t){var i=t[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}It.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){It.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;0!==e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.media,e=this.mediaSource,n=this.sourceBuffer,i=this._levelDuration;if(null!==i&&t&&e&&n&&0!==t.readyState&&"open"===e.readyState){for(var r in n)if(n[r].updating)return;null===this._msDuration&&(this._msDuration=e.duration);var o=t.duration;(i>this._msDuration&&i>o||o===1/0||isNaN(o))&&(It.b.log("Updating mediasource duration to "+i.toFixed(3)),this._msDuration=e.duration=i)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var i in n)e+=n[i].buffered.length}catch(t){It.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(Lt.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,n=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void It.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=i.type,o=e[r];o?o.updating?n.unshift(i):(o.ended=!1,this.parent=i.parent,o.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){It.b.error("error while trying to append buffer:"+e.message),n.unshift(i);var s={type:Ot.b.MEDIA_ERROR,parent:i.parent};if(22===e.code)return this.segments=[],s.details=Ot.a.BUFFER_FULL_ERROR,s.fatal=!1,void t.trigger(Lt.a.ERROR,s);if(this.appendError?this.appendError++:this.appendError=1,s.details=Ot.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry)return It.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],s.fatal=!0,void t.trigger(Lt.a.ERROR,s);s.fatal=!1,t.trigger(Lt.a.ERROR,s)}}}},e.prototype.flushBuffer=function(t,e,n){var i,r,o,s,a,u,c=this.sourceBuffer;if(Object.keys(c).length){if(It.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var f in c)if(!n||f===n){if(i=c[f],i.ended=!1,i.updating)return It.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(o=i.buffered.start(r),s=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(a=t,u=e):(a=Math.max(o,t),u=Math.min(s,e)),Math.min(u,s)-a>.5)return this.flushBufferCounter++,It.b.log("flush "+f+" ["+a+","+u+"], of ["+o+","+s+"], pos:"+this.media.currentTime),i.remove(a,u),!1}catch(t){It.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else It.b.warn("abort flushing too many retries");It.b.log("buffer flushed")}return!0},e}(Pt),Oe=Le,Ie=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Ce=function(t){function e(n){return V(this,e),X(this,t.call(this,n,Lt.a.FPS_DROP_LEVEL_CAPPING,Lt.a.MEDIA_ATTACHING,Lt.a.MANIFEST_PARSED))}return K(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var n=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,r){return e.isLevelAllowed(r,n.restrictedLevels)&&r<=t});return e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var i=t.length-1,r=0;r<t.length;r+=1){var o=t[r];if((o.width>=e||o.height>=n)&&function(t,e){return!e||(t.width!==e.width||t.height!==e.height)}(o,t[r+1])){i=r;break}}return i},Ie(e,[{key:"mediaWidth",get:function(){var t=void 0,n=this.media;return n&&(t=n.width||n.clientWidth||n.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,n=this.media;return n&&(t=n.height||n.clientHeight||n.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(Pt),De=Ce,Pe=function(t){function e(n){return W(this,e),Y(this,t.call(this,n,Lt.a.MEDIA_ATTACHING))}return q(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){"function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}},e.prototype.checkFPS=function(t,e,n){var i=performance.now();if(e){if(this.lastTime){var r=i-this.lastTime,o=n-this.lastDroppedFrames,s=e-this.lastDecodedFrames,a=1e3*o/r,u=this.hls;if(u.trigger(Lt.a.FPS_DROP,{currentDropped:o,currentDecoded:s,totalDroppedFrames:n}),a>0&&o>u.config.fpsDroppedMonitoringThreshold*s){var c=u.currentLevel;It.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(Lt.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(Pt),Me=Pe,Ne=function(){function t(e){z(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(n){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,i=this.stats,r=this.context,o=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var s=e.status;if(s>=200&&s<300){i.tload=Math.max(i.tfirst,performance.now());var a=void 0,u=void 0;"arraybuffer"===r.responseType?(a=e.response,u=a.byteLength):(a=e.responseText,u=a.length),i.loaded=i.total=u;var c={url:e.responseURL,data:a};this.callbacks.onSuccess(c,i,r,e)}else i.retry>=o.maxRetry||s>=400&&s<499?(It.b.error(s+" while loading "+r.url),this.callbacks.onError({code:s,text:e.statusText},r,e)):(It.b.warn(s+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},t.prototype.loadtimeout=function(){It.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,e)},t}(),xe=Ne,ke=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Ue=function(t){function e(n){Q(this,e);var i=$(this,t.call(this,n,Lt.a.MANIFEST_LOADING,Lt.a.MANIFEST_LOADED,Lt.a.AUDIO_TRACK_LOADED,Lt.a.ERROR));return i.ticks=0,i.ontick=i.tick.bind(i),i}return Z(e,t),e.prototype.destroy=function(){this.cleanTimer(),Pt.prototype.destroy.call(this)},e.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){this.updateTrack(this.trackId)},e.prototype.onError=function(t){t.fatal&&t.type===Ot.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,n=t.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(Lt.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(t){if(t.default&&!i)return e.audioTrack=r,void(i=!0);r++}),!1===i&&n.length&&(It.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},e.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(It.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},e.prototype.setAudioTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,It.b.log("switching to audioTrack "+t);var e=this.tracks[t],n=this.hls,i=e.type,r=e.url,o={id:t,type:i,url:r};n.trigger(Lt.a.AUDIO_TRACK_SWITCH,o),n.trigger(Lt.a.AUDIO_TRACK_SWITCHING,o);var s=e.details;!r||void 0!==s&&!0!==s.live||(It.b.log("(re)loading playlist for audioTrack "+t),n.trigger(Lt.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},e.prototype.updateTrack=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,It.b.log("updating audioTrack "+t);var e=this.tracks[t],n=e.url,i=e.details;!n||void 0!==i&&!0!==i.live||(It.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(Lt.a.AUDIO_TRACK_LOADING,{url:n,id:t}))}},ke(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(Pt),Fe=Ue,Be=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Ge={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},je=function(t){function e(n){J(this,e);var i=tt(this,t.call(this,n,Lt.a.MEDIA_ATTACHED,Lt.a.MEDIA_DETACHING,Lt.a.AUDIO_TRACKS_UPDATED,Lt.a.AUDIO_TRACK_SWITCHING,Lt.a.AUDIO_TRACK_LOADED,Lt.a.KEY_LOADED,Lt.a.FRAG_LOADED,Lt.a.FRAG_PARSING_INIT_SEGMENT,Lt.a.FRAG_PARSING_DATA,Lt.a.FRAG_PARSED,Lt.a.ERROR,Lt.a.BUFFER_CREATED,Lt.a.BUFFER_APPENDED,Lt.a.BUFFER_FLUSHED,Lt.a.INIT_PTS_FOUND));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state=Ge.STOPPED,i.ontick=i.tick.bind(i),i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}return et(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Pt.prototype.destroy.call(this),this.state=Ge.STOPPED},e.prototype.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,i=t.initPTS;"main"===e&&(this.initPTS[n]=i,this.videoTrackCC=n,It.b.log("InitPTS for cc:"+n+" found from video track:"+i),this.state===Ge.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,e>0&&-1===t?(It.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Ge.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=Ge.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=Ge.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Ge.STOPPED},e.prototype.tick=function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){var t,e,n,i=this.hls,r=i.config;switch(this.state){case Ge.ERROR:case Ge.PAUSED:case Ge.BUFFER_FLUSHING:break;case Ge.STARTING:this.state=Ge.WAITING_TRACK,this.loadedmetadata=!1;break;case Ge.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,a=te.bufferInfo(s,t,r.maxBufferHole),u=a.len,c=a.end,f=this.fragPrevious,h=r.maxMaxBufferLength,l=this.audioSwitch,d=this.trackId;if((u<h||l)&&d<o.length){if(void 0===(n=o[d].details)){this.state=Ge.WAITING_TRACK;break}if(!l&&!n.live&&f&&f.sn===n.endSN&&(!this.media.seeking||this.media.duration-c<f.duration/2)){this.hls.trigger(Lt.a.BUFFER_EOS,{type:"audio"}),this.state=Ge.ENDED;break}var p=n.fragments,v=p.length,g=p[0].start,y=p[v-1].start+p[v-1].duration,m=void 0;if(l)if(n.live&&!n.PTSKnown)It.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=t,n.PTSKnown&&t<g){if(!(a.end>g||a.nextStart))return;It.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=g+.05}if(n.initSegment&&!n.initSegment.data)m=n.initSegment;else if(c<=g){if(m=p[0],null!==this.videoTrackCC&&m.cc!==this.videoTrackCC&&(m=T(p,this.videoTrackCC)),n.live&&m.loadIdx&&m.loadIdx===this.fragLoadIdx){var E=a.nextStart?a.nextStart:g;return It.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var _=void 0,b=r.maxFragLookUpTolerance,w=f?p[f.sn-p[0].sn+1]:void 0,S=function(t){var e=Math.min(b,t.duration);return t.start+t.duration-e<=c?1:t.start-e>c&&t.start?-1:0};c<y?(c>y-b&&(b=0),_=w&&!S(w)?w:Zt.search(p,S)):_=p[v-1],_&&(m=_,g=_.start,f&&m.level===f.level&&m.sn===f.sn&&(m.sn<n.endSN?(m=p[m.sn+1-n.startSN],It.b.log("SN just loaded, load next one: "+m.sn)):m=null))}if(m)if(m.decryptdata&&null!=m.decryptdata.uri&&null==m.decryptdata.key)It.b.log("Loading key for "+m.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+d),this.state=Ge.KEY_LOADING,i.trigger(Lt.a.KEY_LOADING,{frag:m});else{if(It.b.log("Loading "+m.sn+", cc: "+m.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+d+", currentTime:"+t+",bufferEnd:"+c.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,m.loadCounter){m.loadCounter++;var A=r.fragLoadingLoopThreshold;if(m.loadCounter>A&&Math.abs(this.fragLoadIdx-m.loadIdx)<A)return void i.trigger(Lt.a.ERROR,{type:Ot.b.MEDIA_ERROR,details:Ot.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:m})}else m.loadCounter=1;m.loadIdx=this.fragLoadIdx,this.fragCurrent=m,this.startFragRequested=!0,isNaN(m.sn)||(this.nextLoadPosition=m.start+m.duration),i.trigger(Lt.a.FRAG_LOADING,{frag:m}),this.state=Ge.FRAG_LOADING}}break;case Ge.WAITING_TRACK:e=this.tracks[this.trackId],e&&e.details&&(this.state=Ge.IDLE);break;case Ge.FRAG_LOADING_WAITING_RETRY:var R=performance.now(),L=this.retryDate;s=this.media;var O=s&&s.seeking;(!L||R>=L||O)&&(It.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Ge.IDLE);break;case Ge.WAITING_INIT_PTS:var I=this.videoTrackCC;if(void 0===this.initPTS[I])break;var C=this.waitingFragment;if(C){var D=C.frag.cc;I!==D?(e=this.tracks[this.trackId],e.details&&e.details.live&&(It.b.warn("Waiting fragment CC ("+D+") does not match video track CC ("+I+")"),this.waitingFragment=null,this.state=Ge.IDLE)):(this.state=Ge.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Ge.IDLE;break;case Ge.STOPPED:case Ge.FRAG_LOADING:case Ge.PARSING:case Ge.PARSED:case Ge.ENDED:}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(It.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){this.state===Ge.ENDED&&(this.state=Ge.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onAudioTracksUpdated=function(t){It.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=Ge.PAUSED,this.waitingFragment=null,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=Ge.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,i=this.tracks[n],r=e.totalduration,o=0;if(It.b.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var s=i.details;s&&e.fragments.length>0?(E(s,e),o=e.fragments[0].start,e.PTSKnown?It.b.log("live audio playlist sliding:"+o.toFixed(3)):It.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,It.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(-1===this.startPosition){var a=e.startTimeOffset;isNaN(a)?this.startPosition=0:(It.b.log("start time offset found in playlist, adjust startPosition to "+a),this.startPosition=a)}this.nextLoadPosition=this.startPosition}this.state===Ge.WAITING_TRACK&&(this.state=Ge.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===Ge.KEY_LOADING&&(this.state=Ge.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===Ge.FRAG_LOADING&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var i=this.tracks[this.trackId],r=i.details,o=r.totalduration,s=e.level,a=e.sn,u=e.cc,c=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",f=this.stats=t.stats;if("initSegment"===a)this.state=Ge.IDLE,f.tparsed=f.tbuffered=performance.now(),r.initSegment.data=t.payload,this.hls.trigger(Lt.a.FRAG_BUFFERED,{stats:f,frag:e,id:"audio"}),this.tick();else{this.state=Ge.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new ae(this.hls,"audio"));var h=this.initPTS[u],l=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==h){this.pendingBuffering=!0,It.b.log("Demuxing "+a+" of ["+r.startSN+" ,"+r.endSN+"],track "+s);this.demuxer.push(t.payload,l,c,null,e,o,!1,h)}else It.b.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+a+" of ["+r.startSN+" ,"+r.endSN+"],track "+s),this.waitingFragment=t,this.state=Ge.WAITING_INIT_PTS}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ge.PARSING){var i=t.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(Lt.a.BUFFER_CODECS,i),It.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var s={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Lt.a.BUFFER_APPENDING,s))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===Ge.PARSING){var r=this.trackId,o=this.tracks[r],s=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),It.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),m(o.details,n,t.startPTS,t.endPTS);var a=this.audioSwitch,u=this.media,c=!1;if(a&&u)if(u.readyState){var f=u.currentTime;It.b.log("switching audio track : currentTime:"+f),f>=t.startPTS&&(It.b.log("switching audio track : flushing all audio"),this.state=Ge.BUFFER_FLUSHING,s.trigger(Lt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),c=!0,this.audioSwitch=!1,s.trigger(Lt.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,s.trigger(Lt.a.AUDIO_TRACK_SWITCHED,{id:r});var h=this.pendingData;this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&h.push({type:t.type,data:e,parent:"audio",content:"data"})}),!c&&h.length&&(h.forEach(function(t){e.state===Ge.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(Lt.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ge.PARSING&&(this.stats.tparsed=performance.now(),this.state=Ge.PARSED,this._checkAppendedParsed())},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==Ge.PARSING&&e!==Ge.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==Ge.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),n.trigger(Lt.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;It.b.log("audio buffered : "+ce.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(Lt.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Ge.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case Ot.a.FRAG_LOAD_ERROR:case Ot.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n,e.loadCounter=0;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);It.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=Ge.FRAG_LOADING_WAITING_RETRY}else It.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Ge.ERROR}break;case Ot.a.FRAG_LOOP_LOADING_ERROR:case Ot.a.AUDIO_TRACK_LOAD_ERROR:case Ot.a.AUDIO_TRACK_LOAD_TIMEOUT:case Ot.a.KEY_LOAD_ERROR:case Ot.a.KEY_LOAD_TIMEOUT:this.state!==Ge.ERROR&&(this.state=t.fatal?Ge.ERROR:Ge.IDLE,It.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case Ot.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===Ge.PARSING||this.state===Ge.PARSED)){var o=this.mediaBuffer,s=this.media.currentTime;if(o&&te.isBuffered(o,s)&&te.isBuffered(o,s+.5)){var a=this.config;a.maxMaxBufferLength>=a.maxBufferLength&&(a.maxMaxBufferLength/=2,It.b.warn("audio:reduce max buffer length to "+a.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*a.fragLoadingLoopThreshold),this.state=Ge.IDLE}else It.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Ge.BUFFER_FLUSHING,this.hls.trigger(Lt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(It.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(Lt.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Ge.PARSED):(this.state=Ge.IDLE,this.fragPrevious=null,this.tick())},Be(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,It.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(Pt),He=je,Ve=function(){function t(t){return"string"==typeof t&&(!!o[t.toLowerCase()]&&t.toLowerCase())}function e(t){return"string"==typeof t&&(!!s[t.toLowerCase()]&&t.toLowerCase())}function n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function i(i,o,s){var a=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),c={};u?a=document.createElement("custom"):c.enumerable=!0,a.hasBeenReset=!1;var f="",h=!1,l=i,d=o,p=s,v=null,g="",y=!0,m="auto",E="start",_=50,T="middle",b=50,w="middle";if(Object.defineProperty(a,"id",n({},c,{get:function(){return f},set:function(t){f=""+t}})),Object.defineProperty(a,"pauseOnExit",n({},c,{get:function(){return h},set:function(t){h=!!t}})),Object.defineProperty(a,"startTime",n({},c,{get:function(){return l},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",n({},c,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",n({},c,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",n({},c,{get:function(){return v},set:function(t){v=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",n({},c,{get:function(){return g},set:function(e){var n=t(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",n({},c,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",n({},c,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==r)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",n({},c,{get:function(){return E},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");E=n,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",n({},c,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",n({},c,{get:function(){return T},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");T=n,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",n({},c,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",n({},c,{get:function(){return w},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");w=n,this.hasBeenReset=!0}})),a.displayState=void 0,u)return a}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",o={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),Xe=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};rt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Ke=new Ve(0,0,0),We="middle"===Ke.align?"middle":"center";nt.prototype={parse:function(t){function e(){var t=n.buffer,e=0;for(t=at(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.substr(e),i}var n=this;t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;i=e();var r=i.match(/^(ÃƒÂ¯Ã‚Â»Ã‚Â¿)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=e(),n.state){case"HEADER":/:/.test(i)?function(t){ot(t,function(t,e){},/:/)}(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new Ve(0,0,""),n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{st(i,n.cue,n.regionList)}catch(t){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(t){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var Ye=nt,qe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ze=function(t){var e=t;return qe.hasOwnProperty(t)&&(e=qe[t]),String.fromCharCode(e)},Qe=15,$e=100,Ze={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Je={17:2,18:4,21:6,22:8,23:10,19:13,20:15},tn={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},en={25:2,26:4,29:6,30:8,31:10,27:13,28:15},nn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],rn={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseFilter[t];this.verboseLevel}},on=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},sn=function(){function t(e,n,i,r,o){ct(this,t),this.foreground=e||"white",this.underline=n||!1,this.italics=i||!1,this.background=r||"black",this.flash=o||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var i=e[n];t.hasOwnProperty(i)&&(this[i]=t[i])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),an=function(){function t(e,n,i,r,o,s){ct(this,t),this.uchar=e||" ",this.penState=new sn(n,i,r,o,s)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),un=function(){function t(){ct(this,t),this.chars=[];for(var e=0;e<$e;e++)this.chars.push(new an);this.pos=0,this.currPenState=new sn}return t.prototype.equals=function(t){for(var e=!0,n=0;n<$e;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<$e;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<$e;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(rn.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>$e&&(rn.log("ERROR","Too large cursor position "+this.pos),this.pos=$e)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=ze(t);if(this.pos>=$e)return void rn.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1)},t.prototype.clearFromPos=function(t){var e;for(e=t;e<$e;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,n=0;n<$e;n++){var i=this.chars[n].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),cn=function(){function t(){ct(this,t),this.rows=[];for(var e=0;e<Qe;e++)this.rows.push(new un);this.currRow=Qe-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<Qe;t++)this.rows[t].clear();this.currRow=Qe-1},t.prototype.equals=function(t){for(var e=!0,n=0;n<Qe;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<Qe;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<Qe;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){rn.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){rn.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<Qe;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[i].cueStartTime;if(o&&o<rn.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=e;var a=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,c=Math.max(u-1,0);a.setCursor(t.indent),t.color=a.chars[c].penState.foreground}var f={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(f)},t.prototype.setBkgData=function(t){rn.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void rn.log("DEBUG","roll_up but nrRollUpRows not set yet");rn.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),rn.log("INFO","Rolling up")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],n="",i=-1,r=0;r<Qe;r++){var o=this.rows[r].getTextString();o&&(i=r+1,t?e.push("Row "+i+": '"+o+"'"):e.push(o.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},t.prototype.getTextAndFormat=function(){return this.rows},t}(),fn=function(){function t(e,n){ct(this,t),this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new cn,this.nonDisplayedMemory=new cn,this.lastOutputScreen=new cn,this.currRollUpRow=this.displayedMemory.rows[Qe-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Qe-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,rn.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";rn.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(rn.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){rn.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){rn.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){rn.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){rn.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){rn.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){rn.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){rn.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){rn.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){rn.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},t.prototype.ccCR=function(){rn.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},t.prototype.ccENM=function(){rn.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(rn.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,rn.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},t.prototype.ccTO=function(t){rn.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=i[n]}rn.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=rn.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),hn=function(){function t(e,n,i){ct(this,t),this.field=e||1,this.outputs=[n,i],this.channels=[new fn(1,n),new fn(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var n,i,r,o=!1;this.lastTime=t,rn.setTime(t);for(var s=0;s<e.length;s+=2)if(i=127&e[s],r=127&e[s+1],0!==i||0!==r){if(rn.log("DATA","["+on([e[s],e[s+1]])+"] -> ("+on([i,r])+")"),n=this.parseCmd(i,r),n||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(o=this.parseChars(i,r)))if(this.currChNr&&this.currChNr>=0){var a=this.channels[this.currChNr-1];a.insertChars(o)}else rn.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,rn.log("WARNING","Couldn't parse cleaned data "+on([i,r])+" orig: "+on([e[s],e[s+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var n=null,i=(20===t||28===t)&&32<=e&&e<=47,r=(23===t||31===t)&&33<=e&&e<=35;if(!i&&!r)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,rn.log("DEBUG","Repeated command ("+on([t,e])+") is dropped"),!0;n=20===t||23===t?1:2;var o=this.channels[n-1];return 20===t||28===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},t.prototype.parseMidrow=function(t,e){var n=null;if((17===t||25===t)&&32<=e&&e<=47){if((n=17===t?1:2)!==this.currChNr)return rn.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].ccMIDROW(e),rn.log("DEBUG","MIDROW ("+on([t,e])+")"),!0}return!1},t.prototype.parsePAC=function(t,e){var n=null,i=null,r=(17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127,o=(16===t||24===t)&&64<=e&&e<=95;if(!r&&!o)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=t<=23?1:2,i=64<=e&&e<=95?1===n?Ze[t]:tn[t]:1===n?Je[t]:en[t];var s=this.interpretPAC(i,e);return this.channels[n-1].setPAC(s),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},t.prototype.interpretPAC=function(t,e){var n=e,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.prototype.parseChars=function(t,e){var n=null,i=null,r=null;if(t>=25?(n=2,r=t-8):(n=1,r=t),17<=r&&r<=19){var o=e;o=17===r?e+80:18===r?e+112:e+144,rn.log("INFO","Special char '"+ze(o)+"' in channel "+n),i=[o]}else 32<=t&&t<=127&&(i=0===e?[t]:[t,e]);if(i){var s=on(i);rn.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},t.prototype.parseBackgroundAttributes=function(t,e){var n,i,r,o,s=(16===t||24===t)&&32<=e&&e<=47,a=(23===t||31===t)&&45<=e&&e<=47;return!(!s&&!a)&&(n={},16===t||24===t?(i=Math.floor((e-32)/2),n.background=nn[i],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),r=t<24?1:2,o=this.channels[r-1],o.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),ln=hn,dn=function(t,e,n){return t.substr(n||0,e.length)===e},pn=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),r=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)?-1:(e+=1e3*n,e+=6e4*i,e+=36e5*r)},vn=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},gn=function(t,e,n){var i=t[e],r=t[i.prevCC];if(!r||!r.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)t.ccOffset+=i.start-r.start,i.new=!1,i=r,r=t[i.prevCC];t.presentationOffset=n},yn={parse:function(t,e,n,i,r,o){var s=/\r\n|\n\r|\n|\r/g,a=String.fromCharCode.apply(null,new Uint8Array(t)).trim().replace(s,"\n").split("\n"),u="00:00.000",c=0,f=0,h=0,l=[],d=void 0,p=!0,v=new Ye;v.oncue=function(t){var e=n[i],r=n.ccOffset;e&&e.new&&(void 0!==f?r=n.ccOffset=e.start:gn(n,i,h)),h&&(r=h+n.ccOffset-n.presentationOffset),t.startTime+=r-f,t.endTime+=r-f,t.id=vn(t.startTime)+vn(t.endTime)+vn(t.text),t.text=decodeURIComponent(escape(t.text)),t.endTime>0&&l.push(t)},v.onparsingerror=function(t){d=t},v.onflush=function(){if(d&&o)return void o(d);r(l)},a.forEach(function(t){if(p){if(dn(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach(function(t){dn(t,"LOCAL:")?u=t.substr(6):dn(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))});try{e=e<0?e+8589934592:e,c-=e,f=pn(u)/1e3,h=c/9e4,-1===f&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){d=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}v.parse(t+"\n")}),v.flush()}},mn=yn,En=function(t){function e(n){ft(this,e);var i=ht(this,t.call(this,n,Lt.a.MEDIA_ATTACHING,Lt.a.MEDIA_DETACHING,Lt.a.FRAG_PARSING_USERDATA,Lt.a.MANIFEST_LOADING,Lt.a.MANIFEST_LOADED,Lt.a.FRAG_LOADED,Lt.a.LEVEL_SWITCHING,Lt.a.INIT_PTS_FOUND));if(i.hls=n,i.config=n.config,i.enabled=!0,i.Cues=n.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.config.enableCEA708Captions){var r=i,o=function(t,e){var n=null;try{n=new window.Event("addtrack")}catch(t){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)},s={newCue:function(t,e,n){if(!r.textTrack1){var i=r.getExistingTrack("1");if(i)r.textTrack1=i,dt(r.textTrack1),o(r.textTrack1,r.media);else{var s=r.createTextTrack("captions",r.config.captionsTextTrack1Label,r.config.captionsTextTrack1LanguageCode);s&&(s.textTrack1=!0,r.textTrack1=s)}}r.addCues("textTrack1",t,e,n)}},a={newCue:function(t,e,n){if(!r.textTrack2){var i=r.getExistingTrack("2");if(i)r.textTrack2=i,dt(r.textTrack2),o(r.textTrack2,r.media);else{var s=r.createTextTrack("captions",r.config.captionsTextTrack2Label,r.config.captionsTextTrack1LanguageCode);s&&(s.textTrack2=!0,r.textTrack2=s)}}r.addCues("textTrack2",t,e,n)}};i.cea608Parser=new ln(0,s,a)}return i}return lt(e,t),e.prototype.addCues=function(t,e,n,i){for(var r=this.cueRanges,o=!1,s=r.length;s--;){var a=r[s],u=vt(a[0],a[1],e,n);if(u>=0&&(a[0]=Math.min(a[0],e),a[1]=Math.max(a[1],n),o=!0,u/(n-e)>.5))return}o||r.push([e,n]),this.Cues.newCue(this[t],e,n,i)},e.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var i=e.textTracks[n],r="textTrack"+t;if(!0===i[r])return i}return null},e.prototype.createTextTrack=function(t,e,n){var i=this.media;if(i)return i.addTextTrack(t,e,n)},e.prototype.destroy=function(){Pt.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media},e.prototype.onMediaDetaching=function(){dt(this.textTrack1),dt(this.textTrack2)},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)dt(e[n])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,i){var r=void 0;if(i<n.length){var o=n[i];pt(o,t)&&(r=o)}r||(r=e.createTextTrack("subtitles",t.name,t.lang)),r.mode=t.default?"showing":"hidden",e.textTracks.push(r)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,n=t.payload;if("main"===e.type){var i=e.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===e.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var s=this.textTracks,a=this.hls;mn.parse(n,this.initPTS,o,e.cc,function(t){var n=s[e.trackId];t.forEach(function(t){if(!n.cues.getCueById(t.id))try{n.addCue(t)}catch(i){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,n.addCue(e)}}),a.trigger(Lt.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){It.b.log("Failed to parse VTT cue: "+t),a.trigger(Lt.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})}else this.hls.trigger(Lt.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var n=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,n)}},e.prototype.extractCea608Data=function(t){for(var e,n,i,r,o,s=31&t[0],a=2,u=[],c=0;c<s;c++)e=t[a++],n=127&t[a++],i=127&t[a++],r=0!=(4&e),o=3&e,0===n&&0===i||r&&0===o&&(u.push(n),u.push(i));return u},e}(Pt),_n=En,Tn=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),bn=function(t){function e(n){gt(this,e);var i=yt(this,t.call(this,n,Lt.a.MEDIA_ATTACHED,Lt.a.MEDIA_DETACHING,Lt.a.MANIFEST_LOADING,Lt.a.MANIFEST_LOADED,Lt.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=void 0,i}return mt(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=Et(this.media.textTracks),n=0;n<e.length;n++)"showing"===e[n].mode&&(t=n);this.subtitleTrack=t}},e.prototype.destroy=function(){Pt.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,n=t.subtitles||[],i=!1;this.tracks=n,this.trackId=-1,this.hls.trigger(Lt.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(t){t.default&&(e.subtitleTrack=t.id,i=!0)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var n=e.details;void 0!==n&&!0!==n.live||(It.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(Lt.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(It.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},e.prototype.setSubtitleTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=t,It.b.log("switching to subtitle track "+t);var e=this.tracks[t];this.hls.trigger(Lt.a.SUBTITLE_TRACK_SWITCH,{id:t});var n=e.details;void 0!==n&&!0!==n.live||(It.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(Lt.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},Tn(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),e}(Pt),wn=bn,Sn=function(t){function e(n){_t(this,e);var i=Tt(this,t.call(this,n,Lt.a.ERROR,Lt.a.SUBTITLE_TRACKS_UPDATED,Lt.a.SUBTITLE_TRACK_SWITCH,Lt.a.SUBTITLE_TRACK_LOADED,Lt.a.SUBTITLE_FRAG_PROCESSED));return i.config=n.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.currentTrackId=-1,i}return bt(e,t),e.prototype.destroy=function(){Pt.prototype.destroy.call(this)},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(Lt.a.FRAG_LOADING,{frag:t})}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.nextFrag()},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;It.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.clearVttFragQueues()},e.prototype.onSubtitleTrackLoaded=function(t){var e=this.vttFragSNsProcessed[t.id],n=this.vttFragQueues[t.id],i=this.currentlyProcessing?this.currentlyProcessing.sn:-1,r=function(t){return e.indexOf(t.sn)>-1},o=function(t){return n.some(function(e){return e.sn===t.sn})};t.details.fragments.forEach(function(e){r(e)||e.sn===i||o(e)||(e.trackId=t.id,n.push(e))}),this.nextFrag()},e}(Pt),An=Sn,Rn={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:xe,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:Re,bufferController:Oe,capLevelController:De,fpsController:Me,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Rn.subtitleStreamController=An,Rn.subtitleTrackController=wn,Rn.timelineController=_n,Rn.cueHandler=St,Rn.enableCEA708Captions=!0,Rn.enableWebVTT=!0,Rn.captionsTextTrack1Label="English",Rn.captionsTextTrack1LanguageCode="en",Rn.captionsTextTrack2Label="Spanish",Rn.captionsTextTrack2LanguageCode="es",Rn.audioStreamController=He,Rn.audioTrackController=Fe;var Ln=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),On=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,t);var i=t.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(It.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var o=this.observer=new ie.a;o.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.emit.apply(o,[t,t].concat(n))},o.off=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.removeListener.apply(o,[t].concat(n))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var s=this.abrController=new n.abrController(this),a=new n.bufferController(this),u=new n.capLevelController(this),c=new n.fpsController(this),f=new Wt(this),h=new qt(this),l=new Qt(this),d=new Ee(this),p=this.levelController=new ge(this),v=this.streamController=new de(this),g=[p,v],y=n.audioStreamController;y&&g.push(new y(this)),this.networkControllers=g;var m=[f,h,l,s,a,u,c,d];if(y=n.audioTrackController){var E=new y(this);this.audioTrackController=E,m.push(E)}if(y=n.subtitleTrackController){var _=new y(this);this.subtitleTrackController=_,m.push(_)}[n.subtitleStreamController,n.timelineController].forEach(function(t){t&&m.push(new t(e))}),this.coreComponents=m}return t.isSupported=function(){var t=window.MediaSource=window.MediaSource||window.WebKitMediaSource,e=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return n&&i},Ln(t,null,[{key:"version",get:function(){return"0.8.2"}},{key:"Events",get:function(){return Lt.a}},{key:"ErrorTypes",get:function(){return Ot.b}},{key:"ErrorDetails",get:function(){return Ot.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Rn},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){It.b.log("destroy"),this.trigger(Lt.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){It.b.log("attachMedia"),this.media=t,this.trigger(Lt.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){It.b.log("detachMedia"),this.trigger(Lt.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=Rt.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),It.b.log("loadSource:"+t),this.url=t,this.trigger(Lt.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;It.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){It.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){It.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){It.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Ln(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){It.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){It.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){It.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){It.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){It.b.log("set startLevel:"+t);var e=this;-1!==t&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){It.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,n=t.config.minAutoBitrate,i=e?e.length:0,r=0;r<i;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>n)return r}return 0}},{key:"maxAutoLevel",get:function(){var t=this,e=t.levels,n=t.autoLevelCapping;return-1===n&&e&&e.length?e.length-1:n}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}}]),t}();e.default=On},function(t,e,n){function i(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t){var e=[],n=t.toString(),i=n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!i)return e;for(var o,s=i[1],a=new RegExp("(\\\\n|\\W)"+r(s)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");o=a.exec(n);)e.push(o[3]);return e}function s(t,e){for(var n=[e],i=[],r={};n.length;){var s=n.pop();if(!r[s]&&t[s]){r[s]=!0,i.push(s);var a=o(t[s]);n=n.concat(a)}}return i}t.exports=function(t,e){e=e||{};var r=n.m,o=e.all?Object.keys(r):s(r,t),a="("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.map(function(t){return JSON.stringify(t)+": "+r[t].toString()}).join(",")+"})(self);",u=new window.Blob([a],{type:"text/javascript"});if(e.bare)return u;var c=window.URL||window.webkitURL||window.mozURL||window.msURL,f=c.createObjectURL(u),h=new window.Worker(f);return h.objectURL=f,h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),r=n(1),o=n(0),s=n(4),a=n.n(s),u=function(t){var e=new a.a;e.trigger=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t,t].concat(i))},e.off=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.removeListener.apply(e,[t].concat(i))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",function(r){var s=r.data;switch(s.cmd){case"init":var a=JSON.parse(s.config);t.demuxer=new i.a(e,s.typeSupported,a,s.vendor);try{Object(o.a)(!0===a.debug)}catch(t){}n("init",null);break;case"demux":t.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}}),e.on(r.a.FRAG_DECRYPTED,n),e.on(r.a.FRAG_PARSING_INIT_SEGMENT,n),e.on(r.a.FRAG_PARSED,n),e.on(r.a.ERROR,n),e.on(r.a.FRAG_PARSING_METADATA,n),e.on(r.a.FRAG_PARSING_USERDATA,n),e.on(r.a.INIT_PTS_FOUND,n),e.on(r.a.FRAG_PARSING_DATA,function(e,n){var i=[],r={event:e,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),t.postMessage(r,i)})};e.default=u}]).default})},function(t,e,n){var i;!function(r,o){"use strict";var s="model",a="name",u="type",c="vendor",f="version",h="mobile",l="tablet",d={extend:function(t,e){var n={};for(var i in t)e[i]&&e[i].length%2==0?n[i]=e[i].concat(t[i]):n[i]=t[i];return n},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(t,e){for(var n,i,r,o,s,a,u=0;u<e.length&&!s;){var c=e[u],f=e[u+1];for(n=i=0;n<c.length&&!s;)if(s=c[n++].exec(t))for(r=0;r<f.length;r++)a=s[++i],o=f[r],"object"==typeof o&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;u+=2}},str:function(t,e){for(var n in e)if("object"==typeof e[n]&&e[n].length>0){for(var i=0;i<e[n].length;i++)if(d.has(e[n][i],t))return"?"===n?void 0:n}else if(d.has(e[n],t))return"?"===n?void 0:n;return t}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,f],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[a,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[a,f],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[a,"Puffin"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],f],[/(QQ)\/([\d\.]+)/i],[a,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[a,f],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[a,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[a,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[a,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,f],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[a,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,a],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[a,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[f,p.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,c,[u,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[c,"Apple"],[u,l]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,s,[u,l]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[s,[c,"Amazon"],[u,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[s,p.str,v.device.amazon.model],[c,"Amazon"],[u,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,c,[u,h]],[/\((ip[honed|\s\w*]+);/i],[s,[c,"Apple"],[u,h]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,s,[u,h]],[/\(bb10;\s(\w+)/i],[s,[c,"BlackBerry"],[u,h]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[c,"Asus"],[u,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[s,"Xperia Tablet"],[u,l]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[s,[c,"Sony"],[u,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,s,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,p.str,v.device.sprint.vendor],[s,p.str,v.device.sprint.model],[u,h]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,s,[u,l]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[c,[s,/_/g," "],[u,h]],[/(nexus\s9)/i],[s,[c,"HTC"],[u,l]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[s,[c,"Huawei"],[u,h]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,s,[u,h]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[c,"Microsoft"],[u,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[c,"Motorola"],[u,h]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[c,"Motorola"],[u,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,d.trim],[s,d.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[c,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[s,[c,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],s,[u,l]],[/smart-tv.+(samsung)/i],[c,[u,"smarttv"],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[c,"Samsung"],s,[u,h]],[/sie-(\w+)*/i],[s,[c,"Siemens"],[u,h]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[c,"Nokia"],s,[u,h]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[c,"Acer"],[u,l]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[c,"LG"],[u,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],s,[u,l]],[/(lg) netcast\.tv/i],[c,s,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[c,"LG"],[u,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[c,"Lenovo"],[u,l]],[/linux;.+((jolla));/i],[c,s,[u,h]],[/((pebble))app\/[\d\.]+\s/i],[c,s,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,s,[u,h]],[/crkey/i],[[s,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[s,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[s,[c,"Google"],[u,l]],[/android.+;\s(pixel xl|pixel)\s/i],[s,[c,"Google"],[u,h]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[s,/_/g," "],[c,"Xiaomi"],[u,h]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[s,/_/g," "],[c,"Xiaomi"],[u,l]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[c,"Meizu"],[u,l]],[/android.+a000(1)\s+build/i],[s,[c,"OnePlus"],[u,h]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[c,"RCA"],[u,l]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[s,[c,"Dell"],[u,l]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[c,"Verizon"],[u,l]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],s,[u,l]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[c,"NuVision"],[u,l]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[c,"ZTE"],s,[u,l]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[c,"Swiss"],[u,h]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[c,"Swiss"],[u,l]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[c,"Zeki"],[u,l]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[c,"Dragon Touch"],s,[u,l]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[s,[c,"Insignia"],[u,l]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[s,[c,"NextBook"],[u,l]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],s,[u,h]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[c,"LvTel"],s,[u,h]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[c,"Envizen"],[u,l]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[c,s,[u,l]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[c,"MachSpeed"],[u,l]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,s,[u,l]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[c,"Rotor"],[u,l]],[/android.+(KS(.+))\s+build/i],[s,[c,"Amazon"],[u,l]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[c,s,[u,l]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,d.lowerize],c,s],[/(android.+)[;\/].+build/i],[s,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,f],[/rv\:([\w\.]+).*(gecko)/i],[f,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[f,p.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[f,p.str,v.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[a,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],f],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,f],[/(haiku)\s(\w+)/i],[a,f],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[a,f]]},y=function(t,e){if("object"==typeof t&&(e=t,t=void 0),!(this instanceof y))return new y(t,e).getResult();var n=t||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=e?d.extend(g,e):g;return this.getBrowser=function(){var t={name:void 0,version:void 0};return p.rgx.call(t,n,i.browser),t.major=d.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return p.rgx.call(t,n,i.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(t,n,i.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return p.rgx.call(t,n,i.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return p.rgx.call(t,n,i.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=t,this},this};y.VERSION="0.7.17",y.BROWSER={NAME:a,MAJOR:"major",VERSION:f},y.CPU={ARCHITECTURE:"architecture"},y.DEVICE={MODEL:s,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:h,SMARTTV:"smarttv",TABLET:l,WEARABLE:"wearable",EMBEDDED:"embedded"},y.ENGINE={NAME:a,VERSION:f},y.OS={NAME:a,VERSION:f},void 0!==e?(void 0!==t&&t.exports&&(e=t.exports=y),e.UAParser=y):n(62)?void 0!==(i=function(){return y}.call(e,n,e,t))&&(t.exports=i):r&&(r.UAParser=y);var m=r&&(r.jQuery||r.Zepto);if(void 0!==m){var E=new y;m.ua=E.getResult(),m.ua.get=function(){return E.getUA()},m.ua.set=function(t){E.setUA(t);var e=E.getResult();for(var n in e)m.ua[n]=e[n]}}}("object"==typeof window?window:this)},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function r(t,e){var n=P(t)||p(t)?i(t.length,String):[],r=n.length,o=!!r;for(var s in t)!e&&!O.call(t,s)||o&&("length"==s||c(s,r))||n.push(s);return n}function o(t,e,n){var i=t[e];O.call(t,e)&&d(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function s(t){if(!E(t))return l(t);var e=h(t),n=[];for(var i in t)("constructor"!=i||!e&&O.call(t,i))&&n.push(i);return n}function a(t,e){return e=D(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=D(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=s,n(t,this,a)}}function u(t,e,n,i){n||(n={});for(var r=-1,s=e.length;++r<s;){var a=e[r],u=i?i(n[a],t[a],a,n,t):void 0;o(n,a,void 0===u?t[a]:u)}return n}function c(t,e){return!!(e=null==e?b:e)&&("number"==typeof t||R.test(t))&&t>-1&&t%1==0&&t<e}function f(t,e,n){if(!E(n))return!1;var i=typeof e;return!!("number"==i?v(n)&&c(e,n.length):"string"==i&&e in n)&&d(n[e],t)}function h(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||L)}function l(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function d(t,e){return t===e||t!==t&&e!==e}function p(t){return g(t)&&O.call(t,"callee")&&(!C.call(t,"callee")||I.call(t)==w)}function v(t){return null!=t&&m(t.length)&&!y(t)}function g(t){return _(t)&&v(t)}function y(t){var e=E(t)?I.call(t):"";return e==S||e==A}function m(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=b}function E(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return!!t&&"object"==typeof t}function T(t){return v(t)?r(t,!0):s(t)}var b=9007199254740991,w="[object Arguments]",S="[object Function]",A="[object GeneratorFunction]",R=/^(?:0|[1-9]\d*)$/,L=Object.prototype,O=L.hasOwnProperty,I=L.toString,C=L.propertyIsEnumerable,D=Math.max,P=Array.isArray,M=function(t){return a(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&f(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e})}(function(t,e,n,i){u(e,T(e),t,i)});t.exports=M},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function r(t,e){var n=M(t)||v(t)?i(t.length,String):[],r=n.length,o=!!r;for(var s in t)!e&&!I.call(t,s)||o&&("length"==s||f(s,r))||n.push(s);return n}function o(t,e,n,i){return void 0===t||p(t,O[n])&&!I.call(i,n)?e:t}function s(t,e,n){var i=t[e];I.call(t,e)&&p(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function a(t){if(!_(t))return d(t);var e=l(t),n=[];for(var i in t)("constructor"!=i||!e&&I.call(t,i))&&n.push(i);return n}function u(t,e){return e=P(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=P(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=s,n(t,this,a)}}function c(t,e,n,i){n||(n={});for(var r=-1,o=e.length;++r<o;){var a=e[r],u=i?i(n[a],t[a],a,n,t):void 0;s(n,a,void 0===u?t[a]:u)}return n}function f(t,e){return!!(e=null==e?w:e)&&("number"==typeof t||L.test(t))&&t>-1&&t%1==0&&t<e}function h(t,e,n){if(!_(n))return!1;var i=typeof e;return!!("number"==i?g(n)&&f(e,n.length):"string"==i&&e in n)&&p(n[e],t)}function l(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||O)}function d(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function p(t,e){return t===e||t!==t&&e!==e}function v(t){return y(t)&&I.call(t,"callee")&&(!D.call(t,"callee")||C.call(t)==S)}function g(t){return null!=t&&E(t.length)&&!m(t)}function y(t){return T(t)&&g(t)}function m(t){var e=_(t)?C.call(t):"";return e==A||e==R}function E(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=w}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function T(t){return!!t&&"object"==typeof t}function b(t){return g(t)?r(t,!0):a(t)}var w=9007199254740991,S="[object Arguments]",A="[object Function]",R="[object GeneratorFunction]",L=/^(?:0|[1-9]\d*)$/,O=Object.prototype,I=O.hasOwnProperty,C=O.toString,D=O.propertyIsEnumerable,P=Math.max,M=Array.isArray,N=function(t){return u(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&h(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e})}(function(t,e,n,i){c(e,b(e),t,i)}),x=u(function(t){return t.push(void 0,o),n(N,void 0,t)});t.exports=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(2),a=i(s),u=n(66),c=i(u),f=function(){function t(e,n){(0,o.default)(this,t),new c.default(e,n)}return(0,a.default)(t,[{key:"version",get:function(){return t.version}}],[{key:"version",get:function(){return"5.0.1"}}]),t}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),o=i(r),s=n(1),a=i(s),u=n(2),c=i(u),f=n(52),h=i(f),l=n(89),d=i(l),p=n(109),v=i(p),g=n(122),y=i(g),m=function(){function t(e,n){if((0,a.default)(this,t),!e||"object"!==(void 0===e?"undefined":(0,o.default)(e)))throw new Error("p2pConfig must be a valid config object");this.p2pConfig=e;var i=new d.default(n);this.streamrooter=new h.default(e.streamrootKey,i,{wrapperVersion:"5.0.1"}),n.media&&this.streamrooter.attachMediaElement(n.media),n.config.pLoader=(0,v.default)(this.streamrooter,n),n.config.fLoader=(0,y.default)(this.streamrooter,n),n.media||n.on(n.constructor.Events.MEDIA_ATTACHING,this._onMediaAttaching.bind(this)),n.on(n.constructor.Events.DESTROYING,this._onDestroy.bind(this)),this._overrideLoadSource(n),this._overrideABRController(n)}return(0,c.default)(t,[{key:"_overrideLoadSource",value:function(t){var e=this,n=t.loadSource,i=function(i){e.streamrooter.load(i,e.streamrooter.constructor.StreamTypes.HLS,e.p2pconfig),n.apply(t,arguments)};t.loadSource=i}},{key:"_overrideABRController",value:function(t){var e=void 0,n=void 0;if(t.abrController._findBestLevel)n=t.abrController._findBestLevel,e=!0;else{if(!t.abrController.findBestLevel)return;n=t.abrController.findBestLevel,e=!1}var i=this,r=function(){var e=n.apply(t.abrController,arguments),r=t.currentLevel;return i.streamrooter&&i.streamrooter.abr.nextSegmentPrebuffered.video&&e<r&&(e=r),e};e?t.abrController._findBestLevel=r:t.abrController.findBestLevel=r}},{key:"_onMediaAttaching",value:function(t,e){this.streamrooter.attachMediaElement(e.media)}},{key:"_onMediaDetaching",value:function(){this.streamrooter.detachMediaElement()}},{key:"_onDestroy",value:function(){this.streamrooter.stop()}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){t.exports={default:n(68),__esModule:!0}},function(t,e,n){n(42),n(48),t.exports=n(33).f("iterator")},function(t,e,n){var i=n(24),r=n(25);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var i=n(27),r=n(15),o=n(32),s={};n(10)(s,n(5)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(7),r=n(11),o=n(17);t.exports=n(8)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var i=n(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(4),r=n(74),o=n(75);t.exports=function(t){return function(e,n,s){var a,u=i(e),c=r(u.length),f=o(s,c);if(t&&n!=n){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var i=n(24),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(24),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(3).document;t.exports=i&&i.documentElement},function(t,e,n){"use strict";var i=n(78),r=n(79),o=n(16),s=n(4);t.exports=n(43)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(81),__esModule:!0}},function(t,e,n){n(82),n(86),n(87),n(88),t.exports=n(0).Symbol},function(t,e,n){"use strict";var i=n(3),r=n(9),o=n(8),s=n(6),a=n(44),u=n(83).KEY,c=n(13),f=n(30),h=n(32),l=n(18),d=n(5),p=n(33),v=n(34),g=n(84),y=n(85),m=n(11),E=n(4),_=n(22),T=n(15),b=n(27),w=n(50),S=n(35),A=n(7),R=n(17),L=S.f,O=A.f,I=w.f,C=i.Symbol,D=i.JSON,P=D&&D.stringify,M=d("_hidden"),N=d("toPrimitive"),x={}.propertyIsEnumerable,k=f("symbol-registry"),U=f("symbols"),F=f("op-symbols"),B=Object.prototype,G="function"==typeof C,j=i.QObject,H=!j||!j.prototype||!j.prototype.findChild,V=o&&c(function(){return 7!=b(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=L(B,e);i&&delete B[e],O(t,e,n),i&&t!==B&&O(B,e,i)}:O,X=function(t){var e=U[t]=b(C.prototype);return e._k=t,e},K=G&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},W=function(t,e,n){return t===B&&W(F,e,n),m(t),e=_(e,!0),m(n),r(U,e)?(n.enumerable?(r(t,M)&&t[M][e]&&(t[M][e]=!1),n=b(n,{enumerable:T(0,!1)})):(r(t,M)||O(t,M,T(1,{})),t[M][e]=!0),V(t,e,n)):O(t,e,n)},Y=function(t,e){m(t);for(var n,i=g(e=E(e)),r=0,o=i.length;o>r;)W(t,n=i[r++],e[n]);return t},q=function(t,e){return void 0===e?b(t):Y(b(t),e)},z=function(t){var e=x.call(this,t=_(t,!0));return!(this===B&&r(U,t)&&!r(F,t))&&(!(e||!r(this,t)||!r(U,t)||r(this,M)&&this[M][t])||e)},Q=function(t,e){if(t=E(t),e=_(e,!0),t!==B||!r(U,e)||r(F,e)){var n=L(t,e);return!n||!r(U,e)||r(t,M)&&t[M][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=I(E(t)),i=[],o=0;n.length>o;)r(U,e=n[o++])||e==M||e==u||i.push(e);return i},Z=function(t){for(var e,n=t===B,i=I(n?F:E(t)),o=[],s=0;i.length>s;)!r(U,e=i[s++])||n&&!r(B,e)||o.push(U[e]);return o};G||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=l(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(F,n),r(this,M)&&r(this[M],t)&&(this[M][t]=!1),V(this,t,T(1,n))};return o&&H&&V(B,t,{configurable:!0,set:e}),X(t)},a(C.prototype,"toString",function(){return this._k}),S.f=Q,A.f=W,n(51).f=w.f=$,n(19).f=z,n(49).f=Z,o&&!n(26)&&a(B,"propertyIsEnumerable",z,!0),p.f=function(t){return X(d(t))}),s(s.G+s.W+s.F*!G,{Symbol:C});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;J.length>tt;)d(J[tt++]);for(var et=R(d.store),nt=0;et.length>nt;)v(et[nt++]);s(s.S+s.F*!G,"Symbol",{for:function(t){return r(k,t+="")?k[t]:k[t]=C(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in k)if(k[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!G,"Object",{create:q,defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:Z}),D&&s(s.S+s.F*(!G||c(function(){var t=C();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!K(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!K(e))return e}),i[1]=e,P.apply(D,i)}}}),C.prototype[N]||n(10)(C.prototype,N,C.prototype.valueOf),h(C,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,n){var i=n(18)("meta"),r=n(12),o=n(9),s=n(7).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(13)(function(){return u(Object.preventExtensions({}))}),f=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[i].i},l=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[i].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,i)&&f(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:l,onFreeze:d}},function(t,e,n){var i=n(17),r=n(49),o=n(19);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},function(t,e,n){var i=n(28);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e){},function(t,e,n){n(34)("asyncIterator")},function(t,e,n){n(34)("observable")},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(90),o=i(r),s=n(14),a=i(s),u=n(1),c=i(u),f=n(2),h=i(f),l=n(20),d=i(l),p=n(96),v=i(p),g=n(21),y=i(g),m=n(52),E=i(m),_=n(107),T=i(_),b=n(108),w=i(b),S=function(t){function e(t){(0,c.default)(this,e);var n=(0,d.default)(this,(e.__proto__||(0,a.default)(e)).call(this));n.hlsjs=t,n.hlsjs.on(t.constructor.Events.ERROR,function(t,e){var i=e.type+" - "+e.details;e.fatal&&n.emit(E.default.Events.PLAYBACK_ERROR,i)});var i=t.constructor.Events.LEVEL_SWITCH||t.constructor.Events.LEVEL_SWITCHING;if(void 0===i)throw new Error("Cannot find neither LEVEL_SWITCH nor LEVEL_SWITCHING hls.js event.");n.hlsjs.on(i,function(t,e){var i=n.hlsjs.levels[e.level],r=i.url,o=i.urlId;n.emit(E.default.Events.TRACK_SWITCH,new w.default(r[o]))});var r=t.constructor.Events.FRAG_LOAD_EMERGENCY_ABORTED;if(void 0===r)throw new Error("Cannot find FRAG_LOAD_EMERGENCY_ABORTED hls.js event.");return n.hlsjs.on(r,function(){n.emit(E.default.Events.EMERGENCY_TRACK_SWITCH)}),n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"on",value:function(t,n){(0,o.default)(E.default.Events).indexOf(t)>-1&&(0,v.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"on",this).call(this,t,n)}},{key:"removeListener",value:function(t,n){(0,o.default)(E.default.Events).indexOf(t)>-1&&(0,v.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"removeListener",this).call(this,t,n)}},{key:"getBufferTarget",value:function(){return this.hlsjs.config.maxBufferLength}},{key:"setBufferTarget",value:function(t){this.hlsjs.config.maxBufferSize=0,this.hlsjs.config.maxBufferLength=t}},{key:"getPlayerInfo",value:function(){return{bufferBasedABR:!1}}},{key:"getLatency",value:function(){return null}},{key:"getMediaEngineName",value:function(){return"hls.js"}},{key:"getMediaEngineVersion",value:function(){return this.hlsjs.constructor.version}}]),e}(T.default);e.default=S,t.exports=e.default},function(t,e,n){t.exports={default:n(91),__esModule:!0}},function(t,e,n){n(92),t.exports=n(0).Object.values},function(t,e,n){var i=n(6),r=n(93)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(17),r=n(4),o=n(19).f;t.exports=function(t){return function(e){for(var n,s=r(e),a=i(s),u=a.length,c=0,f=[];u>c;)o.call(s,n=a[c++])&&f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){n(95),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var i=n(47),r=n(46);n(36)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(14),o=i(r),s=n(97),a=i(s);e.default=function t(e,n,i){null===e&&(e=Function.prototype);var r=(0,a.default)(e,n);if(void 0===r){var s=(0,o.default)(e);return null===s?void 0:t(s,n,i)}if("value"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(i)}},function(t,e,n){t.exports={default:n(98),__esModule:!0}},function(t,e,n){n(99);var i=n(0).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var i=n(4),r=n(35).f;n(36)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){t.exports={default:n(101),__esModule:!0}},function(t,e,n){n(102),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(103).set})},function(t,e,n){var i=n(12),r=n(11),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(39)(Function.call,n(35).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(105),__esModule:!0}},function(t,e,n){n(106);var i=n(0).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){var i=n(6);i(i.S,"Object",{create:n(27)})},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=function t(e){(0,r.default)(this,t),this.levelUrl=e};e.default=o,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),o=i(r),s=n(1),a=i(s),u=n(2),c=i(u),f=n(20),h=i(f),l=n(21),d=i(l),p=n(53),v=i(p),g=function(t,e){var n=(0,v.default)(t,e);return function(e){function n(){return(0,a.default)(this,n),(0,h.default)(this,(n.__proto__||(0,o.default)(n)).apply(this,arguments))}return(0,d.default)(n,e),(0,c.default)(n,[{key:"_contentType",get:function(){return t.constructor.ContentTypes.MANIFEST}}]),n}(n)};e.default=g,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),s=n(2),a=i(s),u=function(){function t(e){(0,o.default)(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return(0,a.default)(t,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var t,e=this.context;t=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(n){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()}},{key:"readystatechange",value:function(t){var e=t.currentTarget,n=e.readyState,i=this.stats,r=this.context,o=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var s=e.status;if(s>=200&&s<300){i.tload=Math.max(i.tfirst,performance.now());var a=void 0,u=void 0;"arraybuffer"===r.responseType?(a=e.response,u=a.byteLength):(a=e.responseText,u=a.length),i.loaded=i.total=u;var c={url:e.responseURL,data:a};this.callbacks.onSuccess(c,i,r,e)}else i.retry>=o.maxRetry||s>=400&&s<499?this.callbacks.onError({code:s,text:e.statusText},r,e):(this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},{key:"loadtimeout",value:function(){this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,e)}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){t.exports={default:n(112),__esModule:!0}},function(t,e,n){n(113);var i=n(0).Object;t.exports=function(t){return i.getOwnPropertyNames(t)}},function(t,e,n){n(36)("getOwnPropertyNames",function(){return n(50).f})},function(t,e,n){t.exports={default:n(115),__esModule:!0}},function(t,e,n){n(48),n(42),t.exports=n(116)},function(t,e,n){var i=n(11),r=n(117);t.exports=n(0).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){var i=n(118),r=n(5)("iterator"),o=n(16);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(28),r=n(5)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){"use strict";function i(){var t=window||t;t.XMLHttpRequest=s}var r=n(55),o=n(37),s=n(120);t.exports={BaseXHR:r,XMLHttpRequest:s,useGlobal:i,objectMirrors:o}},function(t,e,n){var i=n(55),r=n(121),o=n(37),s=window.XMLHttpRequest,a=function(){var t,e,n,a,u,c,f,h,l,d,p,v=new s,g=new r,y=0,m=[],E=!1;v.onloadend=function(t){p=t,n&&4===v.readyState&&n(t)},v.onreadystatechange=function(i){function r(e){t&&t(e)}switch(v.readyState){case 0:r(i);break;case 1:a=Date.now(),r(i);break;case 2:u=Date.now(),r(i);break;case 3:c=Date.now(),r(i);break;case 4:var o=0,s=0;f=Date.now();var _=f-a;if(_<g.minLatency&&(o=g.minLatency-_),l>g.maxBandwidth&&(s=l/g.maxBandwidth*_-_),o||s){setTimeout(function(){y!==h||E||(clearTimeout(d),e(m[m.length-1])),r(i),p&&n&&n(p)},Math.max(o,s));break}r(i)}},v.onprogress=function(t){function n(t){y===h&&(E=!0),e&&e(t)}var i,r=Date.now(),o=r-a;if(y=t.loaded,h=t.total,(l=8*y/o)>g.maxBandwidth)return i=l/g.maxBandwidth*o-o,m.push(t),void(d=setTimeout(function(){n(t)},i));n(t)};var _=new i(v);return o.mirrorRwProp(_,v,"onreadystatechange",function(e){return t=e,{override:!0}}),o.mirrorRwProp(_,v,"onprogress",function(t){return e=t,{override:!0}}),o.mirrorRwProp(_,v,"onloadend",function(t){return n=t,{override:!0}}),_.shaper=g,_};a.Shaper=r,t.exports=a},function(t,e){var n=function(){var t=1/0,e=0,i=0,r=0;Object.defineProperty(this,"maxBandwidth",{get:function(){return Math.min(t,n.maxBandwidth)},set:function(e){t=e}}),Object.defineProperty(this,"minLatency",{get:function(){return Math.max(e,n.minLatency)},set:function(t){e=t}}),Object.defineProperty(this,"minProgressEvents",{get:function(){return Math.max(i,n.minProgressEvents)},set:function(t){i=t}}),Object.defineProperty(this,"randomness",{get:function(){return Math.max(r,n.randomness)},set:function(t){r=t}})};n.maxBandwidth=1/0,n.minLatency=0,n.minProgressEvents=0,n.randomness=0,t.exports=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),o=i(r),s=n(1),a=i(s),u=n(2),c=i(u),f=n(20),h=i(f),l=n(21),d=i(l),p=n(53),v=i(p),g=function(t,e){var n=(0,v.default)(t,e);return function(e){function n(){return(0,a.default)(this,n),(0,h.default)(this,(n.__proto__||(0,o.default)(n)).apply(this,arguments))}return(0,d.default)(n,e),(0,c.default)(n,[{key:"_modifyRequestTiming",value:function(t){this.stats.trequest=this.stats.tload-t.timeElapsed,this.stats.tfirst=this.stats.trequest+t.latency}},{key:"_contentType",get:function(){return"main"===this.context.frag.type?t.constructor.ContentTypes.MEDIA_SEGMENT:t.constructor.ContentTypes.OTHER}}]),n}(n)};e.default=g,t.exports=e.default}])});

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var require;var require;(function(f){if(true){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.VideoEventPolyfill=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={WAITING:"polyfillWaiting",PLAYING:"polyfillPlaying",ENDED:"polyfillEnded"};module.exports=exports["default"]},{}],2:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _events=_dereq_("events");var _events2=_interopRequireDefault(_events);var _eventStruct=_dereq_("./eventStruct");var _eventStruct2=_interopRequireDefault(_eventStruct);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VideoEventPolyfill=function(_EventEmitter){_inherits(VideoEventPolyfill,_EventEmitter);_createClass(VideoEventPolyfill,null,[{key:"Events",get:function get(){return _eventStruct2.default}}]);function VideoEventPolyfill(video){_classCallCheck(this,VideoEventPolyfill);var _this=_possibleConstructorReturn(this,(VideoEventPolyfill.__proto__||Object.getPrototypeOf(VideoEventPolyfill)).call(this));_this.video=video;_this.IDLE=0;_this.BUFFERING=1;_this.PLAYING=2;_this.TOLERANCE=.1;_this.state=_this.IDLE;_this.onPl=_this.onPlay.bind(_this);_this.onPling=_this.onPlaying.bind(_this);if(_this.video.paused){_this.start()}else{_this.onPlay()}return _this}_createClass(VideoEventPolyfill,[{key:"start",value:function start(){this.video.addEventListener("play",this.onPl)}},{key:"onPlay",value:function onPlay(){this.state=this.BUFFERING;this.emit(_eventStruct2.default.WAITING);this.tickInterval=setInterval(this.tick.bind(this),200);this.video.removeEventListener("play",this.onPl)}},{key:"onPlaying",value:function onPlaying(){this.emit(_eventStruct2.default.PLAYING);this.video.removeEventListener("playing",this.onPling)}},{key:"onEnded",value:function onEnded(){clearInterval(this.tickInterval);this.state=this.IDLE;this.emit(_eventStruct2.default.ENDED);if(this.video){this.video.addEventListener("play",this.onPl)}}},{key:"getBufferLength",value:function getBufferLength(){for(var i=0;i<this.video.buffered.length;i++){if(this.video.buffered.start(i)<=this.video.currentTime&&this.video.currentTime<=this.video.buffered.end(i)){return this.video.buffered.end(i)-this.video.currentTime}}return 0}},{key:"tick",value:function tick(){if(this.isLive!==undefined&&!this.isLive){if(this.video.duration&&(this.video.duration-this.video.currentTime<.5&&this.video.currentTime-this.lastCurrentTime<.01||this.video.duration-this.video.currentTime<1&&this.video.currentTime-this.lastCurrentTime<.01&&!this.video.paused&&this.video.playbackRate>0||this.video.currentTime>0&&isNaN(this.video.duration))){this.onEnded();return}else{this.lastCurrentTime=this.video.currentTime}}var bufferLength=this.getBufferLength();switch(this.state){case this.BUFFERING:if(bufferLength>this.TOLERANCE){this.state=this.PLAYING;if(!this.video.paused){this.emit(_eventStruct2.default.PLAYING)}else{this.video.addEventListener("playing",this.onPling)}}break;case this.PLAYING:if(bufferLength<this.TOLERANCE){this.state=this.BUFFERING;if(!this.video.paused){this.emit(_eventStruct2.default.WAITING)}}else if(this.video.paused){this.video.addEventListener("playing",this.onPling)}break;case this.IDLE:default:return}}},{key:"setLive",value:function setLive(isLive){this.isLive=isLive}},{key:"dispose",value:function dispose(){clearInterval(this.tickInterval);if(this.video){this.video.removeEventListener("play",this.onPl);this.video.removeEventListener("playing",this.onPling);delete this.video}this.removeAllListeners()}}]);return VideoEventPolyfill}(_events2.default);exports.default=VideoEventPolyfill;module.exports=exports["default"]},{"./eventStruct":1,events:3}],3:[function(_dereq_,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}]},{},[2])(2)});


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function levelLabel(e){return e.height?e.height+"p":e.width?Math.round(9*e.width/16)+"p":e.bitrate?e.bitrate/1e3+"kbps":0}var _streamrootHlsjsP2pBundle=__webpack_require__(0),_streamrootHlsjsP2pBundle2=_interopRequireDefault(_streamrootHlsjsP2pBundle),_streamrootVideoEventPolyfill=__webpack_require__(1),_streamrootVideoEventPolyfill2=_interopRequireDefault(_streamrootVideoEventPolyfill),MEDIA_TYPE={VOD:0,LIVE:1,DVR:2},attachJWStreamrootProvider=function(e){function t(t,o){function a(e){if(void 0===Z||Z.url!==e){var t=function(e,t){Q=MEDIA_TYPE.VOD,t.details.live&&(Q=t.details.totalduration>120?MEDIA_TYPE.DVR:MEDIA_TYPE.LIVE,z=t.details.totalduration),u.setLive(t.details.live)};z=0,Z&&Z.destroy();var r=o.p2pConfig||{},a=o.hlsjsConfig||{};if(o.contentIdForUrl){var s=o.contentIdForUrl(e);s&&(r.contentId=s)}var l=C._.extend({},a);Z=new _streamrootHlsjsP2pBundle2.default(l,r),Z.on(_streamrootHlsjsP2pBundle2.default.Events.MANIFEST_PARSED,N),Z.on(_streamrootHlsjsP2pBundle2.default.Events.ERROR,function(e,t){t.fatal&&k.trigger(n.JWPLAYER_MEDIA_ERROR,{message:t.details})});var u=new _streamrootVideoEventPolyfill2.default(W);u.on(_streamrootVideoEventPolyfill2.default.Events.WAITING,function(){k.setState(i.BUFFERING)}),u.on(_streamrootVideoEventPolyfill2.default.Events.PLAYING,function(){k.setState(i.PLAYING)}),u.on(_streamrootVideoEventPolyfill2.default.Events.ENDED,function(){k.trigger(n.JWPLAYER_MEDIA_BEFORECOMPLETE),K&&(c(0),k.pause(),k.setState(i.COMPLETE),k.trigger(n.JWPLAYER_MEDIA_COMPLETE),U&&(W.removeEventListener("seeked",v),U=!1))}),Z.on(_streamrootHlsjsP2pBundle2.default.Events.LEVEL_LOADED,t),Z.on(_streamrootHlsjsP2pBundle2.default.Events.DESTROYING,function(){u.dispose()}),Z.loadSource(e),Z.attachMedia(W),S()}}function s(e){this.setState(i.BUFFERING),a(e.file),this.trigger(n.JWPLAYER_MEDIA_BUFFER_FULL),j=setInterval(Y,100)}function l(e){W.muted=e}function u(){W.pause(),this.setState(i.PAUSED)}function d(){return w}function f(){return x}function E(){W.play(),this.setState(i.BUFFERING),this.setVisibility(!0)}function c(e){if(K){var t=W.currentTime;Q===MEDIA_TYPE.DVR&&e<0&&(e+=W.duration),W.currentTime=e,k.trigger("seek",{position:t,offset:e}),U||(W.addEventListener("seeked",v),U=!0)}}function v(){k.trigger("seeked")}function _(){H===W.parentNode&&H.removeChild(W)}function m(e){H=e,H.appendChild(W)}function P(){return H}function p(e){var t=0===e?-1:w.length-1-e;Z.nextLevel=t,g(e)}function g(e){k._currentQuality=e,k.trigger(n.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:w})}function h(e){e=!!e,e?r.css.style(H,{visibility:"visible",opacity:1}):r.css.style(H,{visibility:"",opacity:0})}function L(){W.pause(),this.setState(i.IDLE)}function I(e){W.volume=e/100}function A(){return!0}function D(){return{name:this.name}}function y(){if(K)return K=!1,Z&&Z.detachMedia(),clearInterval(j),q=!1,W}function R(){K=!0,Z&&Z.attachMedia(W),S()}function T(){var e=navigator.userAgent;return/(iPhone|iPad|iPod|iPod touch);.*?OS/.test(e)||/ (Chrome|Version)\/\d+(\.\d+)+.* Safari\/\d+(\.\d+)+/.test(e)||/Firefox\/(\d+(?:\.\d+)+)/.test(e)}function M(){q=!0,k.trigger("subtitlesTracks",{tracks:W.textTracks})}function S(){T()&&(W.textTracks.onaddtrack=M,W.textTracks.length&&M())}function V(e){if(q)for(var t=W.textTracks,r=e.tracks[e.track].id,n=0;n<t.length;n++)t[n].mode=t[n]._id==r?"showing":"hidden"}function B(){if(K){var e=W.currentTime,t=W.duration;J=e,Q===MEDIA_TYPE.LIVE&&(t=1/0),Q===MEDIA_TYPE.DVR&&(e=-(W.duration-W.currentTime),t=-z),k.trigger(n.JWPLAYER_MEDIA_TIME,{position:e,duration:t})}}function Y(){var e=F();e!=G&&(G=e,k.trigger(n.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*G})),e>=1&&clearInterval(j)}function b(e){for(var t=0;t<e.length;t++)if(e.start(t)<=W.currentTime&&W.currentTime<=e.end(t))return e.end(t);return J}function F(){var e=W.buffered,t=b(e);return W.duration<=0?0:t/W.duration}function N(e,t){var r=[];if(t.levels.forEach(function(e){var t={};t.bitrate=e.bitrate,r.unshift(t),t.label=X(e)}),t.levels.length>1){var i={label:"Auto"};r.unshift(i)}w=r,k.trigger(n.JWPLAYER_MEDIA_LEVELS,{levels:w,currentQuality:x}),g(Z.manualLevel+1)}var H,j,C=e(t),k=this,O=document.getElementById(t),W=O&&O.querySelector("video")?O.querySelector("video"):document.createElement("video"),J=0,w=[],x=-1,G=-1,U=!1,q=!1,Q=MEDIA_TYPE.VOD,z=0,K=!0,X=o.videoQualityLabelForLevel||levelLabel;this.name="streamrootHLS";var Z;r.css.style(W,{height:"100%",width:"100%"});var $=C.Events;C._.extend(this,$,{load:s,mute:l,pause:u,getQualityLevels:d,getCurrentQuality:f,play:E,seek:c,remove:_,setContainer:m,getContainer:P,setCurrentQuality:p.bind(this),setVisibility:h,stop:L,volume:I,supportsFullscreen:A,getName:D,detachMedia:y,attachMedia:R}),W.addEventListener("timeupdate",B),C.on(e.events.JWPLAYER_CAPTIONS_CHANGED,V),C.on(e.events.JWPLAYER_CAPTIONS_LIST,V)}var r=e.utils,n=e.events,i=n.state;t.getName=function(){return{name:"StreamrootProviderHLS"}},t.supports=function(e){var t=_streamrootHlsjsP2pBundle2.default&&("IE"===_streamrootHlsjsP2pBundle2.default.getBrowserName()||"Edge"===_streamrootHlsjsP2pBundle2.default.getBrowserName());return(e.file&&-1!==e.file.indexOf(".m3u8")||"hls"===e.type)&&!t&&_streamrootHlsjsP2pBundle2.default&&_streamrootHlsjsP2pBundle2.default.isSupported()},e.api.registerProvider(t)};attachJWStreamrootProvider(window.jwplayer);

/***/ })
/******/ ]);
